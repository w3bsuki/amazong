# WORKFLOW.md â€” Treido Shipping Workflow

Default workflow for both AI agents and developers.

## 1. Frame

Define in one short block before edits:

- Goal.
- Scope (paths/routes).
- Non-goals (what must not be touched).
- Risk lane:
  - low-risk: UI, docs, refactor, tests
  - high-risk: DB, auth, payments, destructive operations

## 2. Implement

- Work in small, reviewable batches.
- Keep changes scoped to the declared paths.
- Respect path-local `AGENTS.md` boundaries.
- Prefer direct fixes over speculative rewrites.

## 3. Verify

Run only the checks that match the changed surface.

### Code changes (default)

```bash
pnpm -s typecheck
pnpm -s lint
pnpm -s styles:gate
```

### Docs and agent-system changes

```bash
pnpm -s docs:check
```

### Risk-based tests

```bash
pnpm -s test:unit
REUSE_EXISTING_SERVER=true pnpm -s test:e2e:smoke
```

## 4. Report

Every implementation response must include:

1. Files changed.
2. Commands run and pass/fail status.
3. Any remaining risks, assumptions, or skipped checks.

## High-Risk Pause Rule

Pause and align with a human before finalizing:

- DB schema, migrations, RLS.
- Auth/session/access control behavior.
- Payments/Stripe/webhooks.
- Destructive or bulk data operations.

## Optional Runtime Recording

- Active queue: `.codex/TASKS.md`
- Decisions: `.codex/DECISIONS.md`
- Shipped log: `.codex/SHIPPED.md`

Last updated: 2026-02-06
