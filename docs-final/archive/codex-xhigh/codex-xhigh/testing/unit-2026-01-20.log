The CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.

 RUN  v2.1.9 J:/amazong

 Γ£ô __tests__/geolocation.test.ts (31 tests) 18ms
 Γ£ô __tests__/validations-auth.test.ts (55 tests) 36ms
 Γ£ô __tests__/shipping.test.ts (45 tests) 18ms
 Γ£ô __tests__/currency.test.ts (22 tests) 46ms
 Γ£ô __tests__/stripe-locale.test.ts (37 tests) 47ms
 Γ£ô __tests__/normalize-image-url.test.ts (23 tests) 12ms
 Γ£ô __tests__/hooks/use-product-search.test.ts (26 tests) 154ms
 Γ£ô __tests__/hooks/use-toast.test.ts (19 tests) 80ms
 Γ£ô __tests__/hooks/use-recently-viewed.test.ts (16 tests) 97ms
stderr | __tests__/hooks/use-badges.test.ts > hooks/use-badges > initial fetch > handles network error
Error fetching badges: Error: Network error
    at J:\amazong\__tests__\hooks\use-badges.test.ts:81:39
    at file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:146:14
    at file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:533:11
    at runWithTimeout (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:39:7)
    at runTest (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1056:17)
    at runSuite (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runSuite (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1205:15)
    at runFiles (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1262:5)
    at startTests (file:///J:/amazong/node_modules/.pnpm/@vitest+runner@2.1.9/node_modules/@vitest/runner/dist/index.js:1271:3)

stderr | __tests__/hooks/use-badges.test.ts > hooks/use-badges > toggleFeatured > throws error on failed toggle
Error toggling badge feature: Error: Max featured badges reached
    at Object.toggleFeatured (J:\amazong\hooks\use-badges.ts:68:15)
    at J:\amazong\__tests__\hooks\use-badges.test.ts:225:11

stderr | __tests__/hooks/use-badges.test.ts > hooks/use-badges > evaluateBadges > returns empty array on error
Error evaluating badges: Error: Failed to evaluate badges
    at Object.evaluateBadges (J:\amazong\hooks\use-badges.ts:96:15)
    at J:\amazong\__tests__\hooks\use-badges.test.ts:338:22

 Γ£ô __tests__/hooks/use-badges.test.ts (14 tests) 1005ms
 Γ£ô __tests__/hooks/use-geo-welcome.test.ts (21 tests) 1296ms
 Γ£ô __tests__/image-utils.test.ts (15 tests) 11ms
 Γ£ô __tests__/hooks/use-mobile.test.ts (10 tests) 128ms
 Γ£ô __tests__/product-card-hero-attributes.test.ts (16 tests) 12ms
 Γ£ô __tests__/format-price.test.ts (5 tests) 40ms
 Γ£ô __tests__/order-status.test.ts (16 tests) 11ms
 Γ£ô __tests__/boost-status.test.ts (10 tests) 6ms
 Γ£ô __tests__/url-utils.test.ts (7 tests) 6ms
 Γ£ô __tests__/supabase-middleware-session.test.ts (1 test) 12ms
 Γ£ô __tests__/proxy-middleware.test.ts (4 tests) 1372ms
   Γ£ô proxy middleware > sets x-pathname and geo cookies when missing 1293ms
 Γ£ô __tests__/safe-json.test.ts (3 tests) 4ms
 Γ£ô __tests__/proxy-matcher.test.ts (1 test) 3ms
 Γ£ô __tests__/product-price.test.tsx (2 tests) 73ms

 Test Files  23 passed (23)
      Tests  399 passed (399)
   Start at  04:24:46
   Duration  7.41s (transform 5.98s, setup 5.68s, collect 10.33s, tests 4.49s, environment 28.36s, prepare 5.94s)

