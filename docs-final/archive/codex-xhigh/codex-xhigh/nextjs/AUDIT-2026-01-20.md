# Next.js Lane Audit — 2026-01-20

## Evidence (commands + outputs)

- `pnpm -s build` → `codex-xhigh/nextjs/build-2026-01-20.log` (✅ compiled successfully)
- `pnpm -s lint` → `codex-xhigh/nextjs/lint-2026-01-20.log` (❌ 2 errors, 614 warnings)
- `rg "^'use client'" app components` → `codex-xhigh/nextjs/use-client-2026-01-20.txt` (37 matches)
- `rg "^import .*app/actions" app components` → `codex-xhigh/nextjs/imports-app-actions-2026-01-20.txt` (20 matches)
- `rg "(?i)(headers\\(\\)\\.get|request\\.headers\\.get)\\([^)]*origin" ...` → `codex-xhigh/nextjs/origin-usage-2026-01-20.txt` (0 matches)

## Critical (blocks execution)

- [ ] `react-hooks/preserve-manual-memoization` lint errors → `components/mobile/drawers/product-quick-view-drawer.tsx:109` → React Compiler skips memoization because dependencies may be mutated; make dependencies immutable/stable or remove/refactor the memo.

## High (triage next)

- [ ] Server actions imported directly from app/components (20) → `codex-xhigh/nextjs/imports-app-actions-2026-01-20.txt` → classify each import as Server-only (OK in server components/route handlers) vs Client (must be passed from a Server parent or moved behind an API).
- [ ] `use client` surface (37) → `codex-xhigh/nextjs/use-client-2026-01-20.txt` → verify each is truly interactive (reduce client boundaries only when it materially simplifies data + caching).

## Deferred

- [ ] Lint warnings backlog (614) → `codex-xhigh/nextjs/lint-2026-01-20.log` → mostly cleanup (non-null assertions, any, Next `<Link/>` usage, complexity).

