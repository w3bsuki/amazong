@import "tailwindcss";
@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

/* ===== REMOVE HOVER/ACTIVE ZOOM =====
   We keep lightweight hover states (color/underline) but disable scale-based
   "zoom" transforms globally for a snappy marketplace UI.
*/

@layer base {
  [class*="hover:scale-"]:hover,
  .group:hover [class*="group-hover:scale-"],
  [class*="active:scale-"]:active {
    transform: none !important;
  }
}

/* Fonts are self-hosted via next/font (see app/[locale]/layout.tsx). */

/* ===== iOS ZOOM PREVENTION ===== */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  input[type="text"],
  input[type="search"],
  input[type="email"],
  input[type="tel"],
  input[type="url"],
  input[type="password"],
  input[type="number"],
  input:not([type]),
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* ===== TAILWIND V4 THEME - All design tokens in one place ===== */
@theme {
  /* === FONTS === */
  --font-sans: "Inter", var(--font-inter), ui-sans-serif, system-ui, -apple-system,
    "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --font-serif: "Source Serif 4", serif;
  --font-mono: "JetBrains Mono", monospace;

  /* === SEMANTIC TYPE SCALE (App UI) === */
  /* Use these in UI instead of article/blog sizing. */
  --text-tiny: 0.6875rem; /* 11px: legal, helper, micro */
  --text-tiny--line-height: 1rem;
  --text-body: 0.875rem; /* 14px: standard body */
  --text-body--line-height: 1.25rem;
  --text-price: 1rem; /* 16px: price emphasis */
  --text-price--line-height: 1.25rem;

  /* === PROFESSIONAL TYPOGRAPHY SCALE (Amazon/eBay/Target inspired) ===
   * Using Tailwind's font-size/line-height shorthand pattern
   * Key principles:
   * - 14px (text-sm) as body base - same as Amazon, eBay
   * - Line-height 1.4-1.5 for body text (improves readability)
   * - font-normal (400) for body, semibold (600) for prices
   * - text-xs (12px) for captions, badges, meta
   * - Custom text-2xs (10px) for tiny badges only
   */
  --font-size-2xs: 0.625rem;       /* 10px - badges, tiny labels */
  --font-size-2xs--line-height: 0.875rem;  /* 14px line-height */
  
  /* Letter spacing for small text (improves legibility) */
  --letter-spacing-tight: -0.01em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.01em;
  --letter-spacing-wider: 0.02em;

  /* === BORDER RADIUS (eBay-style sharp: 2-4px) === */
  --radius-none: 0;
  --radius-xs: 0.0625rem;
  --radius-sm: 0.125rem;
  --radius-md: 0.25rem;
  --radius-lg: 0.375rem;
  --radius-xl: 0.5rem;
  --radius-2xl: 0.75rem;
  --radius-pill: 9999px;
  --radius-full: 9999px;

  /* === CONTAINER WIDTHS === */
  --container-3xs: 16rem;
  --container-2xs: 18rem;
  --container-xs: 20rem;
  --container-gallery: 36rem;   /* 576px - Professional product image size */
  --container-header-content: 72rem; /* 1152px - Header search/nav content max-width */

  /* === DROPDOWN/POPOVER WIDTHS === */
  --container-dropdown-sm: 22rem;  /* 352px - Compact dropdowns */
  --container-dropdown: 24rem;     /* 384px - Standard dropdowns */
  --container-dropdown-lg: 35rem;  /* 560px - Large dropdowns (account) */

  /* === MODAL WIDTHS === */
  --container-modal-sm: 25rem;     /* 400px - Compact modals */
  --container-modal: 35rem;        /* 560px - Standard modals */
  --container-modal-lg: 56.25rem;  /* 900px - Large modals (filters) */

  /* === SCROLLABLE AREA HEIGHTS === */
  --spacing-scroll-sm: 11.25rem;   /* 180px - Compact scroll areas */
  --spacing-scroll-md: 18.75rem;   /* 300px - Standard scroll areas */
  --spacing-scroll-lg: 25rem;      /* 400px - Large scroll areas */
  --spacing-scroll-xl: 31.25rem;   /* 500px - Extra large scroll areas */

  /* === DIALOG/MODAL MAX HEIGHTS === */
  --dialog-max-h: 90dvh;         /* Default dialog max height */
  --dialog-max-h-sm: 75dvh;      /* Compact dialogs */
  --dialog-max-h-lg: 95dvh;      /* Full-screen dialogs */

  /* === TOUCH TARGETS (Marketplace Dense) === */
  /* WCAG 2.2 AA = 24px minimum. We use tight marketplace scale. */
  --spacing-touch-xs: 1.5rem;    /* 24px - Minimum (inline icons) */
  --spacing-touch-sm: 1.75rem;   /* 28px - Compact buttons */
  --spacing-touch: 2rem;         /* 32px - Standard */
  --spacing-touch-lg: 2.25rem;   /* 36px - Primary CTA (max standard) */

  /* === PAGE LAYOUT TOKENS (Mobile-first, consistent edge insets) === */
  --page-inset: 0.5rem;          /* 8px - Mobile edge padding (matches px-2) */
  --page-inset-md: 0.75rem;      /* 12px - Tablet */
  --page-inset-lg: 1rem;         /* 16px - Desktop */
  --icon-edge-offset: 0.25rem;   /* 4px - Negative margin for header icons to align with content */

  /* === CATEGORY BROWSE TOKENS === */
  /* Mobile category circle size (compact for dense nav). */
  --category-circle-mobile: 3.25rem; /* 52px - slightly larger for better touch */

  /* Form-specific spacing */
  --spacing-form: 1rem;
  --spacing-section: 1.5rem;

  /* === CTA BUTTON TOKENS === */
  --color-cta-primary: oklch(0.48 0.22 260);
  --color-cta-primary-hover: oklch(0.40 0.24 260);
  --color-cta-primary-text: oklch(1 0 0);
  --color-cta-buy-now: oklch(0.48 0.22 260);
  --color-cta-add-cart: oklch(0.48 0.22 260);
  --color-cta-add-cart-hover: oklch(0.40 0.24 260);
  --color-cta-trust-blue: oklch(0.50 0.20 255);
  --color-cta-trust-blue-hover: oklch(0.42 0.22 255);
  --color-cta-trust-blue-text: oklch(1 0 0);
  /* Secondary CTA - for use on colored backgrounds (header, hero) */
  --color-cta-secondary: oklch(1 0 0);
  --color-cta-secondary-hover: oklch(0.96 0 0);
  --color-cta-secondary-text: var(--color-brand);

  /* === HEADER TEXT TOKENS === */
  --color-header-text: oklch(1 0 0);
  --color-header-text-muted: oklch(0.92 0 0);
  --color-header-hover: var(--color-brand-dark);
  --color-header-active: oklch(0.34 0.24 260);
  --color-header-nav-bg: var(--color-brand);

  /* === INTERACTIVE TOKENS === */
  --color-interactive: oklch(0.48 0.22 260);
  --color-interactive-hover: oklch(0.40 0.24 260);

  /* === SUBHEADER TOKENS === */
  --color-subheader-text: oklch(0.20 0 0);
  --color-subheader-bg: oklch(1 0 0);
  --color-subheader-hover: oklch(0.96 0 0);

  /* === SHADOWS (Flat marketplace - minimal) === */
  --shadow-2xs: none;
  --shadow-xs: none;
  --shadow-sm: 0 1px 2px 0 hsl(0 0% 0% / 0.05);
  --shadow-md: 0 2px 4px 0 hsl(0 0% 0% / 0.08);
  --shadow-lg: 0 2px 4px 0 hsl(0 0% 0% / 0.08);
  --shadow-xl: 0 2px 4px 0 hsl(0 0% 0% / 0.08);
  --shadow-2xl: 0 2px 4px 0 hsl(0 0% 0% / 0.10);
  --shadow-dropdown: 0 2px 4px 0 hsl(0 0% 0% / 0.10);
  --shadow-modal: 0 4px 8px 0 hsl(0 0% 0% / 0.12);
  --shadow-product: none;
  --shadow-product-hover: none;

  /* === COLORS - Light Mode (default) === */
  /* Marketplace semantic tokens (required) */
  --color-canvas-default: oklch(0.985 0 0);
  --color-surface-card: oklch(1 0 0);
  --color-border-subtle: oklch(0.88 0 0);
  --color-action-primary: var(--color-brand);
  --color-status-success: var(--color-success);
  --color-status-warning: var(--color-warning);
  --color-status-error: var(--color-error);
  --color-status-info: var(--color-info);
  --color-status-neutral: oklch(0.92 0 0);

  /* Order status (domain semantic) */
  --color-order-pending: var(--color-warning);
  --color-order-received: var(--color-info);
  --color-order-processing: oklch(0.55 0.18 275);
  --color-order-shipped: oklch(0.55 0.18 310);
  --color-order-delivered: var(--color-success);
  --color-order-cancelled: var(--color-error);

  /* Shadcn-compatible aliases */
  --color-background: var(--color-canvas-default);
  --color-foreground: oklch(0.12 0 0);
  --color-card: var(--color-surface-card);
  --color-card-foreground: oklch(0.12 0 0);
  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.12 0 0);
  --color-primary: oklch(0.48 0.22 260);
  --color-primary-foreground: oklch(1 0 0);
  --color-secondary: oklch(0.96 0 0);
  --color-secondary-foreground: oklch(0.30 0 0);
  --color-muted: oklch(0.96 0 0);
  --color-muted-foreground: oklch(0.45 0 0);
  --color-accent: oklch(0.96 0 0);
  --color-accent-foreground: oklch(0.20 0 0);
  --color-destructive: oklch(0.55 0.25 27);
  --color-destructive-foreground: oklch(1 0 0);
  --color-border: var(--color-border-subtle);
  --color-input: oklch(0.97 0 0);
  --color-ring: oklch(0.48 0.22 260);

  /* Charts */
  --color-chart-1: oklch(0.72 0.06 250);
  --color-chart-2: oklch(0.79 0.09 36);
  --color-chart-3: oklch(0.58 0.08 254);
  --color-chart-4: oklch(0.50 0.08 259);
  --color-chart-5: oklch(0.42 0.10 264);

  /* Brand */
  --color-brand: oklch(0.48 0.22 260);
  --color-brand-light: oklch(0.58 0.18 260);
  --color-brand-dark: oklch(0.40 0.24 260);
  --color-brand-muted: oklch(0.96 0.04 260);
  /* Search bar specific - professional neutral with subtle brand hint */
  --color-search-bg: oklch(1 0 0);
  --color-search-border: oklch(0.92 0.01 260);
  --color-search-icon: oklch(0.48 0.22 260);

  /* Prices */
  --color-price-regular: oklch(0.15 0.01 250);
  --color-price-sale: oklch(0.50 0.22 27);
  --color-price-original: oklch(0.55 0.01 250);
  --color-price-savings: oklch(0.50 0.18 145);

  /* Deals */
  --color-deal: oklch(0.55 0.25 27);
  --color-deal-light: oklch(0.96 0.03 27);
  --color-deal-badge: oklch(0.55 0.25 27);

  /* Stock Status */
  --color-stock-available: oklch(0.60 0.18 145);
  --color-stock-low: oklch(0.70 0.18 65);
  --color-stock-out: oklch(0.50 0.20 27);
  --color-stock-urgent-bg: oklch(0.96 0.04 27);
  --color-stock-urgent-text: oklch(0.45 0.20 27);

  /* Urgency Banners - Semantic tokens for different urgency types */
  --color-urgency-bg: oklch(0.97 0.02 85);
  --color-urgency-text: oklch(0.35 0.10 85);
  --color-urgency-icon: oklch(0.60 0.18 27);
  --color-live-dot: oklch(0.55 0.22 145);
  
  /* Urgency - Low Stock (Amber/Warning) */
  --color-urgency-stock-bg: oklch(0.96 0.04 85);
  --color-urgency-stock-text: oklch(0.38 0.12 85);
  --color-urgency-stock-icon-bg: oklch(0.92 0.06 85);
  --color-urgency-stock-icon: oklch(0.50 0.14 85);
  --color-urgency-stock-border: oklch(0.90 0.06 85);
  
  /* Urgency - Sale Timer (Blue/Info) */
  --color-urgency-sale-bg: oklch(0.96 0.03 250);
  --color-urgency-sale-text: oklch(0.38 0.12 250);
  --color-urgency-sale-icon-bg: oklch(0.92 0.05 250);
  --color-urgency-sale-icon: oklch(0.50 0.14 250);
  --color-urgency-sale-border: oklch(0.90 0.04 250);
  
  /* Urgency - Viewers (Emerald/Success) */
  --color-urgency-viewers-bg: oklch(0.96 0.03 160);
  --color-urgency-viewers-text: oklch(0.38 0.12 160);
  --color-urgency-viewers-icon-bg: oklch(0.92 0.05 160);
  --color-urgency-viewers-icon: oklch(0.50 0.14 160);
  --color-urgency-viewers-border: oklch(0.90 0.04 160);
  
  /* Urgency - Hot/Sold (Orange) */
  --color-urgency-hot-bg: oklch(0.96 0.04 65);
  --color-urgency-hot-text: oklch(0.38 0.12 50);
  --color-urgency-hot-icon-bg: oklch(0.92 0.06 65);
  --color-urgency-hot-icon: oklch(0.55 0.15 50);
  --color-urgency-hot-border: oklch(0.90 0.05 65);

  /* Shipping */
  --color-shipping-free: oklch(0.50 0.18 250);
  --color-shipping-express: oklch(0.60 0.20 145);

  /* Trust */
  --color-verified: oklch(0.55 0.18 250);
  --color-top-rated: oklch(0.75 0.18 65);

  /* Ratings */
  --color-rating: oklch(0.78 0.18 90);
  --color-rating-empty: oklch(0.88 0.03 90);

  /* Sections */
  --color-section-default: oklch(1 0 0);
  --color-section-muted: oklch(0.97 0 0);
  --color-section-deals: oklch(0.55 0.22 27);

  /* Header */
  --color-header-bg: var(--color-brand);
  --color-header-border: var(--color-brand-dark);
  --color-header-hover: var(--color-brand-dark);

  /* Links */
  --color-link: oklch(0.48 0.20 260);
  --color-link-hover: oklch(0.40 0.22 260);

  /* Social Platform Tokens */
  --color-social-instagram: oklch(0.60 0.22 350);
  --color-social-tiktok: oklch(0.15 0 0);
  --color-social-youtube: oklch(0.55 0.25 27);
  --color-social-twitter: oklch(0.15 0 0);
  --color-social-generic: var(--color-primary);

  /* Semantic */
  --color-success: oklch(0.60 0.18 145);
  --color-warning: oklch(0.75 0.16 85);
  --color-error: oklch(0.55 0.25 27);
  --color-info: oklch(0.55 0.18 250);

  /* Sidebar */
  --color-sidebar: oklch(0.97 0 0);
  --color-sidebar-foreground: oklch(0.20 0 0);
  --color-sidebar-primary: oklch(0.48 0.22 260);
  --color-sidebar-primary-foreground: oklch(1 0 0);
  --color-sidebar-accent: oklch(0.95 0 0);
  --color-sidebar-accent-foreground: oklch(0.30 0 0);
  --color-sidebar-border: oklch(0.88 0 0);
  --color-sidebar-ring: oklch(0.48 0.22 260);

  /* Filter */
  --color-filter-bg: oklch(1 0 0);
  --color-filter-border: oklch(0.88 0 0);
  --color-filter-active: oklch(0.48 0.22 260);

  /* Breadcrumb */
  --color-breadcrumb-text: oklch(0.45 0 0);
  --color-breadcrumb-link: oklch(0.48 0.18 260);
  --color-breadcrumb-current: oklch(0.25 0 0);

  /* Footer */
  --color-footer-bg: oklch(0.15 0 0);
  --color-footer-text: oklch(0.85 0 0);
  --color-footer-link: oklch(0.70 0.06 260);
  --color-footer-border: oklch(0.25 0 0);

  /* Product Card */
  --color-product-card-bg: oklch(1 0 0);
  --color-product-card-border: oklch(0.90 0 0);
  --color-product-wishlist: oklch(0.50 0.20 350);
  --color-product-wishlist-active: oklch(0.58 0.25 350);

  /* Seller Card (product page) */
  --color-seller-card: oklch(0.98 0.01 250);
  --color-seller-card-border: oklch(0.90 0.01 250);
  --color-seller-banner: oklch(0.50 0.20 255);
  --color-seller-banner-text: oklch(1 0 0);

  /* Category badge (product page) - NEUTRAL for proper contrast */
  --color-category-badge-bg: oklch(0.97 0 0);           /* Near white, no blue tint */
  --color-category-badge-text: oklch(0.25 0 0);         /* Near black for contrast */
  --color-category-badge-border: oklch(0.88 0 0);       /* Neutral gray border */
  --color-category-badge-icon: oklch(0.50 0.15 250);    /* Icon can stay brand color */

  /* === PROFESSIONAL BADGE TOKENS (Mobile Product Page) === */
  /* Condition badge - HIGH CONTRAST, most important */
  --color-badge-condition-bg: oklch(0.97 0 0);          /* Near white */
  --color-badge-condition-text: oklch(0.20 0 0);        /* Near black */
  --color-badge-condition-border: oklch(0.82 0 0);      /* Visible gray */
  
  /* Shipping badge - Subtle, secondary info */
  --color-badge-shipping-bg: oklch(0.96 0.015 160);     /* Very light teal */
  --color-badge-shipping-text: oklch(0.30 0.08 160);    /* Dark teal */
  --color-badge-shipping-border: oklch(0.88 0.02 160);  /* Teal-gray */
  
  /* Stock urgency badge - Amber for attention */
  --color-badge-stock-bg: oklch(0.96 0.03 85);          /* Light amber */
  --color-badge-stock-text: oklch(0.35 0.12 85);        /* Dark amber */
  --color-badge-stock-border: oklch(0.88 0.04 85);      /* Amber-gray */
  
  /* Seller banner - FLAT, no opacity layers */
  --color-seller-banner-pill-bg: oklch(1 0 0);          /* Solid white pill */
  --color-seller-banner-pill-text: oklch(0.40 0.18 255);/* Brand blue text */

  /* Product Page Unified Container */
  --color-product-container-bg: oklch(1 0 0);
  --color-product-container-border: oklch(0.90 0 0);

  /* Notifications */
  --color-notification: oklch(0.58 0.22 27);
  --color-cart-badge: oklch(0.58 0.22 27);

  /* Overlays */
  --color-overlay-dark: oklch(0 0 0 / 50%);
  --color-overlay-light: oklch(1 0 0 / 80%);

  /* === FORM SECTIONS (simplified) === */
  --color-form-section-bg: oklch(1 0 0);
  --color-form-section-border: oklch(0.92 0 0);
  --color-form-input-bg: oklch(0.98 0 0);

  /* === ACCOUNT DASHBOARD (simplified) === */
  --color-account-stat-bg: oklch(0.985 0 0);
  --color-account-stat-border: oklch(0.88 0 0);
  /* Additional account tokens used by account route group components */
  --color-account-section-bg: var(--color-background);
  --color-account-card-hover: var(--color-muted);
  --color-account-stat-icon-bg: var(--color-muted);
  --color-account-stat-icon: var(--color-foreground);
  --color-account-stat-label: var(--color-muted-foreground);
  --color-account-stat-value: var(--color-foreground);

  --color-account-accent: var(--color-primary);
  --color-account-accent-soft: color-mix(in oklch, var(--color-primary) 12%, var(--color-background));
  --color-account-info: var(--color-info);
  --color-account-info-soft: color-mix(in oklch, var(--color-info) 12%, var(--color-background));
  --color-account-success: var(--color-success);
  --color-account-success-soft: color-mix(in oklch, var(--color-success) 12%, var(--color-background));
  --color-account-warning: var(--color-warning);
  --color-account-warning-soft: color-mix(in oklch, var(--color-warning) 12%, var(--color-background));
  --color-account-error: var(--color-error);
  --color-account-error-soft: color-mix(in oklch, var(--color-error) 12%, var(--color-background));

  /* === MOBILE PRODUCT PAGE TOKENS (simplified) === */
  --color-discount-badge-bg: oklch(0.55 0.22 27);
  --color-discount-badge-text: oklch(1 0 0);
}

/* ===== DARK MODE OVERRIDES ===== */
.dark {
  /* Marketplace semantic tokens (required) */
  --color-canvas-default: oklch(0.18 0.02 250);
  --color-surface-card: oklch(0.22 0.02 250);
  --color-border-subtle: oklch(0.35 0.02 250);
  --color-action-primary: var(--color-brand);
  --color-status-success: var(--color-success);
  --color-status-warning: var(--color-warning);
  --color-status-error: var(--color-error);
  --color-status-info: var(--color-info);
  --color-status-neutral: oklch(0.32 0.02 250);

  /* Order status (domain semantic) - dark mode */
  --color-order-pending: var(--color-warning);
  --color-order-received: var(--color-info);
  --color-order-processing: oklch(0.65 0.14 275);
  --color-order-shipped: oklch(0.65 0.14 310);
  --color-order-delivered: var(--color-success);
  --color-order-cancelled: var(--color-error);

  --color-background: oklch(0.18 0.02 250);
  --color-foreground: oklch(0.95 0 0);
  --color-card: oklch(0.22 0.02 250);
  --color-card-foreground: oklch(0.95 0 0);
  --color-popover: oklch(0.20 0.02 250);
  --color-popover-foreground: oklch(0.95 0 0);
  --color-primary: oklch(0.60 0.16 250);
  --color-primary-foreground: oklch(1 0 0);
  --color-secondary: oklch(0.28 0.02 250);
  --color-secondary-foreground: oklch(0.90 0 0);
  --color-muted: oklch(0.28 0.02 250);
  --color-muted-foreground: oklch(0.70 0 0);
  --color-accent: oklch(0.32 0.04 250);
  --color-accent-foreground: oklch(0.85 0.06 250);
  --color-destructive: oklch(0.55 0.22 27);
  --color-destructive-foreground: oklch(1 0 0);
  --color-border: oklch(0.35 0.02 250);
  --color-input: oklch(0.35 0.02 250);
  --color-ring: oklch(0.60 0.16 250);

  /* Semantic status colors (dark mode) */
  --color-success: oklch(0.65 0.16 145);
  --color-warning: oklch(0.70 0.14 85);
  --color-error: oklch(0.60 0.22 27);
  --color-info: oklch(0.60 0.16 250);

  --color-brand: oklch(0.60 0.16 250);
  --color-brand-light: oklch(0.70 0.14 250);
  --color-brand-dark: oklch(0.50 0.18 250);

  --color-sidebar: oklch(0.22 0.02 250);
  --color-sidebar-foreground: oklch(0.95 0 0);
  --color-sidebar-primary: oklch(0.60 0.16 250);
  --color-sidebar-border: oklch(0.35 0.02 250);

  --color-header-bg: oklch(0.15 0.015 250);
  --color-header-border: oklch(0.28 0.02 250);

  --color-footer-bg: oklch(0.15 0.015 250);
  --color-footer-border: oklch(0.28 0.02 250);

  /* CTA tokens (dark mode) */
  --color-cta-primary: oklch(0.60 0.16 250);
  --color-cta-primary-hover: oklch(0.50 0.18 250);
  --color-cta-primary-text: oklch(1 0 0);
  --color-cta-buy-now: oklch(0.60 0.16 250);
  --color-cta-add-cart: oklch(0.60 0.16 250);
  --color-cta-add-cart-hover: oklch(0.50 0.18 250);
  --color-cta-trust-blue: oklch(0.55 0.18 255);
  --color-cta-trust-blue-hover: oklch(0.48 0.20 255);
  --color-cta-trust-blue-text: oklch(1 0 0);
  /* Secondary CTA (dark mode) */
  --color-cta-secondary: oklch(0.95 0 0);
  --color-cta-secondary-hover: oklch(0.90 0 0);
  --color-cta-secondary-text: oklch(0.20 0.02 250);

  /* Header text tokens (dark mode) */
  --color-header-text: oklch(0.95 0 0);
  --color-header-text-muted: oklch(0.70 0 0);
  --color-header-hover: oklch(0.28 0.02 250);
  --color-header-active: oklch(0.32 0.02 250);
  --color-header-nav-bg: oklch(0.20 0.02 250);

  /* Interactive tokens (dark mode) */
  --color-interactive: oklch(0.60 0.16 250);
  --color-interactive-hover: oklch(0.50 0.18 250);

  /* Subheader tokens (dark mode) */
  --color-subheader-text: oklch(0.90 0 0);
  --color-subheader-bg: oklch(0.18 0.02 250);
  --color-subheader-hover: oklch(0.25 0.02 250);

  --color-filter-bg: oklch(0.22 0.02 250);
  --color-filter-border: oklch(0.35 0.02 250);
  --color-filter-active: oklch(0.60 0.16 250);

  --color-product-card-bg: oklch(0.22 0.02 250);
  --color-product-card-border: oklch(0.35 0.02 250);

  /* Seller Card (product page) - dark mode */
  --color-seller-card: oklch(0.22 0.01 250);
  --color-seller-card-border: oklch(0.35 0.01 250);
  --color-seller-banner: oklch(0.45 0.16 255);
  --color-seller-banner-text: oklch(1 0 0);

  /* Category badge (product page) - dark mode - NEUTRAL */
  --color-category-badge-bg: oklch(0.25 0 0);           /* Dark neutral */
  --color-category-badge-text: oklch(0.92 0 0);         /* Light text */
  --color-category-badge-border: oklch(0.35 0 0);       /* Dark gray border */
  --color-category-badge-icon: oklch(0.70 0.12 250);    /* Lighter brand icon */
  
  /* Professional badge tokens - dark mode */
  --color-badge-condition-bg: oklch(0.25 0 0);
  --color-badge-condition-text: oklch(0.92 0 0);
  --color-badge-condition-border: oklch(0.38 0 0);
  
  --color-badge-shipping-bg: oklch(0.22 0.02 160);
  --color-badge-shipping-text: oklch(0.80 0.06 160);
  --color-badge-shipping-border: oklch(0.35 0.02 160);
  
  --color-badge-stock-bg: oklch(0.25 0.03 85);
  --color-badge-stock-text: oklch(0.85 0.08 85);
  --color-badge-stock-border: oklch(0.38 0.04 85);
  
  --color-seller-banner-pill-bg: oklch(0.20 0 0);
  --color-seller-banner-pill-text: oklch(0.85 0.10 250);

  /* Product Page Unified Container - dark mode */
  --color-product-container-bg: oklch(0.18 0.01 250);
  --color-product-container-border: oklch(0.30 0.02 250);

  --shadow-dropdown: 0 2px 4px 0 hsl(0 0% 0% / 0.20);
  --shadow-modal: 0 4px 12px 0 hsl(0 0% 0% / 0.30);
  --shadow-product: none;
  --shadow-product-hover: none;

  /* Form section tokens (dark mode) */
  --color-form-section-bg: oklch(0.22 0.02 250);
  --color-form-section-border: oklch(0.35 0.02 250);
  --color-form-input-bg: oklch(0.26 0.02 250);
  --color-form-label: oklch(0.95 0 0);
  --color-form-helper: oklch(0.70 0 0);
  --color-progress-bg: oklch(0.30 0.02 250);
  --color-progress-fill: oklch(0.60 0.16 250);

  /* Account dashboard (dark) */
  --color-account-stat-bg: oklch(0.22 0 0);
  --color-account-stat-border: oklch(0.35 0 0);
  --color-account-section-bg: var(--color-background);
  --color-account-card-hover: var(--color-muted);
  --color-account-stat-icon-bg: var(--color-muted);
  --color-account-stat-icon: var(--color-foreground);
  --color-account-stat-label: var(--color-muted-foreground);
  --color-account-stat-value: var(--color-foreground);

  --color-account-accent: var(--color-primary);
  --color-account-accent-soft: color-mix(in oklch, var(--color-primary) 18%, var(--color-background));
  --color-account-info: var(--color-info);
  --color-account-info-soft: color-mix(in oklch, var(--color-info) 18%, var(--color-background));
  --color-account-success: var(--color-success);
  --color-account-success-soft: color-mix(in oklch, var(--color-success) 18%, var(--color-background));
  --color-account-warning: var(--color-warning);
  --color-account-warning-soft: color-mix(in oklch, var(--color-warning) 18%, var(--color-background));
  --color-account-error: var(--color-error);
  --color-account-error-soft: color-mix(in oklch, var(--color-error) 18%, var(--color-background));

  /* Mobile product (dark) */
  --color-discount-badge-bg: oklch(0.55 0.20 27);
  --color-discount-badge-text: oklch(1 0 0);
  
  /* Urgency Banners - Dark mode overrides */
  --color-urgency-stock-bg: oklch(0.25 0.04 85);
  --color-urgency-stock-text: oklch(0.85 0.08 85);
  --color-urgency-stock-icon-bg: oklch(0.30 0.06 85);
  --color-urgency-stock-icon: oklch(0.75 0.12 85);
  --color-urgency-stock-border: oklch(0.35 0.05 85);
  
  --color-urgency-sale-bg: oklch(0.25 0.03 250);
  --color-urgency-sale-text: oklch(0.85 0.08 250);
  --color-urgency-sale-icon-bg: oklch(0.30 0.05 250);
  --color-urgency-sale-icon: oklch(0.75 0.12 250);
  --color-urgency-sale-border: oklch(0.35 0.04 250);
  
  --color-urgency-viewers-bg: oklch(0.25 0.03 160);
  --color-urgency-viewers-text: oklch(0.85 0.08 160);
  --color-urgency-viewers-icon-bg: oklch(0.30 0.05 160);
  --color-urgency-viewers-icon: oklch(0.75 0.12 160);
  --color-urgency-viewers-border: oklch(0.35 0.04 160);
  
  --color-urgency-hot-bg: oklch(0.25 0.04 65);
  --color-urgency-hot-text: oklch(0.85 0.08 50);
  --color-urgency-hot-icon-bg: oklch(0.30 0.06 65);
  --color-urgency-hot-icon: oklch(0.75 0.12 50);
  --color-urgency-hot-border: oklch(0.35 0.05 65);

  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

/* ===== BASE LAYER ===== */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  :where(
      a,
      button,
      input,
      select,
      textarea,
      summary,
      [role="button"],
      [role="link"],
      [tabindex]:not([tabindex="-1"])
    ):focus-visible {
    outline: 2px solid var(--color-ring) !important;
    outline-offset: 2px !important;
  }

  html {
    overflow-x: clip;
    -webkit-text-size-adjust: 100%;
    font-feature-settings: "cv11", "ss01", "ss03", "cv05", "cv08", "cv09", "cv10";
  }

  body {
    @apply bg-background text-foreground antialiased;
    overflow-x: clip;
    width: 100%;
    max-width: 100vw;
    font-family: var(--font-sans);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-optical-sizing: auto;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  /* Remove 300ms tap delay on mobile */
  a, button, input, select, textarea, [role="button"] {
    touch-action: manipulation;
  }
}

/* ===== RICH TEXT (App UI; replaces typography plugin) ===== */
@layer components {
  .richtext {
    color: var(--color-foreground);
    font-size: 0.875rem;
    line-height: 1.25rem;
    max-width: none;
  }

  .richtext :where(p):not(:where(.richtext-skip *)) { margin-block: 0.75em; }
  .richtext :where(ul, ol):not(:where(.richtext-skip *)) { margin-block: 0.75em; padding-inline-start: 1.25em; }
  .richtext :where(li):not(:where(.richtext-skip *)) { margin-block: 0.25em; }
  .richtext :where(a):not(:where(.richtext-skip *)) { color: var(--color-link); text-decoration: underline; text-underline-offset: 0.18em; }
  .richtext :where(strong):not(:where(.richtext-skip *)) { font-weight: 650; }
  .richtext :where(code):not(:where(.richtext-skip *)) { font-family: var(--font-mono); font-size: 0.95em; }
  .richtext :where(pre):not(:where(.richtext-skip *)) {
    font-family: var(--font-mono);
    font-size: 0.8125rem;
    line-height: 1.25rem;
    white-space: pre-wrap;
    background: color-mix(in oklch, var(--color-card), var(--color-foreground) 6%);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    padding: var(--spacing-d6);
    overflow: auto;
  }
  .richtext :where(h1, h2, h3):not(:where(.richtext-skip *)) {
    font-weight: 650;
    letter-spacing: var(--letter-spacing-tight);
    margin-block: 1em 0.5em;
  }
  .richtext :where(h1):not(:where(.richtext-skip *)) { font-size: 1.125rem; line-height: 1.5rem; }
  .richtext :where(h2):not(:where(.richtext-skip *)) { font-size: 1.0625rem; line-height: 1.5rem; }
  .richtext :where(h3):not(:where(.richtext-skip *)) { font-size: 1rem; line-height: 1.5rem; }
  .richtext :where(hr):not(:where(.richtext-skip *)) { border-color: var(--color-border); margin-block: 1rem; }
  .richtext :where(blockquote):not(:where(.richtext-skip *)) {
    border-inline-start: 3px solid var(--color-border);
    padding-inline-start: 0.75rem;
    color: var(--color-muted-foreground);
  }
}

/* ===== CUSTOM UTILITIES (only what Tailwind v4 can't do) ===== */
/*
  Note: Tailwind's built-in `container` utility does not center itself and has
  no default horizontal padding. In this project we intentionally define a
  centered, padded `container` utility for consistent page layout.
*/
@utility container {
  margin-inline: auto;
  width: 100%;
  /* Desktop page container (eBay-ish width). */
  max-width: 90rem; /* 1440px */
  padding-inline: 0.75rem;
  @media (width >= 40rem) { padding-inline: 1rem; }
  @media (width >= 64rem) { padding-inline: 1.5rem; }
}

@utility container-wide {
  margin-inline: auto;
  width: 100%;
  /* Opt-in wider container for special pages/sections only. */
  max-width: 96rem; /* 1536px */
  padding-inline: 0.75rem;
  @media (width >= 40rem) { padding-inline: 1rem; }
  @media (width >= 64rem) { padding-inline: 1.5rem; }
}

@utility container-content {
  margin-inline: auto;
  width: 100%;
  /* Narrower, readability-first content width (forms, account pages, etc.). */
  max-width: var(--container-header-content); /* 72rem / 1152px */
  padding-inline: 0.75rem;
  @media (width >= 40rem) { padding-inline: 1rem; }
  @media (width >= 64rem) { padding-inline: 1.5rem; }
}

@utility container-narrow {
  margin-inline: auto;
  width: 100%;
  /* Very narrow content width for auth/settings forms. */
  max-width: 48rem; /* 768px */
  padding-inline: 0.75rem;
  @media (width >= 40rem) { padding-inline: 1rem; }
  @media (width >= 64rem) { padding-inline: 1.5rem; }
}

@utility container-bleed {
  margin-inline: auto;
  width: 100%;
  max-width: 90rem; /* 1440px */
  padding-inline: 0;
}

@utility container-bleed-wide {
  margin-inline: auto;
  width: 100%;
  max-width: 96rem; /* 1536px */
  padding-inline: 0;
}

@utility container-bleed-content {
  margin-inline: auto;
  width: 100%;
  max-width: var(--container-header-content); /* 72rem / 1152px */
  padding-inline: 0;
}

@utility container-bleed-narrow {
  margin-inline: auto;
  width: 100%;
  max-width: 48rem; /* 768px */
  padding-inline: 0;
}

/* ===== SCROLLBAR (neutral) ===== */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: oklch(0.96 0 0); border-radius: 4px; }
::-webkit-scrollbar-thumb { background: oklch(0.78 0 0); border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: oklch(0.65 0 0); }

/* ===== UTILITY CLASSES ===== */
.no-scrollbar::-webkit-scrollbar,
.scrollbar-hide::-webkit-scrollbar { display: none; }
.no-scrollbar,
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

/* Custom text-2xs utility (10px) for badges & tiny labels - Amazon/eBay style */
.text-2xs { 
  font-size: 0.625rem;  /* 10px */
  line-height: 0.875rem;  /* 14px - 1.4 ratio */
}

/* ===== WCAG 2.2 FOCUS MANAGEMENT (2.4.11) ===== */
/* Prevent focused elements from being obscured by sticky headers/footers */
:focus-visible {
  scroll-margin-top: 5rem;    /* 80px - accounts for sticky header */
  scroll-margin-bottom: 7rem; /* 112px - accounts for bottom nav + safe area */
}

/* ===== REDUCED MOTION (WCAG 2.3.3) ===== */
/* Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

.line-clamp-1 { display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
.line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }

/* Safe area insets */
.pb-safe { padding-bottom: env(safe-area-inset-bottom); }
.pt-safe { padding-top: env(safe-area-inset-top); }
.pl-safe { padding-left: env(safe-area-inset-left); }
.pr-safe { padding-right: env(safe-area-inset-right); }
.h-safe-bottom { height: env(safe-area-inset-bottom); }

/* Touch optimization - explicit utilities for Tailwind */
.touch-target { min-width: 40px; min-height: 40px; }
.touch-action-manipulation { touch-action: manipulation; }
.tap-transparent { -webkit-tap-highlight-color: transparent; }

/* Touch target size utilities matching @theme spacing tokens */
.h-touch { height: var(--spacing-touch); }  /* 32px */
.w-touch { width: var(--spacing-touch); }   /* 32px */
.size-touch { width: var(--spacing-touch); height: var(--spacing-touch); }
.min-h-touch { min-height: var(--spacing-touch); }
.min-w-touch { min-width: var(--spacing-touch); }
.h-touch-xs { height: var(--spacing-touch-xs); }  /* 24px */
.w-touch-xs { width: var(--spacing-touch-xs); }
.h-touch-sm { height: var(--spacing-touch-sm); }  /* 28px */
.w-touch-sm { width: var(--spacing-touch-sm); }
.min-h-touch-sm { min-height: var(--spacing-touch-sm); }
.min-w-touch-sm { min-width: var(--spacing-touch-sm); }
.size-touch-sm { width: var(--spacing-touch-sm); height: var(--spacing-touch-sm); }
.h-touch-lg { height: var(--spacing-touch-lg); }  /* 36px */

/* Hero carousel touch behavior */
.hero-carousel {
  touch-action: pan-x pinch-zoom;
  overscroll-behavior: contain;
  user-select: none;
}
.hero-carousel img { pointer-events: none; user-select: none; -webkit-user-drag: none; }

/* ===== MOBILE SEARCH OVERLAY - HIDE TAB BAR ===== */
/* When body is locked (search overlay open), hide the mobile tab bar */
body[style*="position: fixed"] [data-testid="mobile-tab-bar"] {
  display: none !important;
}

/* ===== ANIMATIONS ===== */
/* Note: tailwindcss-animate plugin provides animate-in, animate-out, slide-in-from-*, etc. */
/* Only add custom animations here that aren't provided by the plugin */

:root {
  --sidebar: hsl(0 0% 98%);
  --sidebar-foreground: hsl(240 5.3% 26.1%);
  --sidebar-primary: hsl(240 5.9% 10%);
  --sidebar-primary-foreground: hsl(0 0% 98%);
  --sidebar-accent: hsl(240 4.8% 95.9%);
  --sidebar-accent-foreground: hsl(240 5.9% 10%);
  --sidebar-border: hsl(220 13% 91%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@theme inline {
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);
}
