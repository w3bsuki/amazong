/* ============================================================
   TREIDO DESIGN SYSTEM - Tailwind v4
   
   Structure:
   - globals.css (this file) - imports + @theme tokens + @layer base
   - utilities.css - custom utilities, scrollbar, richtext
   - shadcn-components.css - shadcn/ui data-state selectors
   - legacy-vars.css - component CSS vars (TODO: migrate out)
   ============================================================ */

@import "tailwindcss";
@import "./utilities.css";
@import "./shadcn-components.css";
@import "./legacy-vars.css";

@plugin "tailwindcss-animate";

@custom-variant dark (&:is(.dark *));

/* ===== iOS ZOOM PREVENTION ===== */
@media screen and (-webkit-min-device-pixel-ratio: 0) {

  input[type="text"],
  input[type="search"],
  input[type="email"],
  input[type="tel"],
  input[type="url"],
  input[type="password"],
  input[type="number"],
  input:not([type]),
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* ===== TAILWIND V4 THEME TOKENS ===== */
@theme {
  /* === FONTS === */
  --font-sans: "Inter", var(--font-inter), ui-sans-serif, system-ui, -apple-system,
    "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --font-serif: "Source Serif 4", serif;
  --font-mono: "JetBrains Mono", monospace;

  /* === FONT SIZE: Custom scales === */
  --text-2xs: 0.625rem;
  --text-2xs--line-height: 0.875rem;
  --text-tiny: 0.6875rem;
  --text-tiny--line-height: 1rem;
  --text-body: 0.875rem;
  --text-body--line-height: 1.25rem;
  --text-price: 1rem;
  --text-price--line-height: 1.25rem;

  /* === LETTER SPACING === */
  --letter-spacing-tight: -0.01em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.01em;
  --letter-spacing-wider: 0.02em;

  /* === BORDER RADIUS (Treido: Tight) === */
  --radius-xs: 0.125rem;
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;

  /* === LAYOUT HEIGHTS === */
  --spacing-header: 3rem;
  --spacing-bottom-nav: 3rem;
  --spacing-button: 2.75rem;
  --spacing-button-sm: 2.25rem;
  --spacing-button-lg: 3rem;
  --spacing-input: 2.75rem;
  --spacing-search: 2.75rem;

  /* === TOUCH TARGETS (Dense Marketplace) === */
  --spacing-touch-xs: 1.75rem;
  --spacing-touch-sm: 2rem;
  --spacing-touch: 2.25rem;
  --spacing-touch-lg: 2.75rem;

  /* === CONTAINER WIDTHS === */
  --container-3xs: 16rem;
  --container-2xs: 18rem;
  --container-xs: 20rem;
  --container-sm: 24rem;
  --container-md: 28rem;
  --container-lg: 32rem;
  --container-xl: 36rem;
  --container-header: 72rem;

  /* === DROPDOWN/MODAL WIDTHS === */
  --width-dropdown-sm: 22rem;
  --width-dropdown: 24rem;
  --width-dropdown-lg: 35rem;
  --width-modal-sm: 25rem;
  --width-modal: 35rem;
  --width-modal-lg: 56.25rem;

  /* === SHADOWS (FLAT by default) === */
  --shadow-2xs: none;
  --shadow-xs: none;
  --shadow-sm: none;
  --shadow-md: none;
  --shadow-lg: none;
  --shadow-xl: none;
  --shadow-2xl: none;
  --shadow-dropdown: 0 2px 4px 0 oklch(0 0 0 / 8%);
  --shadow-modal: 0 4px 8px 0 oklch(0 0 0 / 10%);

  /* === COLORS: Brand === */
  --color-brand: oklch(0.48 0.22 260);
  --color-brand-light: oklch(0.58 0.18 260);
  --color-brand-dark: oklch(0.40 0.24 260);
  --color-brand-muted: oklch(0.96 0.04 260);

  /* === COLORS: Semantic Status === */
  --color-success: oklch(0.60 0.18 145);
  --color-warning: oklch(0.75 0.16 85);
  --color-error: oklch(0.55 0.25 27);
  --color-info: oklch(0.55 0.18 250);

  /* === COLORS: Marketplace === */
  --color-canvas: oklch(0.985 0 0);
  --color-surface: oklch(1 0 0);
  --color-border-subtle: oklch(0.88 0 0);
  --color-overlay-dark: oklch(0 0 0 / 50%);
  --color-overlay-light: oklch(1 0 0 / 80%);

  /* === COLORS: Prices === */
  --color-price: oklch(0.15 0.01 250);
  --color-price-regular: oklch(0.15 0.01 250);
  --color-price-sale: oklch(0.50 0.22 27);
  --color-price-original: oklch(0.55 0.01 250);
  --color-price-savings: oklch(0.50 0.18 145);

  /* === COLORS: Deals/Urgency === */
  --color-deal: oklch(0.55 0.25 27);
  --color-deal-light: oklch(0.96 0.03 27);
  --color-stock-available: oklch(0.60 0.18 145);
  --color-stock-low: oklch(0.70 0.18 65);
  --color-stock-out: oklch(0.50 0.20 27);

  /* === COLORS: Ratings === */
  --color-rating: oklch(0.78 0.18 90);
  --color-rating-empty: oklch(0.88 0.03 90);

  /* === COLORS: Shipping === */
  --color-shipping-free: oklch(0.50 0.18 250);
  --color-shipping-express: oklch(0.60 0.20 145);

  /* === COLORS: Trust === */
  --color-verified: oklch(0.55 0.18 250);
  --color-top-rated: oklch(0.75 0.18 65);

  /* === COLORS: Social === */
  --color-social-instagram: oklch(0.60 0.22 350);
  --color-social-tiktok: oklch(0.15 0 0);
  --color-social-youtube: oklch(0.55 0.25 27);
  --color-social-twitter: oklch(0.15 0 0);

  /* === COLORS: Order Status === */
  --color-order-pending: var(--color-warning);
  --color-order-received: var(--color-info);
  --color-order-processing: oklch(0.55 0.18 275);
  --color-order-shipped: oklch(0.55 0.18 310);
  --color-order-delivered: var(--color-success);
  --color-order-cancelled: var(--color-error);

  /* === COLORS: shadcn/ui Base (Light) === */
  --color-background: var(--color-canvas);
  --color-foreground: oklch(0.12 0 0);
  --color-card: var(--color-surface);
  --color-card-foreground: oklch(0.12 0 0);
  --color-popover: oklch(1 0 0);
  --color-popover-foreground: oklch(0.12 0 0);
  --color-primary: var(--color-brand);
  --color-primary-foreground: oklch(1 0 0);
  --color-secondary: oklch(0.96 0 0);
  --color-secondary-foreground: oklch(0.30 0 0);
  --color-muted: oklch(0.96 0 0);
  --color-muted-foreground: oklch(0.45 0 0);
  --color-accent: oklch(0.96 0 0);
  --color-accent-foreground: oklch(0.20 0 0);
  --color-destructive: oklch(0.55 0.25 27);
  --color-destructive-foreground: oklch(1 0 0);
  --color-border: var(--color-border-subtle);
  --color-input: oklch(0.97 0 0);
  --color-ring: var(--color-brand);

  /* === COLORS: Charts === */
  --color-chart-1: oklch(0.72 0.06 250);
  --color-chart-2: oklch(0.79 0.09 36);
  --color-chart-3: oklch(0.58 0.08 254);
  --color-chart-4: oklch(0.50 0.08 259);
  --color-chart-5: oklch(0.42 0.10 264);

  /* === COLORS: Sidebar === */
  --color-sidebar: oklch(0.97 0 0);
  --color-sidebar-foreground: oklch(0.20 0 0);
  --color-sidebar-primary: var(--color-brand);
  --color-sidebar-primary-foreground: oklch(1 0 0);
  --color-sidebar-accent: oklch(0.95 0 0);
  --color-sidebar-accent-foreground: oklch(0.30 0 0);
  --color-sidebar-border: oklch(0.88 0 0);
  --color-sidebar-ring: var(--color-brand);

  /* === COLORS: Header === */
  --color-header-bg: oklch(1 0 0);
  --color-header-border: oklch(0.92 0 0);
  --color-header-text: oklch(0.15 0 0);
  --color-header-text-muted: oklch(0.45 0 0);
  --color-header-hover: oklch(0.96 0 0);
  --color-header-active: oklch(0.94 0 0);
  --color-header-nav-bg: oklch(0.97 0 0);

  /* === COLORS: Subheader === */
  --color-subheader-text: oklch(0.20 0 0);
  --color-subheader-bg: oklch(1 0 0);
  --color-subheader-hover: oklch(0.96 0 0);

  /* === COLORS: Footer === */
  --color-footer-bg: oklch(0.15 0 0);
  --color-footer-text: oklch(0.85 0 0);
  --color-footer-link: oklch(0.70 0.06 260);
  --color-footer-border: oklch(0.25 0 0);

  /* === COLORS: Links === */
  --color-link: oklch(0.48 0.20 260);
  --color-link-hover: oklch(0.40 0.22 260);

  /* === COLORS: Search === */
  --color-search-bg: oklch(1 0 0);
  --color-search-border: oklch(0.92 0.01 260);
  --color-search-icon: var(--color-brand);

  /* === COLORS: CTA Buttons === */
  --color-cta-primary: var(--color-brand);
  --color-cta-primary-hover: var(--color-brand-dark);
  --color-cta-primary-text: oklch(1 0 0);
  --color-cta-secondary: var(--color-brand);
  --color-cta-secondary-hover: var(--color-brand-dark);
  --color-cta-secondary-text: oklch(1 0 0);
  --color-cta-trust-blue: oklch(0.50 0.20 255);
  --color-cta-trust-blue-hover: oklch(0.42 0.22 255);
  --color-cta-trust-blue-text: oklch(1 0 0);
  --color-cta-buy-now: var(--color-brand);
  --color-cta-add-cart: var(--color-brand);
  --color-cta-add-cart-hover: var(--color-brand-dark);

  /* === COLORS: Interactive === */
  --color-interactive: var(--color-brand);
  --color-interactive-hover: var(--color-brand-dark);

  /* === COLORS: Notifications === */
  --color-notification: oklch(0.58 0.22 27);
  --color-cart-badge: oklch(0.58 0.22 27);

  /* === COLORS: Product Card === */
  --color-product-card-bg: oklch(1 0 0);
  --color-product-card-border: oklch(0.90 0 0);
  --color-product-wishlist: oklch(0.50 0.20 350);
  --color-product-wishlist-active: oklch(0.58 0.25 350);

  /* === COLORS: Filter === */
  --color-filter-bg: oklch(1 0 0);
  --color-filter-border: oklch(0.88 0 0);
  --color-filter-active: var(--color-brand);

  /* === COLORS: Breadcrumb === */
  --color-breadcrumb-text: oklch(0.45 0 0);
  --color-breadcrumb-link: oklch(0.48 0.18 260);
  --color-breadcrumb-current: oklch(0.25 0 0);

  /* === COLORS: Sections === */
  --color-section-default: oklch(1 0 0);
  --color-section-muted: oklch(0.97 0 0);
  --color-section-deals: var(--color-deal);

  /* === COLORS: Forms === */
  --color-form-section-bg: oklch(1 0 0);
  --color-form-section-border: oklch(0.92 0 0);
  --color-form-input-bg: oklch(0.98 0 0);

  /* === COLORS: Badges === */
  --color-discount-badge-bg: var(--color-deal);
  --color-discount-badge-text: oklch(1 0 0);
  --color-badge-condition-bg: oklch(0.97 0 0);
  --color-badge-condition-text: oklch(0.20 0 0);
  --color-badge-condition-border: oklch(0.82 0 0);
  --color-badge-shipping-bg: oklch(0.96 0.015 160);
  --color-badge-shipping-text: oklch(0.30 0.08 160);
  --color-badge-shipping-border: oklch(0.88 0.02 160);
  --color-badge-stock-bg: oklch(0.96 0.03 85);
  --color-badge-stock-text: oklch(0.35 0.12 85);
  --color-badge-stock-border: oklch(0.88 0.04 85);

  /* === COLORS: Urgency Banners === */
  --color-urgency-stock-bg: oklch(0.96 0.04 85);
  --color-urgency-stock-text: oklch(0.38 0.12 85);
  --color-urgency-stock-border: oklch(0.90 0.06 85);
  --color-urgency-sale-bg: oklch(0.96 0.03 250);
  --color-urgency-sale-text: oklch(0.38 0.12 250);
  --color-urgency-sale-border: oklch(0.90 0.04 250);
  --color-urgency-viewers-bg: oklch(0.96 0.03 160);
  --color-urgency-viewers-text: oklch(0.38 0.12 160);
  --color-urgency-viewers-border: oklch(0.90 0.04 160);
  --color-urgency-hot-bg: oklch(0.96 0.04 65);
  --color-urgency-hot-text: oklch(0.38 0.12 50);
  --color-urgency-hot-border: oklch(0.90 0.05 65);

  /* === COLORS: Seller Card === */
  --color-seller-card: oklch(0.98 0.01 250);
  --color-seller-card-border: oklch(0.90 0.01 250);
  --color-seller-banner: oklch(0.50 0.20 255);
  --color-seller-banner-text: oklch(1 0 0);
  --color-seller-banner-pill-bg: oklch(1 0 0);
  --color-seller-banner-pill-text: oklch(0.40 0.18 255);

  /* === COLORS: Category Badge === */
  --color-category-badge-bg: oklch(0.97 0 0);
  --color-category-badge-text: oklch(0.25 0 0);
  --color-category-badge-border: oklch(0.88 0 0);
  --color-category-badge-icon: oklch(0.50 0.15 250);
}

/* ===== DARK MODE ===== */
.dark {
  --color-brand: oklch(0.60 0.16 250);
  --color-brand-light: oklch(0.70 0.14 250);
  --color-brand-dark: oklch(0.50 0.18 250);

  --color-success: oklch(0.65 0.16 145);
  --color-warning: oklch(0.70 0.14 85);
  --color-error: oklch(0.60 0.22 27);
  --color-info: oklch(0.60 0.16 250);

  --color-canvas: oklch(0.18 0.02 250);
  --color-surface: oklch(0.22 0.02 250);
  --color-border-subtle: oklch(0.35 0.02 250);

  --shadow-dropdown: 0 2px 4px 0 oklch(0 0 0 / 20%);
  --shadow-modal: 0 4px 12px 0 oklch(0 0 0 / 30%);

  --color-background: var(--color-canvas);
  --color-foreground: oklch(0.95 0 0);
  --color-card: var(--color-surface);
  --color-card-foreground: oklch(0.95 0 0);
  --color-popover: oklch(0.20 0.02 250);
  --color-popover-foreground: oklch(0.95 0 0);
  --color-primary: var(--color-brand);
  --color-primary-foreground: oklch(1 0 0);
  --color-secondary: oklch(0.28 0.02 250);
  --color-secondary-foreground: oklch(0.90 0 0);
  --color-muted: oklch(0.28 0.02 250);
  --color-muted-foreground: oklch(0.70 0 0);
  --color-accent: oklch(0.32 0.04 250);
  --color-accent-foreground: oklch(0.85 0.06 250);
  --color-destructive: oklch(0.55 0.22 27);
  --color-destructive-foreground: oklch(1 0 0);
  --color-border: var(--color-border-subtle);
  --color-input: oklch(0.35 0.02 250);
  --color-ring: var(--color-brand);

  --color-sidebar: oklch(0.22 0.02 250);
  --color-sidebar-foreground: oklch(0.95 0 0);
  --color-sidebar-primary: var(--color-brand);
  --color-sidebar-border: oklch(0.35 0.02 250);

  --color-header-bg: oklch(0.15 0.015 250);
  --color-header-border: oklch(0.28 0.02 250);
  --color-header-text: oklch(0.95 0 0);
  --color-header-text-muted: oklch(0.70 0 0);
  --color-header-hover: oklch(0.28 0.02 250);
  --color-header-active: oklch(0.32 0.02 250);
  --color-header-nav-bg: oklch(0.20 0.02 250);

  --color-subheader-text: oklch(0.90 0 0);
  --color-subheader-bg: oklch(0.18 0.02 250);
  --color-subheader-hover: oklch(0.25 0.02 250);

  --color-cta-trust-blue: oklch(0.55 0.18 255);
  --color-cta-trust-blue-hover: oklch(0.48 0.20 255);

  --color-footer-bg: oklch(0.15 0.015 250);
  --color-footer-border: oklch(0.28 0.02 250);

  --color-cta-primary: var(--color-brand);
  --color-cta-primary-hover: var(--color-brand-dark);
  --color-cta-secondary: oklch(0.95 0 0);
  --color-cta-secondary-hover: oklch(0.90 0 0);
  --color-cta-secondary-text: oklch(0.20 0.02 250);

  --color-filter-bg: var(--color-surface);
  --color-filter-border: var(--color-border-subtle);
  --color-filter-active: var(--color-brand);

  --color-product-card-bg: var(--color-surface);
  --color-product-card-border: var(--color-border-subtle);

  --color-form-section-bg: var(--color-surface);
  --color-form-section-border: var(--color-border-subtle);
  --color-form-input-bg: oklch(0.26 0.02 250);

  --color-order-processing: oklch(0.65 0.14 275);
  --color-order-shipped: oklch(0.65 0.14 310);

  --color-urgency-stock-bg: oklch(0.25 0.04 85);
  --color-urgency-stock-text: oklch(0.85 0.08 85);
  --color-urgency-stock-border: oklch(0.35 0.05 85);
  --color-urgency-sale-bg: oklch(0.25 0.03 250);
  --color-urgency-sale-text: oklch(0.85 0.08 250);
  --color-urgency-sale-border: oklch(0.35 0.04 250);
  --color-urgency-viewers-bg: oklch(0.25 0.03 160);
  --color-urgency-viewers-text: oklch(0.85 0.08 160);
  --color-urgency-viewers-border: oklch(0.35 0.04 160);
  --color-urgency-hot-bg: oklch(0.25 0.04 65);
  --color-urgency-hot-text: oklch(0.85 0.08 50);
  --color-urgency-hot-border: oklch(0.35 0.05 65);

  --color-badge-condition-bg: oklch(0.25 0 0);
  --color-badge-condition-text: oklch(0.92 0 0);
  --color-badge-condition-border: oklch(0.38 0 0);
  --color-badge-shipping-bg: oklch(0.22 0.02 160);
  --color-badge-shipping-text: oklch(0.80 0.06 160);
  --color-badge-shipping-border: oklch(0.35 0.02 160);
  --color-badge-stock-bg: oklch(0.25 0.03 85);
  --color-badge-stock-text: oklch(0.85 0.08 85);
  --color-badge-stock-border: oklch(0.38 0.04 85);

  --color-seller-card: oklch(0.22 0.01 250);
  --color-seller-card-border: oklch(0.35 0.01 250);
  --color-seller-banner: oklch(0.45 0.16 255);
  --color-seller-banner-pill-bg: oklch(0.20 0 0);
  --color-seller-banner-pill-text: oklch(0.85 0.10 250);

  --color-category-badge-bg: oklch(0.25 0 0);
  --color-category-badge-text: oklch(0.92 0 0);
  --color-category-badge-border: oklch(0.35 0 0);
  --color-category-badge-icon: oklch(0.70 0.12 250);
}

/* ===== BASE LAYER ===== */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  ::selection {
    background: var(--color-foreground);
    color: var(--color-background);
  }

  :where(a, button, input, select, textarea, summary, [role="button"], [role="link"], [tabindex]:not([tabindex="-1"])):focus-visible {
    outline: 2px solid var(--color-ring) !important;
    outline-offset: 2px !important;
  }

  html {
    overflow-x: clip;
    -webkit-text-size-adjust: 100%;
    font-feature-settings: "cv11", "ss01", "ss03", "cv05", "cv08", "cv09", "cv10";
  }

  body {
    @apply bg-background text-foreground antialiased;
    overflow-x: clip;
    width: 100%;
    max-width: 100vw;
    font-family: var(--font-sans);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-optical-sizing: auto;
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  a,
  button,
  input,
  select,
  textarea,
  [role="button"] {
    touch-action: manipulation;
  }
}