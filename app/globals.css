/* ============================================================
   TREIDO DESIGN SYSTEM - Tailwind v4 + shadcn/ui
   
   Theme: Professional E-commerce (Pure Neutral + Twitter Blue CTAs)
   Base: True neutral grays (0 chroma)
   Primary: Twitter Blue for CTAs only
   ============================================================ */

@import "tailwindcss";
@import "tw-animate-css";
@import "./utilities.css";
@import "./shadcn-components.css";
@import "./legacy-vars.css";

/* Tailwind v4: class-based dark mode applies to `.dark` root and descendants. */
@custom-variant dark (&:where(.dark, .dark *));

/* ===== iOS ZOOM PREVENTION ===== */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  input[type="text"],
  input[type="search"],
  input[type="email"],
  input[type="tel"],
  input[type="url"],
  input[type="password"],
  input[type="number"],
  input:not([type]),
  textarea,
  select {
    font-size: 16px !important;
  }
}

/* Normalize Chrome/Safari autofill paint to token rails (prevents blue/yellow field fills). */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-text-fill-color: oklch(var(--foreground));
  caret-color: oklch(var(--foreground));
  box-shadow: inset 0 0 0 1000px oklch(var(--background));
  -webkit-box-shadow: inset 0 0 0 1000px oklch(var(--background));
  transition: background-color 9999s ease-out 0s;
}

/* ===== Third-party Overrides ===== */
.pswp--treido .pswp__bg {
  background: var(--color-background) !important;
}

/* ===== UI THEME (OKLCH TOKENS) ===== */
/* Rules: token-based colors only, one accent (primary blue), minimal shadows. */
:root {
  /* Use raw OKLCH components; Tailwind mapping wraps with `oklch(var(--...))`. */
  --background: 1 0 0;              /* white */
  --foreground: 0.18 0.02 255;      /* near-black */
  --card: 1 0 0;
  --card-foreground: 0.18 0.02 255;
  --popover: 1 0 0;
  --popover-foreground: 0.18 0.02 255;

  /* Brand blue (primary) */
  --primary: 0.62 0.20 255;
  --primary-foreground: 1 0 0;

  /* Secondary surfaces */
  --secondary: 0.96 0.01 255;
  --secondary-foreground: 0.22 0.02 255;

  --muted: 0.97 0.005 255;
  --muted-foreground: 0.52 0.02 255;

  --accent: 0.96 0.01 255;
  --accent-foreground: 0.22 0.02 255;

  /* Destructive (discount/error) */
  --destructive: 0.62 0.22 30;
  --destructive-foreground: 1 0 0;

  --border: 0.92 0.01 255;
  --border-subtle: 0.96 0.005 255;
  --input: 0.92 0.01 255;
  --ring: 0.62 0.20 255;
  --ring-subtle: var(--border-subtle);
  --category-ring: 0.18 0.02 255;

  /* Layout */
  /* Updated at runtime by AppHeader (measured px) to keep fixed mobile header from overlapping content. */
  --app-header-offset: calc(var(--header-h-mobile, 3.5rem) + env(safe-area-inset-top));

  /* Interactive states (avoid opacity hacks in class names) */
  --hover: 0.985 0.005 255;
  --active: 0.96 0.01 255;
  --selected: 0.96 0.01 255;
  --selected-foreground: 0.18 0.02 255;
  --selected-border: 0.62 0.20 255;
  --hover-border: 0.92 0.01 255;
  --nav-active: var(--foreground);
  --nav-inactive: 0.38 0.02 255;

  /* Brand/CTA accents (raw components; mapped to `--color-*` tokens in @theme) */
  --cta-primary-hover: 0.55 0.19 243;
  --cta-secondary-hover: 0.94 0 0;
  --brand-dark: 0.50 0.19 243;
  --brand-light: 0.80 0.10 243;

  /* High-priority merchandising/trust tones */
  --promoted: 0.20 0.01 255;
  --promoted-foreground: 0.98 0 0;
  --promoted-muted: 0.94 0.01 255;
  --verified-business: 0.54 0.16 255;
  --verified-business-foreground: 0.98 0 0;
  --verified-personal: 0.36 0.10 255;
  --verified-personal-foreground: 0.98 0 0;
  --top-rated: 0.78 0.15 86;
  --top-rated-foreground: 0.22 0.05 86;

  /* Category tone families (strong browsing cues) */
  --category-tech-bg: 0.92 0.07 255;
  --category-tech-fg: 0.36 0.11 255;
  --category-tech-ring: 0.56 0.17 255;
  --category-fashion-bg: 0.92 0.10 350;
  --category-fashion-fg: 0.40 0.14 350;
  --category-fashion-ring: 0.56 0.20 350;
  --category-home-bg: 0.92 0.08 145;
  --category-home-fg: 0.38 0.11 145;
  --category-home-ring: 0.56 0.15 145;
  --category-sports-bg: 0.91 0.09 200;
  --category-sports-fg: 0.36 0.12 200;
  --category-sports-ring: 0.53 0.16 200;
  --category-gaming-bg: 0.90 0.12 285;
  --category-gaming-fg: 0.36 0.13 285;
  --category-gaming-ring: 0.52 0.17 285;
  --category-beauty-bg: 0.92 0.09 35;
  --category-beauty-fg: 0.40 0.11 35;
  --category-beauty-ring: 0.55 0.15 35;
  --category-family-bg: 0.93 0.08 95;
  --category-family-fg: 0.42 0.11 95;
  --category-family-ring: 0.58 0.15 95;
  --category-media-bg: 0.92 0.09 315;
  --category-media-fg: 0.38 0.12 315;
  --category-media-ring: 0.54 0.16 315;
  --category-business-bg: 0.92 0.05 255;
  --category-business-fg: 0.30 0.07 255;
  --category-business-ring: 0.46 0.11 255;
  --category-lifestyle-bg: 0.93 0.08 65;
  --category-lifestyle-fg: 0.42 0.10 65;
  --category-lifestyle-ring: 0.58 0.14 65;
  --category-auto-bg: 0.91 0.10 40;
  --category-auto-fg: 0.40 0.12 40;
  --category-auto-ring: 0.55 0.17 40;

  /* Social / activity */
  --social-instagram: 0.60 0.22 350;
  --social-tiktok: 0.15 0 0;
  --social-youtube: 0.55 0.25 27;
  --social-twitter: 0.15 0 0;
  --live-dot: 0.60 0.20 145;

  /* Shadows */
  --shadow-ink-subtle: 0 0 0 / 10%;
  --shadow-ink-strong: 0 0 0 / 15%;

  /* Legacy semantic aliases (keep visuals within blue/red system) */
  --success: var(--primary);
  --success-foreground: var(--primary-foreground);
  --warning: var(--primary);
  --warning-foreground: var(--primary-foreground);
  --info: var(--primary);
  --info-foreground: var(--primary-foreground);
  --error: var(--destructive);
  --error-foreground: var(--destructive-foreground);

  --primary-subtle: 0.97 0.02 255;
  --destructive-subtle: 0.96 0.02 30;

  /* Sidebar */
  --sidebar: var(--background);
  --sidebar-foreground: var(--foreground);
  --sidebar-muted: var(--muted);
  --sidebar-muted-foreground: var(--muted-foreground);
  --sidebar-primary: var(--primary);
  --sidebar-primary-foreground: var(--primary-foreground);
  --sidebar-accent: var(--accent);
  --sidebar-accent-foreground: var(--accent-foreground);
  --sidebar-border: var(--border);
  --sidebar-ring: var(--ring);

  /* Charts: keep within blue/neutral range */
  --chart-1: var(--primary);
  --chart-2: 0.72 0.06 255;
  --chart-3: 0.62 0.03 255;
  --chart-4: 0.52 0.02 255;
  --chart-5: 0.42 0.01 255;

  /* Overlays (drawer/sheet/dialog backdrops) */
  --overlay-dark: 0 0 0 / 50%;
  --overlay-light: 1 0 0 / 80%;

  /* Glass surface (frosted panels / floating chrome) */
  /* Mobile contract: use this token instead of background alpha utility hacks. */
  --surface-glass: 1 0 0 / 0.88;

  /* App surfaces */
  --surface-page: var(--background);
  --surface-subtle: var(--muted);
  --surface-card: var(--card);
  --surface-elevated: var(--background);
  --surface-gallery: 0.10 0 0;
  --surface-overlay: 0 0 0 / 60%;
  --surface-floating: var(--background);
  --home-promoted-surface: var(--surface-subtle);
  --home-promoted-border: var(--border-subtle);
  --home-promoted-text: var(--foreground);
  --home-section-title: var(--foreground);
  --home-section-action: var(--muted-foreground);

  /* Overlay/Gallery Text */
  --overlay-text: 1 0 0;
  --overlay-text-muted: 0.85 0 0;
  --gallery-ring: 1 0 0;
  --gallery-ring-offset: 0.10 0 0;

  /* Text aliases (used in a few legacy components) */
  --text-strong: var(--foreground);
  --text-default: var(--foreground);
  --text-muted-alt: var(--muted-foreground);
  --text-subtle: var(--muted-foreground);

  /* Focus/checked helpers */
  --focus-ring: 0.62 0.20 255 / 30%;
  --checked: var(--primary);
  --checked-foreground: var(--primary-foreground);
  --switch-unchecked-bg: var(--input);
  --success-subtle: var(--primary-subtle);

  /* Consistent radii */
  --radius: 0.5rem; /* iOS-like baseline */
}

/* ===== DARK MODE (Optional) ===== */
.dark {
  --background: 0.14 0.02 255;
  --foreground: 0.98 0 0;
  --card: 0.16 0.02 255;
  --card-foreground: 0.98 0 0;
  --popover: 0.16 0.02 255;
  --popover-foreground: 0.98 0 0;

  --muted: 0.20 0.02 255;
  --muted-foreground: 0.72 0.02 255;

  --border: 0.26 0.02 255;
  --border-subtle: 0.22 0.02 255;
  --input: 0.26 0.02 255;
  --ring: 0.72 0.18 255;
  --ring-subtle: var(--border-subtle);

  --primary: 0.72 0.18 255;
  --primary-foreground: 0.12 0.02 255;

  --secondary: 0.22 0.02 255;
  --secondary-foreground: 0.98 0 0;

  --destructive: 0.68 0.22 30;
  --destructive-foreground: 0.98 0 0;

  --accent: 0.22 0.02 255;
  --accent-foreground: 0.98 0 0;

  --category-ring: 0.98 0 0;

  --hover: 0.18 0.02 255;
  --active: 0.22 0.02 255;
  --selected: 0.22 0.02 255;
  --selected-foreground: 0.98 0 0;
  --selected-border: 0.72 0.18 255;
  --hover-border: 0.26 0.02 255;
  --nav-active: var(--foreground);
  --nav-inactive: 0.82 0.01 255;

  /* Brand/CTA accents */
  --cta-primary-hover: 0.66 0.18 255;
  --cta-secondary-hover: 0.26 0.02 255;
  --brand-dark: 0.66 0.18 255;
  --brand-light: 0.80 0.10 255;

  /* Social / activity */
  --social-instagram: 0.60 0.22 350;
  --social-tiktok: 1 0 0;
  --social-youtube: 0.55 0.25 27;
  --social-twitter: 1 0 0;
  --live-dot: 0.60 0.20 145;

  /* Shadows */
  --shadow-ink-subtle: 0 0 0 / 40%;
  --shadow-ink-strong: 0 0 0 / 55%;

  --success: var(--primary);
  --success-foreground: var(--primary-foreground);
  --warning: var(--primary);
  --warning-foreground: var(--primary-foreground);
  --info: var(--primary);
  --info-foreground: var(--primary-foreground);
  --error: var(--destructive);
  --error-foreground: var(--destructive-foreground);

  --primary-subtle: 0.25 0.04 255;
  --destructive-subtle: 0.28 0.04 30;
  --success-subtle: var(--primary-subtle);

  /* Text aliases (used in a few legacy components) */
  --text-strong: var(--foreground);
  --text-default: var(--foreground);
  --text-muted-alt: var(--muted-foreground);
  --text-subtle: var(--muted-foreground);

  /* Focus/checked helpers */
  --focus-ring: 0.72 0.18 255 / 40%;
  --checked: var(--primary);
  --checked-foreground: var(--primary-foreground);
  --switch-unchecked-bg: var(--input);

  --overlay-dark: 0 0 0 / 70%;
  --overlay-light: 0.14 0.02 255 / 80%;
  --surface-glass: 0.14 0.02 255 / 0.88;

  --surface-page: var(--background);
  --surface-subtle: var(--muted);
  --surface-card: var(--card);
  --surface-elevated: var(--card);
  --surface-gallery: 0.08 0 0;
  --surface-overlay: 0 0 0 / 70%;
  --surface-floating: var(--card);
  --home-promoted-surface: var(--surface-subtle);
  --home-promoted-border: var(--border-subtle);
  --home-promoted-text: var(--foreground);
  --home-section-title: var(--foreground);
  --home-section-action: var(--muted-foreground);

  --overlay-text: 1 0 0;
  --overlay-text-muted: 0.85 0 0;
  --gallery-ring: 1 0 0;
  --gallery-ring-offset: 0.08 0 0;

  --radius: 0.5rem;

  /* Charts: keep within blue/neutral range */
  --chart-1: var(--primary);
  --chart-2: 0.80 0.06 255;
  --chart-3: 0.70 0.03 255;
  --chart-4: 0.60 0.02 255;
  --chart-5: 0.50 0.01 255;

  /* Overlays/surfaces/text/shadows are defined earlier in this block. */
}

/* ===== TAILWIND V4 THEME BRIDGE ===== */
@theme inline {
  /* Map CSS vars to Tailwind */
  --color-background: oklch(var(--background));
  --color-foreground: oklch(var(--foreground));
  --color-card: oklch(var(--card));
  --color-card-foreground: oklch(var(--card-foreground));
  --color-popover: oklch(var(--popover));
  --color-popover-foreground: oklch(var(--popover-foreground));
  --color-primary: oklch(var(--primary));
  --color-primary-foreground: oklch(var(--primary-foreground));
  --color-secondary: oklch(var(--secondary));
  --color-secondary-foreground: oklch(var(--secondary-foreground));
  --color-muted: oklch(var(--muted));
  --color-muted-foreground: oklch(var(--muted-foreground));
  --color-accent: oklch(var(--accent));
  --color-accent-foreground: oklch(var(--accent-foreground));
  --color-destructive: oklch(var(--destructive));
  --color-destructive-foreground: oklch(var(--destructive-foreground));
  --color-success: oklch(var(--success));
  --color-success-foreground: oklch(var(--success-foreground));
  --color-success-subtle: oklch(var(--success-subtle));
  --color-destructive-subtle: oklch(var(--destructive-subtle));
  --color-primary-subtle: oklch(var(--primary-subtle));
  --color-warning: oklch(var(--warning));
  --color-warning-foreground: oklch(var(--warning-foreground));
  --color-error: oklch(var(--error));
  --color-error-foreground: oklch(var(--error-foreground));
  --color-info: oklch(var(--info));
  --color-info-foreground: oklch(var(--info-foreground));
  --color-border: oklch(var(--border));
  --color-border-subtle: oklch(var(--border-subtle));
  --color-input: oklch(var(--input));
  --color-ring: oklch(var(--ring));
  --color-ring-subtle: oklch(var(--ring-subtle));
  --color-category-ring: oklch(var(--category-ring));
  --color-promoted: oklch(var(--promoted));
  --color-promoted-foreground: oklch(var(--promoted-foreground));
  --color-promoted-muted: oklch(var(--promoted-muted));
  --color-verified-business: oklch(var(--verified-business));
  --color-verified-business-foreground: oklch(var(--verified-business-foreground));
  --color-verified-personal: oklch(var(--verified-personal));
  --color-verified-personal-foreground: oklch(var(--verified-personal-foreground));
  --color-top-rated: oklch(var(--top-rated));
  --color-top-rated-foreground: oklch(var(--top-rated-foreground));
  --color-category-tech-bg: oklch(var(--category-tech-bg));
  --color-category-tech-fg: oklch(var(--category-tech-fg));
  --color-category-tech-ring: oklch(var(--category-tech-ring));
  --color-category-fashion-bg: oklch(var(--category-fashion-bg));
  --color-category-fashion-fg: oklch(var(--category-fashion-fg));
  --color-category-fashion-ring: oklch(var(--category-fashion-ring));
  --color-category-home-bg: oklch(var(--category-home-bg));
  --color-category-home-fg: oklch(var(--category-home-fg));
  --color-category-home-ring: oklch(var(--category-home-ring));
  --color-category-sports-bg: oklch(var(--category-sports-bg));
  --color-category-sports-fg: oklch(var(--category-sports-fg));
  --color-category-sports-ring: oklch(var(--category-sports-ring));
  --color-category-gaming-bg: oklch(var(--category-gaming-bg));
  --color-category-gaming-fg: oklch(var(--category-gaming-fg));
  --color-category-gaming-ring: oklch(var(--category-gaming-ring));
  --color-category-beauty-bg: oklch(var(--category-beauty-bg));
  --color-category-beauty-fg: oklch(var(--category-beauty-fg));
  --color-category-beauty-ring: oklch(var(--category-beauty-ring));
  --color-category-family-bg: oklch(var(--category-family-bg));
  --color-category-family-fg: oklch(var(--category-family-fg));
  --color-category-family-ring: oklch(var(--category-family-ring));
  --color-category-media-bg: oklch(var(--category-media-bg));
  --color-category-media-fg: oklch(var(--category-media-fg));
  --color-category-media-ring: oklch(var(--category-media-ring));
  --color-category-business-bg: oklch(var(--category-business-bg));
  --color-category-business-fg: oklch(var(--category-business-fg));
  --color-category-business-ring: oklch(var(--category-business-ring));
  --color-category-lifestyle-bg: oklch(var(--category-lifestyle-bg));
  --color-category-lifestyle-fg: oklch(var(--category-lifestyle-fg));
  --color-category-lifestyle-ring: oklch(var(--category-lifestyle-ring));
  --color-category-auto-bg: oklch(var(--category-auto-bg));
  --color-category-auto-fg: oklch(var(--category-auto-fg));
  --color-category-auto-ring: oklch(var(--category-auto-ring));
  
  /* Interactive state colors (semantic - use these instead of primary/10) */
  --color-selected: oklch(var(--selected));
  --color-selected-foreground: oklch(var(--selected-foreground));
  --color-selected-border: oklch(var(--selected-border));
  --color-hover: oklch(var(--hover));
  --color-hover-border: oklch(var(--hover-border));
  --color-active: oklch(var(--active));
  --color-nav-active: oklch(var(--nav-active));
  --color-nav-inactive: oklch(var(--nav-inactive));
  --color-focus-ring: oklch(var(--focus-ring));
  --color-checked: oklch(var(--checked));
  --color-checked-foreground: oklch(var(--checked-foreground));
  
  --color-chart-1: oklch(var(--chart-1));
  --color-chart-2: oklch(var(--chart-2));
  --color-chart-3: oklch(var(--chart-3));
  --color-chart-4: oklch(var(--chart-4));
  --color-chart-5: oklch(var(--chart-5));
  --color-sidebar: oklch(var(--sidebar));
  --color-sidebar-foreground: oklch(var(--sidebar-foreground));
  --color-sidebar-muted: oklch(var(--sidebar-muted));
  --color-sidebar-muted-foreground: oklch(var(--sidebar-muted-foreground));
  --color-sidebar-primary: oklch(var(--sidebar-primary));
  --color-sidebar-primary-foreground: oklch(var(--sidebar-primary-foreground));
  --color-sidebar-accent: oklch(var(--sidebar-accent));
  --color-sidebar-accent-foreground: oklch(var(--sidebar-accent-foreground));
  --color-sidebar-border: oklch(var(--sidebar-border));
  --color-sidebar-ring: oklch(var(--sidebar-ring));

  /* Overlay colors (backdrop for drawers/sheets/dialogs) */
  --color-overlay-dark: oklch(var(--overlay-dark));
  --color-overlay-light: oklch(var(--overlay-light));

  /* Mobile Product Page Surfaces */
  --color-surface-page: oklch(var(--surface-page));
  --color-surface-subtle: oklch(var(--surface-subtle));
  --color-surface-card: oklch(var(--surface-card));
  --color-surface-elevated: oklch(var(--surface-elevated));
  --color-surface-gallery: oklch(var(--surface-gallery));
  --color-surface-overlay: oklch(var(--surface-overlay));
  --color-surface-floating: oklch(var(--surface-floating));
  --color-surface-glass: oklch(var(--surface-glass));
  --color-home-promoted: oklch(var(--home-promoted-surface));
  --color-home-promoted-border: oklch(var(--home-promoted-border));
  --color-home-promoted-text: oklch(var(--home-promoted-text));
  --color-home-section-title: oklch(var(--home-section-title));
  --color-home-section-action: oklch(var(--home-section-action));

  /* Mobile Product Page Text */
  --color-text-strong: oklch(var(--text-strong));
  --color-text-default: oklch(var(--text-default));
  --color-text-muted-alt: oklch(var(--text-muted-alt));
  --color-text-subtle: oklch(var(--text-subtle));

  /* Overlay/Gallery Text (for dark backgrounds) */
  --color-overlay-text: oklch(var(--overlay-text));
  --color-overlay-text-muted: oklch(var(--overlay-text-muted));
  --color-gallery-ring: oklch(var(--gallery-ring));
  --color-gallery-ring-offset: oklch(var(--gallery-ring-offset));

  /* Tight radius scale for marketplace */
  --radius-sm: calc(var(--radius) - 2px);
  --radius-md: var(--radius);
  --radius-lg: calc(var(--radius) + 2px);

  /* Card-specific: tighter radius for professional e-commerce feel */
  --radius-card: var(--radius-md);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 6px);
  --radius-3xl: calc(var(--radius) + 8px);
  --radius-4xl: calc(var(--radius) + 12px);

  /* Tailwind shadow-color hook (disabled: cards/lists are border-only) */
}

/* ===== MARKETPLACE-SPECIFIC TOKENS ===== */
@theme {
  /* === FONTS === */
  --font-sans: "Inter", var(--font-inter), ui-sans-serif, system-ui, -apple-system,
    "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  --font-serif: "Source Serif 4", serif;
  --font-mono: "JetBrains Mono", monospace;

  /* === FONT SIZE: Marketplace scales === */
  --text-2xs: 0.625rem;
  --text-2xs--line-height: 0.875rem;
  --text-tiny: 0.6875rem;
  --text-tiny--line-height: 1rem;
  --text-compact: 0.8125rem;
  --text-compact--line-height: 1.125rem;
  --text-body: 0.875rem;
  --text-body--line-height: 1.25rem;
  --text-reading: 0.9375rem;
  --text-reading--line-height: 1.375rem;
  --text-price: 1rem;
  --text-price--line-height: 1.25rem;

  /* === RICH TEXT HEADINGS (CMS) === */
  --text-heading-1: 1.125rem;
  --text-heading-1--line-height: 1.5rem;
  --text-heading-2: 1.0625rem;
  --text-heading-2--line-height: 1.5rem;
  --text-heading-3: 1rem;
  --text-heading-3--line-height: 1.5rem;

  /* === LETTER SPACING === */
  --letter-spacing-tight: -0.01em;
  --letter-spacing-normal: 0;
  --letter-spacing-wide: 0.01em;
  --letter-spacing-wider: 0.02em;

  /* === LAYOUT HEIGHTS === */
  --spacing-header: 3rem;
  --spacing-bottom-nav: 3rem;
  --spacing-button: 2.75rem;
  --spacing-button-sm: 2.25rem;
  --spacing-button-lg: 3rem;
  --spacing-input: 2.75rem;
  --spacing-search: 2.75rem;

  /* === LAYOUT GRID SYSTEM (Desktop Shell) === */
  --layout-sidebar-w: 17.5rem;
  --layout-sidebar-w-collapsed: 4rem;
  --layout-content-max-w: 87.5rem;
  --layout-gap: 1.5rem;
  --layout-gap-sm: 1rem;
  --product-card-min-w: 12.5rem;
  --product-grid-gap: 0.625rem;

  /* === TOUCH TARGETS (mobile contract) === */
  --control-compact: 2.25rem;    /* 36px - dense icon overlays only */
  --control-default: 2.75rem;    /* 44px - default tap target */
  --control-primary: 3rem;       /* 48px - primary CTA / bars */

  /* Legacy aliases (kept for staged migration) */
  --spacing-touch-xs: 2rem;                /* 32px - non-primary compact surfaces */
  --spacing-touch-sm: var(--control-compact);
  --spacing-touch: var(--control-default);
  --spacing-touch-md: var(--control-default);
  --spacing-touch-lg: var(--control-primary);

  /* === PAGE INSETS (responsive edge padding) === */
  --spacing-inset: 0.5rem;       /* 8px - mobile */
  --spacing-inset-md: 0.75rem;   /* 12px - tablet */
  --spacing-inset-lg: 1rem;      /* 16px - desktop */

  /* === DIALOG/DRAWER SIZING === */
  --height-dialog: 90dvh;
  --height-dialog-sm: 75dvh;
  --height-dialog-lg: 95dvh;
  --width-dialog: calc(100% - 2rem);
  --width-sheet-mobile: 85vw;

  /* === ONBOARDING MODAL SIZING === */
  /* Mobile: Full width minus safe margins */
  --onboarding-modal-w: min(calc(100vw - 2rem), 28rem);
  /* Mobile: Use dynamic viewport height, leave room for keyboard */
  --onboarding-modal-max-h: calc(100dvh - 3rem);
  /* Desktop: More controlled height */
  --onboarding-modal-max-h-sm: min(85dvh, 40rem);

  /* === ICON SIZES (balanced against 36/44/48 controls) === */
  --size-icon-xs: 1.25rem;       /* 20px - small inline */
  --size-icon-sm: 1.25rem;       /* 20px - compact controls */
  --size-icon: 1.375rem;         /* 22px - default nav/action */
  --size-icon-header: 1.5rem;    /* 24px - header chrome */
  --size-icon-lg: 1.75rem;       /* 28px - large/bold */

  /* === CATEGORY NAVIGATION === */
  --spacing-category-circle: 3.5rem; /* 56px - tighter mobile circles */
  --spacing-category-circle-desktop: 3.75rem; /* 60px on desktop */
  --spacing-category-item: 3.5rem; /* 56px - compact item width */
  --spacing-category-item-mobile: 3.5rem; /* 56px - mobile subcategory buttons */
  --spacing-category-item-lg: 3.5rem; /* 56px - compact grid/circle width */
  --spacing-category-item-nav: 4.75rem; /* 76px - better label legibility on home */
  --spacing-category-item-desktop: 5rem; /* 80px on desktop */
  --spacing-nav-row: 3rem;

  /* === MEDIA ASPECT CONTRACT === */
  --ratio-product-card-mobile: 4 / 5;
  --ratio-product-strip: 4 / 3;
  --ratio-quick-view-hero: 1 / 1;

  /* === HOMEPAGE SECTION SPACING === */
  --spacing-section-top: 0.5rem;    /* 8px - balanced top */
  --spacing-section-bottom: 0.5rem; /* 8px - consistent breathing room */
  --spacing-section-gap: 0.75rem;   /* 12px - section rhythm */
  --spacing-home-inset: 0.75rem;    /* 12px - landing content inset */
  --spacing-home-section-gap: 1rem; /* 16px - landing section rhythm */
  --spacing-home-card-gap: 0.625rem; /* 10px - tighter, denser landing rhythm */
  --spacing-home-card-column-w: calc((100vw - (var(--spacing-home-inset) * 2) - var(--spacing-home-card-gap)) / 2);
  --spacing-home-promo-card-w: var(--spacing-home-card-column-w); /* keep promoted width aligned to feed grid */
  --spacing-home-promo-rail-card-w: var(--spacing-home-card-column-w); /* legacy alias; emphasis now comes from taller media ratio */
  --spacing-home-curated-card-w: calc(var(--spacing-home-card-column-w) + 0.5rem); /* curated discovery rail cards */
  --spacing-home-strip-card-w: var(--spacing-home-card-column-w); /* legacy alias */

  /* === FILTER SIDEBAR === */
  --spacing-filter-sidebar: 15rem;
  --spacing-sidebar-max-h: calc(100vh - 6rem);

  /* === CONTAINER WIDTHS === */
  --container-3xs: 16rem;
  --container-2xs: 18rem;
  --container-xs: 20rem;
  --container-sm: 24rem;
  --container-md: 28rem;
  --container-lg: 32rem;
  --container-xl: 36rem;
  --container-header: 72rem;

  /* === DROPDOWN/MODAL WIDTHS === */
  --width-dropdown-sm: 22rem;
  --width-dropdown: 24rem;
  --width-dropdown-lg: 35rem;
  --width-modal-sm: 25rem;
  --width-modal: 35rem;
  --width-modal-lg: 56.25rem;

  /* === SHADOWS (Professional depth) === */
  --shadow-2xs: 0 1px 1px -1px oklch(var(--shadow-ink-subtle));
  --shadow-xs: 0 1px 2px -1px oklch(var(--shadow-ink-subtle));
  --shadow-sm: 0 1px 3px 0 oklch(var(--shadow-ink-subtle));
  --shadow-md: 0 8px 24px -18px oklch(var(--shadow-ink-subtle));
  --shadow-lg: 0 16px 40px -28px oklch(var(--shadow-ink-strong));
  --shadow-xl: 0 24px 60px -36px oklch(var(--shadow-ink-strong));
  --shadow-2xl: 0 40px 96px -48px oklch(var(--shadow-ink-strong));
  --shadow-dropdown: 0 4px 12px -2px oklch(var(--shadow-ink-subtle));
  --shadow-modal: 0 12px 40px -8px oklch(var(--shadow-ink-strong));
  --shadow-card: var(--shadow-sm);

  /* === TRANSITIONS === */
  --ease-snappy: cubic-bezier(0.2, 0, 0, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --duration-instant: 50ms;
  --duration-fast: 100ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;

  /* === COLORS: Semantic Status === */
  /* Defined in :root/.dark as --success/--warning/--error/--info (see @theme inline bridge). */

  /* === COLORS: Marketplace Semantic === */
  --color-verified: var(--color-verified-personal);
  --color-shipping-free: var(--color-muted-foreground);

  /* === COLORS: Category Badge === */
  --color-category-badge-bg: var(--color-category-business-bg);
  --color-category-badge-border: var(--color-category-business-ring);
  --color-category-badge-text: var(--color-category-business-fg);
  --color-category-badge-icon: var(--color-category-business-fg);

  /* === COLORS: Badge System - Professional E-commerce === */
  /* 
   * Two-tier badge system for WCAG AA compliance:
   * - SOLID badges: Dark bg + white text (high emphasis)
   * - SUBTLE badges: Tinted bg + dark text (low emphasis)
   */
  
  /* Solid Badges (white text on dark bg - 4.5:1+ contrast) */
  --color-badge-success-solid: var(--color-success);
  --color-badge-warning-solid: var(--color-warning);
  --color-badge-critical-solid: var(--color-destructive);
  --color-badge-info-solid: var(--color-info);
  --color-badge-neutral-solid: var(--color-secondary);
  --color-badge-fg-on-solid: var(--color-primary-foreground);
  
  /* Subtle Badges (dark text on tinted bg) */
  --color-badge-success-subtle-bg: var(--color-success-subtle);
  --color-badge-success-subtle-fg: var(--color-success);
  --color-badge-warning-subtle-bg: var(--color-primary-subtle);
  --color-badge-warning-subtle-fg: var(--color-warning);
  --color-badge-critical-subtle-bg: var(--color-destructive-subtle);
  --color-badge-critical-subtle-fg: var(--color-destructive);
  --color-badge-info-subtle-bg: var(--color-primary-subtle);
  --color-badge-info-subtle-fg: var(--color-info);
  --color-badge-neutral-subtle-bg: var(--color-muted);
  --color-badge-neutral-subtle-fg: var(--color-muted-foreground);
  
  /* Condition Badges - Solid dark bg + white text (eBay style) */
  --color-badge-condition-new: var(--color-foreground);
  --color-badge-condition-likenew: var(--color-foreground);
  --color-badge-condition-good: var(--color-foreground);
  --color-badge-condition-fair: var(--color-foreground);
  --color-badge-condition-used: var(--color-foreground);
  --color-badge-condition-refurb: var(--color-foreground);
  
  /* Legacy aliases for existing code */
  --color-badge-condition-bg: var(--color-secondary);
  --color-badge-condition-border: var(--color-border);
  --color-badge-condition-text: var(--color-foreground);
  --color-badge-promoted-bg: var(--color-promoted);
  --color-badge-promoted-border: var(--color-promoted);
  --color-badge-promoted-text: var(--color-promoted-foreground);
  --color-badge-sponsored-bg: var(--color-promoted);
  --color-badge-sponsored-border: var(--color-promoted);
  --color-badge-sponsored-text: var(--color-promoted-foreground);
  
  /* Promoted Section (desktop) - Light Mode */
  --surface-promoted: var(--color-promoted);
  --surface-promoted-accent: var(--color-promoted-muted);
  --border-promoted: var(--color-promoted);
  --text-promoted: var(--color-promoted-foreground);
  --text-promoted-muted: var(--color-promoted-muted);
  --color-badge-shipping-bg: var(--color-success-subtle);
  --color-badge-shipping-border: var(--color-success);
  --color-badge-shipping-text: var(--color-success);
  --color-badge-stock-bg: var(--color-primary-subtle);
  --color-badge-stock-border: var(--color-warning);
  --color-badge-stock-text: var(--color-warning);

  /* === COLORS: Prices - Professional === */
  --color-price-regular: var(--color-foreground);
  --color-price-sale: var(--color-foreground);
  --color-price-original: var(--color-muted-foreground);
  --color-price-savings: var(--color-muted-foreground);

  /* === COLORS: Deals/Urgency === */
  --color-deal: var(--color-destructive);
  --color-deal-light: var(--color-destructive-subtle);
  --color-deal-foreground: var(--color-destructive-foreground);

  /* === COLORS: Condition Badges (C2C Marketplace) - Professional === */
  --color-condition-new: var(--color-foreground);
  --color-condition-new-bg: var(--color-secondary);
  --color-condition-likenew: var(--color-foreground);
  --color-condition-likenew-bg: var(--color-secondary);
  --color-condition-good: var(--color-foreground);
  --color-condition-good-bg: var(--color-secondary);
  --color-condition-fair: var(--color-foreground);
  --color-condition-fair-bg: var(--color-secondary);
  --color-condition-used: var(--color-foreground);
  --color-condition-used-bg: var(--color-secondary);
  --color-condition-refurb: var(--color-foreground);
  --color-condition-refurb-bg: var(--color-secondary);

  /* === COLORS: Verification Tiers === */
  --color-verify-email: var(--color-verified-personal);
  --color-verify-phone: var(--color-verified-personal);
  --color-verify-id: var(--color-verified-personal);
  --color-verify-business: var(--color-verified-business);

  /* === COLORS: Freshness Indicators === */
  --color-fresh: var(--color-muted-foreground);
  --color-fresh-bg: var(--color-muted);
  --color-recent: var(--color-muted-foreground);
  --color-recent-bg: var(--color-muted);

  /* === COLORS: Social Proof === */
  --color-hot: var(--color-muted-foreground);
  --color-hot-bg: var(--color-muted);
  --color-favorite: var(--color-muted-foreground);

  /* === COLORS: Ratings - Golden yellow === */
  --color-rating: var(--color-muted-foreground);
  --color-rating-empty: var(--color-border);

  /* === COLORS: Notification badges === */
  --color-notification: var(--color-primary);
  --color-cart-badge: var(--color-primary);

  /* === COLORS: Wishlist - Warm red === */
  --color-wishlist: var(--color-muted-foreground);
  --color-wishlist-active: var(--color-primary);

  /* === COLORS: Order Status === */
  --color-order-pending: var(--color-warning);
  --color-order-processing: var(--color-primary);
  --color-order-shipped: var(--color-primary);
  --color-order-delivered: var(--color-success);
  --color-order-cancelled: var(--color-error);

  /* === COLORS: Header (Desktop) - Professional containment === */
  --color-header-bg: var(--color-surface-subtle);
  --color-header-border: var(--color-border);
  --color-header-text: var(--color-foreground);
  --color-header-text-muted: var(--color-muted-foreground);
  --color-header-hover: var(--color-hover);
  --color-header-active: var(--color-active);
  --color-header-nav-bg: var(--color-background);
  --color-subheader-hover: var(--color-accent);

  /* === COLORS: Search Bar (Twitter-style) === */
  --color-search-bg: var(--color-muted);
  --color-search-border: var(--color-border);
  --color-search-text: var(--color-foreground);
  --color-search-placeholder: var(--color-muted-foreground);
  --color-search-focus-border: var(--color-primary);
  --color-search-focus-ring: var(--color-primary);

  /* === COLORS: CTA Buttons - Professional === */
  --color-cta-primary: var(--color-primary);
  --color-cta-primary-hover: oklch(var(--cta-primary-hover));
  --color-cta-primary-text: var(--color-primary-foreground);
  --color-cta-secondary: var(--color-secondary);
  --color-cta-secondary-hover: oklch(var(--cta-secondary-hover));
  --color-cta-secondary-text: var(--color-secondary-foreground);

  /* === LEGACY ALIASES === */
  --color-brand: var(--color-primary);
  --color-brand-dark: oklch(var(--brand-dark));
  --color-brand-light: oklch(var(--brand-light));
  --color-interactive: var(--color-primary);
  --color-interactive-hover: oklch(var(--cta-primary-hover));
  --color-link: var(--color-primary);
  --color-link-hover: oklch(var(--brand-dark));

  /* === COLORS: Seller UI === */
  --color-seller-card: var(--color-card);
  --color-seller-card-border: var(--color-border);
  --color-seller-banner: var(--color-muted);
  --color-seller-banner-pill: var(--color-background);

  /* === COLORS: Urgency Banners === */
  --color-urgency-stock-bg: var(--color-muted);
  --color-urgency-stock-border: var(--color-border);
  --color-urgency-stock-text: var(--color-foreground);
  --color-urgency-stock-icon: var(--color-primary);
  --color-urgency-stock-icon-bg: var(--color-primary-subtle);

  --color-urgency-sale-bg: var(--color-muted);
  --color-urgency-sale-border: var(--color-border);
  --color-urgency-sale-text: var(--color-foreground);
  --color-urgency-sale-icon: var(--color-primary);
  --color-urgency-sale-icon-bg: var(--color-primary-subtle);

  --color-urgency-viewers-bg: var(--color-muted);
  --color-urgency-viewers-border: var(--color-border);
  --color-urgency-viewers-text: var(--color-foreground);
  --color-urgency-viewers-icon: var(--color-primary);
  --color-urgency-viewers-icon-bg: var(--color-primary-subtle);

  /* === COLORS: Mobile Product Page Surfaces & Text === */
  /* REMOVED: Hardcoded duplicates. These tokens are now correctly derived
     from CSS vars via @theme inline block (respects .dark mode) */

  /* === COLORS: Social Platforms === */
  --color-social-instagram: oklch(var(--social-instagram));
  --color-social-tiktok: oklch(var(--social-tiktok));
  --color-social-youtube: oklch(var(--social-youtube));
  --color-social-twitter: oklch(var(--social-twitter));

  /* === COLORS: Live/Activity === */
  --color-live-dot: oklch(var(--live-dot));

  /* === COLORS: Status (aliases to semantic) === */
  --color-status-success: var(--color-success);
  --color-status-warning: var(--color-warning);
  --color-status-error: var(--color-error);
  --color-status-info: var(--color-info);

  /* === COLORS: Order Received (additional status) === */
  --color-order-received: var(--color-primary);

  /* === COLORS: Admin/Kanban Status Badges === */
  --color-admin-draft: var(--color-primary);
  --color-admin-draft-bg: var(--color-primary-subtle);
  --color-admin-published: var(--color-primary);
  --color-admin-published-bg: var(--color-primary-subtle);
  --color-admin-in-progress: var(--color-primary);
  --color-admin-in-progress-bg: var(--color-primary-subtle);
  --color-admin-review: var(--color-primary);
  --color-admin-review-bg: var(--color-primary-subtle);
  --color-admin-urgent: var(--color-destructive);
  --color-admin-high: var(--color-primary);
  --color-admin-high-bg: var(--color-primary-subtle);
  --color-admin-medium: var(--color-primary);

  /* === COLORS: Promoted/Fire icon === */
  --color-fire: var(--color-primary);
}

/* ===== BASE LAYER ===== */
@layer base {
  * {
    @apply border-border outline-ring;
  }

  ::selection {
    background: var(--color-foreground);
    color: var(--color-background);
  }

  :where(a, button, input, select, textarea, summary, [role="button"], [role="link"], [tabindex]:not([tabindex="-1"])):focus-visible:not(.no-focus-ring) {
    outline: 2px solid var(--color-ring) !important;
    outline-offset: 2px !important;
  }

  html {
    overflow-x: clip;
    -webkit-text-size-adjust: 100%;
    font-feature-settings: "cv11", "ss01", "ss03", "cv05", "cv08", "cv09", "cv10";
  }

  body {
    @apply bg-background text-foreground antialiased;
    /* Permanent position: relative prevents header flash when modals toggle */
    position: relative;
    overflow-x: clip;
    width: 100%;
    max-width: 100vw;
    font-family: var(--font-sans);
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-optical-sizing: auto;
    letter-spacing: var(--tracking-normal);
  }

  button:not(:disabled),
  [role="button"]:not(:disabled) {
    cursor: pointer;
  }

  a,
  button,
  input,
  select,
  textarea,
  [role="button"] {
    touch-action: manipulation;
  }

  /* ===== HEADER ISOLATION FROM MODAL SCROLL LOCK ===== */
  /* Prevents header "flash" when react-remove-scroll modifies body styles */
  [data-slot="app-header"] {
    /* GPU layer promotion for smooth animations and isolation */
    will-change: transform;
    /* Contain layout reflows - prevents body changes from reflowing header */
    contain: layout style;
    /* New stacking context - isolates from body position changes */
    isolation: isolate;
  }

}
