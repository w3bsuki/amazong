docs\strategy\NORTH-STAR.md:36:- A canonical graph connects users, listings, intents, searches, messages, orders, shipments, disputes, and outcomes.
docs\strategy\NORTH-STAR.md:98:- Better than search/filter UX for complex purchase decisions.
messages\en.json:95:        "searchPlaceholder": "Search products, brands, and more...",
messages\en.json:96:        "searchPlaceholderShort": "Search...",
messages\en.json:97:        "clearSearch": "Clear search",
messages\en.json:117:        "search": "Search",
messages\en.json:755:        "searchPlaceholder": "Search categories",
messages\en.json:756:        "searchAriaLabel": "Search categories",
messages\en.json:757:        "searchSellersPlaceholder": "Search sellers",
messages\en.json:796:        "saveSearch": "Save search",
messages\en.json:799:        "savedDescription": "We'll show this in your saved searches",
messages\en.json:802:        "emptySearchTitle": "No search to save",
messages\en.json:803:        "emptySearchDescription": "Add a search query or select a category first"
messages\en.json:810:        "searchTitle": "Search our help library",
messages\en.json:811:        "searchPlaceholder": "Type something like, 'question about a charge'",
messages\en.json:1134:        "search": "Search",
messages\en.json:1517:            "searchPlaceholder": "Search by item or #",
messages\en.json:2075:        "search": "Search",
messages\en.json:2076:        "searchDescription": "Search products and listings",
messages\en.json:2077:        "searchFieldLabel": "Search products",
messages\en.json:2080:        "searching": "Searching...",
messages\en.json:2090:        "toSearch": "to search",
messages\en.json:2094:        "aiDescription": "Ask me anything about products. I can search, compare, and help you find what you need.",
messages\en.json:2149:        "searchResults": "Search Results",
messages\en.json:2180:        "noResultsForFilters": "We couldn't find any products matching your filters. Try adjusting your search criteria.",
messages\en.json:2193:        "customizeSearchResults": "Customize your search results",
messages\en.json:2195:        "searchAttributePlaceholder": "Search {attribute}...",
messages\en.json:2207:        "searchSellersPlaceholder": "Search sellers",
messages\en.json:2229:        "noSellersFoundDescription": "Try changing your seller filters or search terms."
messages\en.json:2833:        "searchPlaceholder": "Search sellers",
messages\en.json:2850:        "searchPlaceholder": "Search messages...",
messages\en.json:2853:        "tryDifferentSearch": "Try a different search term",
messages\en.json:2986:        "search": "Search",
messages\en.json:3039:        "searchPlaceholder": "Search {filterName}...",
messages\en.json:3055:        "feature1": "Top position in search",
messages\en.json:3122:            "searchPlaceholder": "Search categories...",
messages\en.json:3124:            "searchResults": "Search results",
messages\en.json:3125:            "clearSearch": "Clear search",
messages\en.json:3600:            "searchPlaceholder": "Search category...",
messages\en.json:3601:            "searchPlaceholderCompact": "Search...",
messages\en.json:3928:            "searchPlaceholder": "Search...",
messages\en.json:4011:            "searchPlaceholder": "Search brand...",
messages\en.json:4155:            "searchPlaceholder": "Search docs...",
messages\en.json:4473:        "search": {
messages\en.json:4474:            "title": "Couldn't load search",
messages\en.json:4522:        "searchPlaceholder": "Search {storeName}...",
messages\en.json:4595:        "searchProducts": "Search products",
messages\en.json:4605:        "searchProducts": "Search products"
messages\en.json:4738:        "chatEmpty": "Describe what you need — I'll search, compare, and find the best deals for you.",
messages\en.json:4740:        "quickStart": "Popular searches",
messages\en.json:4752:        "findSimilarDesc": "Paste an image URL (e.g. from an uploaded listing photo) and we will extract a search query and look for similar items.",
messages\en.json:4785:        "searchPlaceholder": "Search listings, brands, and sellers",
messages\en.json:4786:        "searchAria": "Search",
messages\en.json:5059:                "Set competitive prices based on market research"
docs\strategy\CAPABILITY-MAP.md:24:| Core browse/search/filter journey | MVP | 0 | product index, category hierarchy | search success rate, no-result rate |
refactor\supabase\DOMAINS.md:68:- **Touch:** Migration for write policies on: `blocked_users`, `conversations`, `messages`, `notification_preferences`, `store_followers`, `seller_feedback`, `variant_options`, `product_images`
refactor\supabase\DOMAINS.md:73:- **Touch:** Migration for 13 UPDATE policies missing `WITH CHECK`: `categories`, `conversations`, `messages`, `notifications`, `product_images`, `products`, `profiles`, `reviews`, `seller_feedback`, `subscriptions`, `user_addresses`, `user_payment_methods`, `variant_options`
refactor\supabase\CATEGORY-REDESIGN.md:14:- Makes search results sparse (products scattered across 11K leaves)
refactor\supabase\CATEGORY-REDESIGN.md:324:`id`, `seller_id`, `category_id`, `title`, `description`, `price`, `list_price`, `stock`, `slug`, `search_vector`, `created_at`, `updated_at`, `status`, `condition`, `tags`, `meta_title`, `meta_description`, `brand_id`, `listing_type`, `seller_city`, `category_ancestors`, `view_count`, `rating`, `review_count`
refactor\supabase\CATEGORY-REDESIGN.md:358:| `images` | Redundant — `product_images` table exists |
refactor\supabase\CATEGORY-REDESIGN.md:401:3. **Browse/search** — update category navigation
refactor\supabase\CATEGORY-REDESIGN.md:402:4. **Browse/search** — add faceted filtering from aspects
refactor\supabase\CATEGORY-REDESIGN.md:422:| Search quality drops | Low | Fewer, better-populated categories = better search. |
hooks\use-geo-welcome.ts:56:  const { pathname, search, hash } = window.location;
hooks\use-geo-welcome.ts:61:    return `/${targetLocale}${search}${hash}`;
hooks\use-geo-welcome.ts:70:  return `/${segments.join('/')}${search}${hash}`;
eslint.log:111:J:\amazong\app\[locale]\(main)\_components\search-controls\save-search-button.tsx
eslint.log:114:J:\amazong\app\[locale]\(main)\_components\search-controls\search-pagination.tsx
eslint.log:134:J:\amazong\app\[locale]\(main)\search\_components\desktop-filters.tsx
eslint.log:137:J:\amazong\app\[locale]\(main)\search\page.tsx
eslint-summary.txt:156:J:\amazong\app\[locale]\(main)\_components\search-controls\save-search-button.tsx
eslint-summary.txt:159:J:\amazong\app\[locale]\(main)\_components\search-controls\search-pagination.tsx
eslint-summary.txt:182:J:\amazong\app\[locale]\(main)\search\_components\desktop-filters.tsx
eslint-summary.txt:185:J:\amazong\app\[locale]\(main)\search\page.tsx
eslint-summary.txt:229:J:\amazong\app\[locale]\_components\search\mobile-search-overlay.tsx
messages\bg.json:95:        "searchPlaceholder": "Търсене в продукти, марки и още...",
messages\bg.json:96:        "searchPlaceholderShort": "Търсене...",
messages\bg.json:117:        "search": "Търсене",
messages\bg.json:755:        "searchPlaceholder": "Търси категории",
messages\bg.json:756:        "searchAriaLabel": "Търси категории",
messages\bg.json:757:        "searchSellersPlaceholder": "Търси продавачи",
messages\bg.json:810:        "searchTitle": "Търсене в библиотеката за помощ",
messages\bg.json:811:        "searchPlaceholder": "Напишете нещо като 'въпрос относно такса'",
messages\bg.json:1134:        "search": "Търсене",
messages\bg.json:1517:            "searchPlaceholder": "Търси по продукт или №",
messages\bg.json:2075:        "search": "Търсене",
messages\bg.json:2076:        "searchDescription": "Търсене на продукти и обяви",
messages\bg.json:2077:        "searchFieldLabel": "Търсене на продукти",
messages\bg.json:2080:        "searching": "Търсене...",
messages\bg.json:2149:        "searchResults": "Резултати от търсене",
messages\bg.json:2195:        "searchAttributePlaceholder": "Търси {attribute}...",
messages\bg.json:2207:        "searchSellersPlaceholder": "Търси продавачи",
messages\bg.json:2833:        "searchPlaceholder": "Търси продавачи",
messages\bg.json:2850:        "searchPlaceholder": "Търсене в съобщения...",
messages\bg.json:2986:        "search": "Търсене",
messages\bg.json:3039:        "searchPlaceholder": "Търси {filterName}...",
messages\bg.json:3122:            "searchPlaceholder": "Търси категории...",
messages\bg.json:3124:            "searchResults": "Резултати",
messages\bg.json:3600:            "searchPlaceholder": "Търси категория...",
messages\bg.json:3601:            "searchPlaceholderCompact": "Търси...",
messages\bg.json:3928:            "searchPlaceholder": "Търсене...",
messages\bg.json:4011:            "searchPlaceholder": "Търси марка...",
messages\bg.json:4155:            "searchPlaceholder": "Търси документи...",
messages\bg.json:4473:        "search": {
messages\bg.json:4522:        "searchPlaceholder": "Търси в {storeName}...",
messages\bg.json:4595:        "searchProducts": "Търси продукти",
messages\bg.json:4605:        "searchProducts": "Търси продукти"
messages\bg.json:4785:        "searchPlaceholder": "Search listings, brands, and sellers",
messages\bg.json:4786:        "searchAria": "Search",
refactor\supabase\CATEGORY-REDESIGN-v2.md:24:| Search | Postgres-native (tsvector + GIN + facets) | Sufficient for 10K-100K products |
refactor\supabase\CATEGORY-REDESIGN-v2.md:26:| Images | Keep `products.images[]` canonical for now | 203 of 232 products are array-only |
refactor\supabase\CATEGORY-REDESIGN-v2.md:140:  ADD is_searchable BOOLEAN NOT NULL DEFAULT true,
refactor\supabase\CATEGORY-REDESIGN-v2.md:149:| `is_searchable` | Whether values feed into product search_vector |
refactor\supabase\CATEGORY-REDESIGN-v2.md:213:| `images` | Canonical for 203/232 products; list/search/feed all read it |
refactor\supabase\CATEGORY-REDESIGN-v2.md:214:| `ships_to_*` (6 booleans) | Shipping filter logic in search |
refactor\supabase\CATEGORY-REDESIGN-v2.md:228:### Phase 1: Enhanced tsvector with Aspect Tokens
refactor\supabase\CATEGORY-REDESIGN-v2.md:231:-- Rebuild search vector including aspect values
refactor\supabase\CATEGORY-REDESIGN-v2.md:232:CREATE OR REPLACE FUNCTION rebuild_product_search_vector(p_product_id UUID)
refactor\supabase\CATEGORY-REDESIGN-v2.md:234:UPDATE products p SET search_vector = 
refactor\supabase\CATEGORY-REDESIGN-v2.md:235:  setweight(to_tsvector('simple', COALESCE(p.title, '')), 'A') ||
refactor\supabase\CATEGORY-REDESIGN-v2.md:236:  setweight(to_tsvector('simple', COALESCE(
refactor\supabase\CATEGORY-REDESIGN-v2.md:240:     WHERE pa.product_id = p.id AND ca.is_searchable = true), 
refactor\supabase\CATEGORY-REDESIGN-v2.md:242:  setweight(to_tsvector('simple', COALESCE(p.description, '')), 'C') ||
refactor\supabase\CATEGORY-REDESIGN-v2.md:243:  setweight(to_tsvector('simple', COALESCE(array_to_string(p.tags, ' '), '')), 'D')
refactor\supabase\CATEGORY-REDESIGN-v2.md:252:CREATE TRIGGER trg_products_search_vector
refactor\supabase\CATEGORY-REDESIGN-v2.md:254:  FOR EACH ROW EXECUTE FUNCTION rebuild_product_search_vector(NEW.id);
refactor\supabase\CATEGORY-REDESIGN-v2.md:257:CREATE TRIGGER trg_product_attributes_search_sync
refactor\supabase\CATEGORY-REDESIGN-v2.md:259:  FOR EACH ROW EXECUTE FUNCTION rebuild_product_search_vector(
refactor\supabase\CATEGORY-REDESIGN-v2.md:267:CREATE OR REPLACE FUNCTION get_category_facets(
refactor\supabase\CATEGORY-REDESIGN-v2.md:290:When to add Typesense/Meilisearch:
refactor\supabase\CATEGORY-REDESIGN-v2.md:291:- P95 search latency > 200ms at sustained load
refactor\supabase\CATEGORY-REDESIGN-v2.md:292:- Faceted search on 50K+ products with 10+ simultaneous filter dimensions
refactor\supabase\CATEGORY-REDESIGN-v2.md:295:Estimated threshold: ~50K-100K active products with heavy concurrent search.
refactor\supabase\CATEGORY-REDESIGN-v2.md:338:3d. Rebuild search vectors with aspect tokens
refactor\supabase\CATEGORY-REDESIGN-v2.md:346:4c. Update browse/search navigation to new tree
refactor\supabase\CATEGORY-REDESIGN-v2.md:377:| **External search (later)** | Clean aspect data → trivial Typesense/Meilisearch pipe |
refactor\supabase\CATEGORY-REDESIGN-v2.md:398:| Search quality regression | Low | Aspect-enriched vectors improve search |
docs\features\search-filters.md:4:Product search with text query, category filters, price range, condition, location, sorting.
docs\features\search-filters.md:8:- `app/[locale]/(main)/search/` — Search page route
docs\features\search-filters.md:9:- `components/shared/search/` — Search input, suggestions, results
docs\features\search-filters.md:11:- `hooks/use-product-search.ts` — Client hook for search state and URL sync
docs\features\search-filters.md:16:- Search page is a Server Component that reads URL search params
docs\features\search-filters.md:18:- `use-product-search` hook manages client-side filter state and URL updates
refactor\supabase\AUDIT.md:15:| **Products/Catalog** | `products`, `product_images`, `product_variants`, `variant_options`, `product_attributes`, `product_private`, `categories`, `category_attributes`, `brands` |
refactor\supabase\AUDIT.md:61:handle_new_product_search           refresh_browseable_categories
refactor\supabase\AUDIT.md:150:| product_images | 1 | 1 | 1 | 1 | - |
refactor\supabase\AUDIT.md:183:| product_images | INSERT/UPDATE/DELETE | INSERT/UPDATE/DELETE |
refactor\supabase\AUDIT.md:200:5. `product_images` — "Sellers can update their product images"
refactor\supabase\AUDIT.md:234:- `products` — 14 indexes (search_vector, category, seller, status, rating, created_at, etc.)
refactor\supabase\AUDIT.md:249:4. handle_new_product_search → sets search_vector
TASKS.md:156:- [x] **FIX-001:** Search repair — search returns relevant results, filters work *(2026-02-24)*
docs\features\header.md:5:Mobile: hamburger menu, search bar, notifications, cart icon.
docs\features\header.md:6:Desktop: full nav bar with search, categories dropdown, user menu, cart dropdown.
docs\features\header.md:21:- Search triggers navigation to `/(main)/search` with query params
docs\prompts\supabase-refactor-session.md:82:- **ALL have search_path set** — no missing search_path issues (previous migrations fixed this)
docs\prompts\supabase-refactor-session.md:83:- Most use `search_path=public`, some use `search_path=""` (correct for pg_temp isolation)
docs\prompts\supabase-refactor-session.md:167:| Function search_path | CLEAN | All 92 functions have search_path set |
docs\prompts\category-redesign-review.md:35:- How do aspects interact with search? Should aspect values feed into `search_vector`?
docs\prompts\category-redesign-review.md:39:- Specifically verify: `images` array vs `product_images` table — which does the codebase actually query?
docs\prompts\category-redesign-review.md:45:- URL redirects from old category slugs — how many unique URLs are we talking about? Are old slugs indexed by search engines?
docs\prompts\category-redesign-review.md:54:- **Search implications** — the document doesn't discuss how category flattening affects full-text search, category filters in the search UI, or the `category_stats` materialized view.
hooks\use-quick-view-actions.ts:27:    const imgs = product.images?.length
hooks\use-quick-view-actions.ts:28:      ? product.images
hooks\use-product-search.ts:7:import { normalizeSearchQuery } from "@/lib/filters/search-query"
hooks\use-product-search.ts:26:/** Debounce delay in milliseconds for search input */
hooks\use-product-search.ts:29:/** Minimum characters before triggering search */
hooks\use-product-search.ts:32:/** Maximum number of recent searches to store */
hooks\use-product-search.ts:35:/** Maximum number of recent searched products to store */
hooks\use-product-search.ts:38:/** LocalStorage key for recent searches */
hooks\use-product-search.ts:41:/** LocalStorage key for recent searched products */
hooks\use-product-search.ts:44:/** Recent searched product type */
hooks\use-product-search.ts:52:  searchedAt: number
hooks\use-product-search.ts:81:  searchedAt: z.number(),
hooks\use-product-search.ts:112: * Shared hook for product search functionality
hooks\use-product-search.ts:130:  // Trending searches (localized)
hooks\use-product-search.ts:152:  // Load recent searches from localStorage on mount
hooks\use-product-search.ts:206:          `/api/products/search?q=${encodeURIComponent(normalizedQuery)}&limit=${maxResults}`,
hooks\use-product-search.ts:247:  // Save search to recent searches
hooks\use-product-search.ts:249:    (search: string) => {
hooks\use-product-search.ts:250:      const trimmedSearch = search.trim()
hooks\use-product-search.ts:280:        image: product.images?.[0] || null,
hooks\use-product-search.ts:283:        searchedAt: Date.now(),
hooks\use-product-search.ts:304:  // Clear all recent searches
docs\DESIGN.md:51:| Functional (search, close, arrows) | `text-foreground` |
docs\DESIGN.md:99:5 variants: `no-listings`, `no-search`, `no-category`, `no-favorites`, `no-orders`. Structure: rounded icon → title → description → CTA button. Bilingual.
docs\DESIGN.md:124:**Mobile header variants:** `homepage` (logo + search + actions), `contextual` (back + title + optional trailing actions), `product` (back + seller + share). `profile` + `minimal` are merged into `contextual`.
docs\DESIGN.md:126:**Desktop layout:** Sticky header (logo + search + actions + CTA) → sidebar (lg+, category tree + filters) → main content. Modal browsing: products open in full-width dialogs, user never loses scroll position.
docs\DECISIONS.md:105:- **Rationale:** Provide a searchable, reproducible schema snapshot derived from the source-of-truth migrations.
docs\database.md:35:| `product_images` | Product photo references |
docs\database.md:69:| `search_history` | Search query history |
docs\database.md:106:  .select('id, title, price, slug, product_images(url)')
docs\database.md:118:**Common joins:** `products` → `product_images`, `products` → `categories`, `orders` → `order_items`, `conversations` → `messages`.
supabase\schema.sql:3:create extension if not exists "pg_trgm"; -- For fuzzy search
supabase\schema.sql:39:  search_vector tsvector, -- For Full Text Search
supabase\schema.sql:157:-- Automatically update search_vector on insert/update
supabase\schema.sql:158:create function public.handle_new_product_search()
supabase\schema.sql:161:  new.search_vector :=
supabase\schema.sql:162:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\schema.sql:163:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B');
supabase\schema.sql:170:  for each row execute procedure public.handle_new_product_search();
e2e\smoke.spec.ts:170:  test('search page loads with query @smoke @critical', async ({ page, app }) => {
e2e\smoke.spec.ts:171:    await app.goto('/en/search?q=test')
e2e\smoke.spec.ts:184:  test('search page loads with sort param @smoke', async ({ page, app }) => {
e2e\smoke.spec.ts:185:    await app.goto('/en/search?q=test&sort=price-asc')
e2e\smoke.spec.ts:197:  test('search pagination preserves locale @smoke @critical', async ({ page, app }) => {
e2e\smoke.spec.ts:198:    await app.goto('/bg/search')
e2e\smoke.spec.ts:212:    expect(href!).toMatch(/^\/bg\/search/)
e2e\smoke.spec.ts:215:    await expect(page).toHaveURL(/\/bg\/search.*page=2/)
e2e\smoke.spec.ts:225:    await app.goto('/bg/search?q=iphone')
e2e\smoke.spec.ts:236:    await expect(page).toHaveURL(/\/bg\/search\?q=iphone/)
e2e\smoke.spec.ts:244:  test('mobile search cards use clean landscape layout @smoke @search', async ({ page, app }) => {
e2e\smoke.spec.ts:246:    await app.goto('/en/search?q=test')
e2e\smoke.spec.ts:251:    test.skip(!hasCard, 'No product cards rendered on mobile search')
e2e\smoke.spec.ts:299:    await app.goto('/en/search?q=iphone')
e2e\smoke.spec.ts:321:    await app.goto('/en/search?q=iphone')
e2e\smoke.spec.ts:331:    await assertVisible(categoryDrawer.getByRole('textbox', { name: /search categories/i }))
e2e\smoke.spec.ts:484:    // Category: open drawer and pick the first search result.
e2e\smoke.spec.ts:487:    const categorySearch = page.getByPlaceholder(/search category|търси категория/i)
e2e\smoke.spec.ts:532:  test('header search navigates with query param @smoke @search', async ({ page, app }) => {
e2e\smoke.spec.ts:536:    // Treido uses a header search trigger that opens a full-screen overlay.
e2e\smoke.spec.ts:537:    const searchTrigger = page.getByRole('button', { name: /search/i }).first()
e2e\smoke.spec.ts:538:    await assertVisible(searchTrigger)
e2e\smoke.spec.ts:539:    await searchTrigger.click()
e2e\smoke.spec.ts:541:    const searchInput = page.getByRole('searchbox').first()
e2e\smoke.spec.ts:542:    await assertVisible(searchInput)
e2e\smoke.spec.ts:543:    await searchInput.fill('phone')
e2e\smoke.spec.ts:544:    await searchInput.press('Enter')
e2e\smoke.spec.ts:546:    // MUST navigate to search with query
e2e\smoke.spec.ts:547:    await assertNavigatedTo(page, /\/en\/search/, 30_000)
e2e\smoke.spec.ts:551:      return new URL(window.location.href).searchParams.get('q') === 'phone'
e2e\smoke.spec.ts:679:  test('search filters can be applied @smoke @search', async ({ page, app }) => {
e2e\smoke.spec.ts:680:    await app.goto('/en/search?q=phone')
e2e\smoke.spec.ts:699:          return new URL(window.location.href).searchParams.has('sort')
e2e\global-setup.ts:47:    '/en/search?q=warmup',
docs\business\monetization.md:69:- Boosted listings appear before non-boosted in feeds/search
docs\business\monetization.md:151:- Promoted search results (paid top placement)
lib\guest-sell-cta.ts:19:  if (normalized === "/search" || normalized.startsWith("/search/")) return true
docs\business\metrics-kpis.md:20:| Intent | Search rate | % sessions that search | Track | Track |
e2e\orders.spec.ts:113:    authTest("navigates with search query", async ({ page }) => {
e2e\modal-routing.spec.ts:42:  test("search → opens dialog on desktop; close preserves scroll", async ({ page, app, request }) => {
e2e\modal-routing.spec.ts:48:    await app.goto(`/en/search?q=${encodeURIComponent(term)}`)
e2e\modal-routing.spec.ts:68:  test("search → opens drawer on mobile; close preserves scroll", async ({ page, app, request }) => {
e2e\modal-routing.spec.ts:74:    await app.goto(`/en/search?q=${encodeURIComponent(term)}`)
docs\PRD.md:41:**Browse → Buy:** Homepage/search → product modal (desktop) or PDP (mobile) → add to cart → checkout (auth required) → Stripe payment → order confirmation → track → receive → review.
docs\PRD.md:55:**Browsing:** Homepage feeds, search, category navigation (24 categories, 4 levels deep), filters, product grid.
docs\PRD.md:92:- [ ] Browse, search, filter products
e2e\mobile-responsiveness.spec.ts:220:      await expect(categoryDrawer.getByRole("textbox", { name: /search categories/i })).toBeVisible()
e2e\mobile-responsiveness.spec.ts:284:    test("mobile search overlay opens", async ({ page }) => {
e2e\mobile-responsiveness.spec.ts:287:      // Click search button in header
e2e\mobile-responsiveness.spec.ts:288:      const searchButton = page.getByRole("button", { name: /search/i }).first()
e2e\mobile-responsiveness.spec.ts:289:      await searchButton.click()
e2e\mobile-responsiveness.spec.ts:293:      // Use first() to handle multiple search inputs
e2e\mobile-responsiveness.spec.ts:294:      await expect(page.getByRole("searchbox").first()).toBeVisible()
e2e\mobile-responsiveness.spec.ts:450:    test("search page renders correctly on mobile", async ({ page }) => {
e2e\mobile-responsiveness.spec.ts:451:      await page.goto("/en/search?q=phone")
e2e\mobile-responsiveness.spec.ts:463:    test("filters button is accessible on mobile search", async ({ page }) => {
e2e\mobile-responsiveness.spec.ts:464:      await page.goto("/en/search?q=phone")
e2e\mobile-responsiveness.spec.ts:472:      await page.goto("/en/search?q=phone")
e2e\mobile-responsiveness.spec.ts:715:    test("contextual category search keeps category context in URL", async ({ page }) => {
e2e\mobile-responsiveness.spec.ts:720:      const searchLink = page.locator('a[aria-label*="Search"], a[aria-label*="Търсене"]').first()
e2e\mobile-responsiveness.spec.ts:721:      const hasSearchLink = await searchLink.isVisible({ timeout: 15_000 }).catch(() => false)
e2e\mobile-responsiveness.spec.ts:722:      test.skip(!hasSearchLink, "Contextual header search link is not available for this route setup")
e2e\mobile-responsiveness.spec.ts:724:      const href = await searchLink.getAttribute("href")
e2e\mobile-responsiveness.spec.ts:726:      expect(href ?? "").toContain("/search")
e2e\fixtures\base.ts:200:  // Interacting with header controls (search, menus) before it hydrates can lead to
e2e\mobile-home-feed-controls.spec.ts:36:      if (url.searchParams.get("sort") === "price-asc") {
e2e\mobile-home-feed-controls.spec.ts:56:      const sort = url.searchParams.get("sort")
e2e\mobile-home-feed-controls.spec.ts:109:      if (url.searchParams.get("nearby") === "true" && url.searchParams.get("city") === "sofia") {
e2e\mobile-home-feed-controls.spec.ts:136:      if (url.searchParams.get("nearby") === "true" && url.searchParams.get("city") === "varna") {
docs\launch\TRACKER.md:13:| 5 | Search & Browse | P0 | ✅ | ✅ | 9 | FIX-001 fixed, search works, i18n complete, pagination, empty states |
docs\launch\TRACKER.md:119:**Codex pass:** Fixed FIX-001 (raw commas in search query broke PostgREST), added localized metadata.
docs\launch\TRACKER.md:121:- Homepage: /en loads with title "Home | Treido", H1 "Treido Home", 20+ product cards, quick jump tabs (Categories, For you, Newest, Promoted, Nearby, Deals, Filter), header with search/wishlist/cart, full footer.
docs\launch\TRACKER.md:122:- Search: /en/search?q=bmw returns BMW 330i result. Title "Results for 'bmw' | Treido". Sort dropdown, Filters button, Sellers mode link. FIX-001 confirmed fixed.
docs\launch\TRACKER.md:125:- Bulgarian: /bg/search?q=кола — all UI translated. Zero console errors.
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:20:**Where:** Homepage, profile pages, ALL legal/support pages (terms, privacy, cookies, returns, contact, security, feedback, customer-service), categories index, search
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:26:**Fix:** One H1 per page. Header should use a different heading level or visually hidden breadcrumb. Kill the raw-slug H1 in the search/browse/legal header.
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:44:### G-004: Raw URL slug as H1 in header (legal/support/search pages)
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:115:| Search results | ✅ | /search?q=bmw returns correct result |
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:118:| Categories index | ✅ | 24 categories with icons and search box |
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:123:- **SEARCH-001:** H1 is EMPTY on search and browse pages. The header `<h1>` element exists but has no text content — invisible, useless H1. SEO harmful.
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:206:| Header | ✅ | Logo, search button, wishlist, cart icons. Hamburger menu on mobile |
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:214:- **NAV-004:** Cart page shows completely different header from homepage (hamburger + logo vs logo only + search). Check header consistency across routes.
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:266:| Customer Service | ✅ | Rich page: 7 help categories, search, accordion topics, "Start Chatting" CTA |
docs\launch\PLAYWRIGHT-AUDIT-2026-02-24.md:350:| FIX-001 | Fix single H1 per page globally — kill raw-slug H1 in header component for legal/support/search pages | `components/layout/` page header component |
docs\launch\CODEX.md:51:- 2026-02-24 — Section 7 (Orders): audited and fixed all scoped files in `app/[locale]/(account)/account/orders/`, `app/[locale]/(account)/account/sales/`, `app/[locale]/(sell)/sell/orders/`, `app/actions/orders-*.ts`, `components/shared/order-detail/`, `components/shared/order-list-item.tsx`, `lib/order-status.ts`, and `lib/order-conversations.ts`. Key fixes: added buyer order-list pagination (`page` query, page controls, page-reset on search/status filter changes), localized scoped metadata titles/descriptions for orders/sales/seller-orders pages, corrected sales table action target to seller order management (`/sell/orders`), fixed sales status source to item-level status, strengthened seller orders UI copy for both `en/bg` and localized status/tab/empty-state messaging, improved order detail chat deep-linking to existing order conversations, and removed production `console.*` usage in scoped UI/action files. Server-action hardening: replaced ad-hoc order action failures with typed failure codes in `orders-status`/`orders-support`, added structured logger events in `orders-reads`/`orders-status`/`orders-support`, and kept `requireAuth`/`getUser` auth guards intact. Verification: `pnpm -s styles:gate` passed. `pnpm -s typecheck` fails on pre-existing unrelated error in `app/actions/username-account.ts` (`exactOptionalPropertyTypes` mismatch). `pnpm -s lint` reports pre-existing unrelated warnings in account profile files (`_locale` unused). `pnpm -s test:unit` fails in pre-existing unrelated `__tests__/hooks/use-product-search.test.ts` due missing `useTranslations` in the `next-intl` test mock.
docs\launch\CODEX.md:52:- 2026-02-24 — Section 8 (Profile & Account): audited scoped profile/account files and implemented a full profile hardening pass across `app/[locale]/(account)/account/profile/`, `app/actions/profile-*.ts`, and `app/actions/username-*.ts`, plus scoped account surfaces under `app/[locale]/(account)/account/`. Key fixes: localized profile/account-profile UI copy via `next-intl` by introducing `Account.profileEditor` keys (`messages/en.json` + `messages/bg.json`) and replacing hardcoded locale branches in profile cards/dialogs/editor; converted profile + username server actions to typed `errorCode` responses (instead of free-form English strings), then mapped those codes to localized user messages in profile clients; removed production `console.error` usage in all touched section-8 files, switching to structured `logger.error` events; localized profile page metadata via `generateMetadata` + `getTranslations`; and preserved semantic tokens, mobile-first layouts, auth-guard expectations, and i18n routing imports. Verification: `pnpm -s typecheck && pnpm -s lint && pnpm -s styles:gate && pnpm -s test:unit` completed; one unrelated pre-existing lint warning remains in `hooks/use-product-search.ts` (`unicorn/prefer-spread`), outside Section 8 scope.
docs\launch\CODEX.md:56:- 2026-02-24 — Section 5 (Search & Browse): audited and fixed scoped files in `app/[locale]/(main)/page.tsx`, `app/[locale]/(main)/search/`, `app/[locale]/(main)/categories/`, `app/[locale]/(main)/_components/`, `app/[locale]/(main)/_lib/`, `components/shared/search/`, `components/shared/filters/`, `components/mobile/category-nav/`, `lib/filters/`, and `hooks/use-product-search.ts`. FIX-001 root cause: raw query strings (notably commas) were interpolated into Supabase `.or(...)` filters, breaking PostgREST parsing and causing search failures. Implemented `lib/filters/search-query.ts` to tokenize/normalize queries and safely build `ilike` OR filters; wired it into listings search (`search-products.ts`) and sellers search (`search-sellers.ts`), with added error logging for category/profile/product fetch failures. Localized search metadata (`search-page-metadata.ts`) and price preset labels in filter UI (`price-filter-section.tsx`), updated sort UX to explicit `relevance` while preserving legacy `featured` URL compatibility (`sort-select.tsx`), removed remaining hardcoded seller fallback label, and hardened client search hook (`use-product-search.ts`) with normalized query requests + schema-validated response/localStorage parsing. Also updated hook unit mock for `next-intl` translations (`__tests__/hooks/use-product-search.test.ts`). Validation: verified `/en/search?q=iphone,samsung`, `/en/search`, `/en/search?mode=sellers&q=phone`, `/en/categories/electronics`, and empty-search cases via HTTP checks; ran `pnpm -s typecheck && pnpm -s lint && pnpm -s styles:gate && pnpm -s test:unit` successfully.
e2e\accessibility.spec.ts:33:  { name: 'Search Results', path: '/en/search?q=phone' },
e2e\accessibility.spec.ts:149:    await page.goto('/en/search?q=phone')
e2e\accessibility.spec.ts:161:  test('search form is accessible', async ({ page }) => {
e2e\accessibility.spec.ts:165:    // Find search input
e2e\accessibility.spec.ts:166:    const searchInput = page.getByRole('searchbox')
e2e\accessibility.spec.ts:167:      .or(page.getByRole('textbox', { name: /search/i }))
e2e\accessibility.spec.ts:168:      .or(page.locator('input[type="search"]'))
e2e\accessibility.spec.ts:169:      .or(page.locator('[data-testid="search-input"]'))
e2e\accessibility.spec.ts:171:    // If search exists on homepage, test it
e2e\accessibility.spec.ts:172:    const searchCount = await searchInput.count()
e2e\accessibility.spec.ts:173:    if (searchCount > 0) {
e2e\accessibility.spec.ts:175:      const accessibleName = await searchInput.first().getAttribute('aria-label') ||
e2e\accessibility.spec.ts:176:        await searchInput.first().getAttribute('placeholder') ||
e2e\accessibility.spec.ts:185:        }, await searchInput.first().elementHandle())
__tests__\supabase-middleware-session.test.ts:19:    get search() {
__tests__\supabase-middleware-session.test.ts:20:      return internal.search
__tests__\supabase-middleware-session.test.ts:22:    get searchParams() {
__tests__\supabase-middleware-session.test.ts:23:      return internal.searchParams
lib\view-models\product-page.ts:154: * Get product images - prioritizes normalized product_images table (WebP),
lib\view-models\product-page.ts:158:  // First check for product_images relation (normalized table with WebP images)
lib\view-models\product-page.ts:159:  const productImages = (product as { product_images?: Array<{ image_url: string; is_primary?: boolean; display_order?: number }> }).product_images;
lib\view-models\product-page.ts:174:  const raw = product.images;
lib\view-models\product-page.ts:216:    const rowImages = row.images;
e2e\mobile-browse-filters.spec.ts:13:  test("categories tab opens unified category drawer on search", async ({ page, app }) => {
e2e\mobile-browse-filters.spec.ts:14:    await app.goto("/en/search?q=phone")
e2e\mobile-browse-filters.spec.ts:23:    await expect(categoryDrawer.getByRole("textbox", { name: /search categories/i })).toBeVisible()
e2e\mobile-browse-filters.spec.ts:48:  test("search page shows sticky mobile filter controls and location chip", async ({ page, app }) => {
e2e\mobile-browse-filters.spec.ts:49:    await app.goto("/en/search?q=phone")
e2e\mobile-browse-filters.spec.ts:59:    const filterDialog = page.getByRole("dialog", { name: /refine your search|location/i })
e2e\mobile-browse-filters.spec.ts:65:    await app.goto("/en/search?q=phone")
e2e\mobile-browse-filters.spec.ts:70:    const filterDialog = page.getByRole("dialog", { name: /refine your search|location/i })
docs\launch\CHECKLIST.md:73:**Scope:** `app/[locale]/(main)/page.tsx`, `app/[locale]/(main)/search/`, `app/[locale]/(main)/categories/`, `app/[locale]/(main)/_components/`, `app/[locale]/(main)/_lib/`, `components/shared/search/`, `components/shared/filters/`, `components/mobile/category-nav/`, `lib/filters/`, `hooks/use-product-search.ts`
docs\launch\CHECKLIST.md:141:- [x] Header — search, user menu, cart icon, notifications
docs\launch\CHECKLIST.md:156:- [ ] Products management — list, search, filter
lib\validation\username.ts:35:  "search",
docs\generated\pencil-route-map.md:96:| `/search` | FeedGridPage | Browse grid |
docs\generated\db-schema.md:47:| `product_images` | ✅ | 0 | 0 | 20251215100000... |
docs\generated\db-schema.md:54:| `search_history` | ✅ | 3 | 3 | 20251127_add_s... |
docs\generated\db-schema.md:142:### product_images
docs\generated\db-schema.md:163:### search_history
docs\generated\db-schema.md:164:Policies: `Users can delete own search history`, `Users can insert own search history`, `Users can view own search history`
docs\business\go-to-market.md:29:- [ ] Broken areas fixed (search, sell flow, account settings)
lib\auth\business.ts:148:    logSupabaseQueryError("dashboard.products_search_title", titleMatches.error, { sellerId, term })
lib\auth\business.ts:151:    logSupabaseQueryError("dashboard.products_search_private", privateMatches.error, { sellerId, term })
lib\auth\business.ts:513:    search?: string
lib\auth\business.ts:527:    search,
lib\auth\business.ts:561:  const term = search?.trim()
lib\auth\business.ts:650:    search?: string
lib\auth\business.ts:663:    // search,
lib\auth\business.ts:988:    search?: string
lib\auth\business.ts:1000:    search,
lib\auth\business.ts:1074:  // Apply search filter
lib\auth\business.ts:1075:  if (search) {
lib\auth\business.ts:1076:    const query = search.toLowerCase()
lib\auth\business.ts:1233:        ...(product?.images?.[0] ? { image: product.images[0] } : {}),
lib\auth\business.ts:1249:        ...(product.images?.[0] ? { image: product.images[0] } : {}),
lib\auth\admin.ts:106:   * set search_path = public
lib\api\response-helpers.ts:73: * Parse common pagination params from search params.
lib\api\response-helpers.ts:76:  searchParams: URLSearchParams,
lib\api\response-helpers.ts:81:  const page = z.coerce.number().int().min(1).catch(defaultPage).parse(searchParams.get("page") ?? defaultPage)
lib\api\response-helpers.ts:87:    .parse(searchParams.get("limit") ?? defaultLimit)
__tests__\guest-sell-cta.test.ts:14:      expect(stripLocalePrefix("/en/search")).toBe("/search")
__tests__\guest-sell-cta.test.ts:20:      expect(stripLocalePrefix("/search")).toBe("/search")
__tests__\guest-sell-cta.test.ts:28:      expect(isGuestSellCtaRouteEligible("/search")).toBe(true)
lib\data\products\types.ts:21:  product_images?: Array<{
lib\data\products\normalize.ts:124:  const fromTable = (p.product_images ?? [])
lib\data\products\normalize.ts:137:  return p.images?.[0] || "/placeholder.svg"
lib\data\products\normalize.ts:160:  product_images?: Array<{
lib\data\products\normalize.ts:202:    images: p.images ?? null,
lib\data\products\normalize.ts:205:    product_images: p.product_images ?? null,
docs\archive\2026\PENCIL-DEV.md:33:- **VS Code / Cursor:** Extensions → search "Pencil" → Install.
docs\archive\2026\PENCIL-DEV.md:730:| `FeedGridPage` | Browse grids, category pages, search results, wishlist |
docs\archive\2026\MOTION-STRUCTURE-SPEC.md:50:The main visual payoff. When a product grid appears (homepage feed, category page, search results), cards fade-in with a subtle stagger.
docs\archive\2026\MOTION-STRUCTURE-SPEC.md:78:- [x] Apply to: homepage feed grid, category page grid, search results grid
lib\data\product-page.ts:12:type ProductImageRow = Database["public"]["Tables"]["product_images"]["Row"]
lib\data\product-page.ts:46:  product_images?: ProductImage[]
lib\data\product-page.ts:115:      product_images (
lib\data\product-page.ts:194:    // Fetch product_images for the fallback path
lib\data\product-page.ts:196:      .from("product_images")
lib\data\product-page.ts:206:      product_images: productImages ?? [],
lib\data\product-page.ts:225:    product_images?: ProductImage[]
lib\data\product-page.ts:244:    product_images: productWithRelations.product_images ?? [],
docs\archive\2026\MOBILE-UX-PERFECTION.md:192:- [x] `/search` — Search results (search controls + product grid)
docs\archive\2026\MOBILE-POLISH-2026.md:22:| Pill/chip shape | `rounded-full` | Pills, chips, search bars |
docs\archive\2026\MOBILE-POLISH-2026.md:41:- The search pill and context chip are `min-h-(--control-compact)` (36px) — this is OK for embedded controls within the 48px header bar. Don't change these.
docs\archive\2026\MOBILE-POLISH-2026.md:124:**File:** `app/[locale]/_components/search/mobile-search-overlay.tsx`
lib\filters\active-filter-count.ts:14:  searchParams: SearchParamsLike,
lib\filters\active-filter-count.ts:19:  if (searchParams.get("minPrice") || searchParams.get("maxPrice")) count++
lib\filters\active-filter-count.ts:20:  if (searchParams.get("minRating")) count++
lib\filters\active-filter-count.ts:21:  if (searchParams.get("availability")) count++
lib\filters\active-filter-count.ts:23:  if (options?.includeDeals && searchParams.get("deals") === "true") count++
lib\filters\active-filter-count.ts:24:  if (options?.includeVerified && searchParams.get("verified") === "true") count++
lib\filters\active-filter-count.ts:26:  if ((options?.includeLocation ?? true) && (searchParams.get("city") || searchParams.get("nearby") === "true")) {
lib\filters\active-filter-count.ts:32:    if (searchParams.getAll(key).length > 0) count++
docs\archive\2026\CODE-CLEANUP-2026.md:19:> - `app/[locale]/_components/search/mobile-search-overlay.tsx`
docs\archive\2026\CODE-CLEANUP-2026.md:36:3. `app/[locale]/(main)/search/_components/mobile-browse-mode-switch.tsx`
docs\archive\2026\BRUTAL-CODEBASE-AUDIT-2026-02-24.md:41:  - repeated filter/search layout composition
docs\archive\2026\BRUTAL-CODEBASE-AUDIT-2026-02-24.md:89:| Product card/search/filter composition unification | 1,500 | 3,000 | 4,500 | Medium |
docs\archive\2026\BRUTAL-CODEBASE-AUDIT-2026-02-24.md:121:| Product card variants + search/category UI shells | Desktop/mobile overlap and repeated metadata wiring | `components/shared/product/card/*`, search/category layout components |
docs\archive\2026\BRUTAL-CODEBASE-AUDIT-2026-02-24.md:143:- Unify product card shared logic and repeated filter/search layout scaffolding.
__tests__\hooks\use-product-search.test.ts:19:import { useProductSearch, type SearchProduct } from '@/hooks/use-product-search'
__tests__\hooks\use-product-search.test.ts:24:describe('hooks/use-product-search', () => {
__tests__\hooks\use-product-search.test.ts:80:    it('provides trending searches based on locale', () => {
__tests__\hooks\use-product-search.test.ts:121:  describe('debounced search', () => {
__tests__\hooks\use-product-search.test.ts:122:    it('does not search when query length is below minimum', async () => {
__tests__\hooks\use-product-search.test.ts:137:    it('searches after debounce delay', async () => {
__tests__\hooks\use-product-search.test.ts:149:      // Not searched immediately
__tests__\hooks\use-product-search.test.ts:158:        expect.stringContaining('/api/products/search?q=phone'),
__tests__\hooks\use-product-search.test.ts:163:    it('cancels previous search when query changes', async () => {
__tests__\hooks\use-product-search.test.ts:187:      // Should only search for 'laptop' (final query)
__tests__\hooks\use-product-search.test.ts:193:    it('handles search API error gracefully', async () => {
__tests__\hooks\use-product-search.test.ts:214:  describe('recent searches', () => {
__tests__\hooks\use-product-search.test.ts:215:    it('loads recent searches from localStorage on mount', () => {
__tests__\hooks\use-product-search.test.ts:223:    it('saves search to recent searches', () => {
__tests__\hooks\use-product-search.test.ts:234:    it('does not save empty or whitespace-only searches', () => {
__tests__\hooks\use-product-search.test.ts:245:    it('moves duplicate search to front', () => {
__tests__\hooks\use-product-search.test.ts:257:    it('limits recent searches to MAX_RECENT_SEARCHES (5)', () => {
__tests__\hooks\use-product-search.test.ts:273:    it('clears all recent searches', () => {
__tests__\hooks\use-product-search.test.ts:290:        { id: '1', title: 'Product 1', price: 29.99, image: '/img.jpg', slug: 'p1', searchedAt: Date.now() }
__tests__\hooks\use-product-search.test.ts:309:      expect(result.current.recentProducts[0].searchedAt).toBeDefined()
__tests__\hooks\use-product-search.test.ts:314:        { id: '1', title: 'Product 1', price: 10, image: null, slug: 'p1', searchedAt: 1000 },
__tests__\hooks\use-product-search.test.ts:315:        { id: '2', title: 'Product 2', price: 20, image: null, slug: 'p2', searchedAt: 2000 }
__tests__\hooks\use-product-search.test.ts:326:      expect(result.current.recentProducts[0].searchedAt).toBeGreaterThan(1000)
__tests__\hooks\use-product-search.test.ts:331:        id: `${i}`, title: `Product ${i}`, price: 10, image: null, slug: `p${i}`, searchedAt: i * 1000
__tests__\hooks\use-product-search.test.ts:347:        { id: '1', title: 'Product 1', price: 10, image: null, slug: 'p1', searchedAt: 1000 }
lib\sell\schema.ts:256:			completed: (data.images?.length ?? 0) > 0,
__tests__\hooks\use-geo-welcome.test.ts:76:        search: '',
__tests__\hooks\use-geo-welcome.test.ts:405:      window.location.search = '?sort=price'
lib\navigation\mobile-tab-bar.ts:17:  "search",
__tests__\mobile-tab-bar-routes.test.ts:11:    const searchState = getMobileTabBarRouteState("/bg/search")
__tests__\mobile-tab-bar-routes.test.ts:17:    expect(searchState.normalizedPathname).toBe("/search")
__tests__\mobile-tab-bar-routes.test.ts:18:    expect(searchState.shouldHideTabBar).toBe(false)
__tests__\mobile-tab-bar-routes.test.ts:40:    const state = getMobileTabBarRouteState("/en/search/results")
__tests__\mobile-tab-bar-routes.test.ts:42:    expect(state.pathSegments).toEqual(["search", "results"])
__tests__\mobile-tab-bar-routes.test.ts:56:    expect(isMobileTabPathActive("/search", "/")).toBe(false)
lib\supabase\middleware.ts:49:      url.searchParams.set('next', `${request.nextUrl.pathname}${request.nextUrl.search}`)
lib\supabase\middleware.ts:106:    url.searchParams.set('next', `${request.nextUrl.pathname}${request.nextUrl.search}`)
lib\supabase\middleware.ts:114:    url.searchParams.set('next', `${request.nextUrl.pathname}${request.nextUrl.search}`)
lib\supabase\messages.ts:90:          images: productRow.images || [],
lib\supabase\messages.ts:184:  product_images: string[] | null
lib\supabase\messages.ts:237:          ? { id: conv.product_id, title: conv.product_title, images: conv.product_images }
designs\UI-UX-MODEL.md:15:- Browse header: brand + search + quick actions.
lib\supabase\database.types.ts:1250:      product_images: {
lib\supabase\database.types.ts:1280:            foreignKeyName: "product_images_product_id_fkey"
lib\supabase\database.types.ts:1287:            foreignKeyName: "product_images_product_id_fkey"
lib\supabase\database.types.ts:1442:          search_vector: unknown
lib\supabase\database.types.ts:1491:          search_vector?: unknown
lib\supabase\database.types.ts:1540:          search_vector?: unknown
lib\supabase\database.types.ts:2618:          search_vector: unknown
lib\supabase\database.types.ts:2666:          search_vector?: unknown
lib\supabase\database.types.ts:2714:          search_vector?: unknown
lib\supabase\database.types.ts:2945:          product_images: string[]
supabase\migrations_legacy_sync_20260223193150\20251127013128_add_helpful_count_function.sql:6:set search_path = public
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:4:-- Drop old search trigger and function
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:6:DROP FUNCTION IF EXISTS public.handle_new_product_search();
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:8:-- Create multi-language full text search function (English + Cyrillic support)
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:9:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:13:  new.search_vector :=
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:14:    setweight(to_tsvector('simple', coalesce(new.title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:15:    setweight(to_tsvector('simple', coalesce(new.description, '')), 'B') ||
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:16:    setweight(to_tsvector('simple', coalesce(array_to_string(new.tags, ' '), '')), 'C');
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:24:  FOR EACH ROW EXECUTE PROCEDURE public.handle_new_product_search();
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:26:-- Update existing products to have search_vector
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:27:UPDATE public.products SET search_vector = 
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:28:  setweight(to_tsvector('simple', coalesce(title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:29:  setweight(to_tsvector('simple', coalesce(description, '')), 'B') ||
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:30:  setweight(to_tsvector('simple', coalesce(array_to_string(tags, ' '), '')), 'C');
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:32:-- Create GIN index on search_vector for performance (if not exists)
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:33:CREATE INDEX IF NOT EXISTS idx_products_search_vector ON public.products USING GIN (search_vector);
supabase\migrations_legacy_sync_20260223193150\20251124195332_add_tags_column_and_bulgarian_search.sql:39:COMMENT ON COLUMN public.products.tags IS 'Product tags for categorization and search (e.g., ["BMW", "car parts", "steering wheel"])';;
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:4:-- For fuzzy search
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:47:  search_vector tsvector, -- For Full Text Search
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:92:-- Automatically update search_vector on insert/update
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:93:create function public.handle_new_product_search()
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:96:  new.search_vector :=
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:97:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:98:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B');
supabase\migrations_legacy_sync_20260223193150\20240101000000_initial_schema.sql:104:  for each row execute procedure public.handle_new_product_search();
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:35:-- FIX: Function search_path mutable
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:37:-- Drop and recreate function with search_path set
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:44:set search_path = public
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:48:    update public.product_images
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:60:  before insert or update on public.product_images
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:66:-- Fix product_images policies
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:67:drop policy if exists "Sellers can insert their product images" on public.product_images;
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:68:drop policy if exists "Sellers can update their product images" on public.product_images;
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:69:drop policy if exists "Sellers can delete their product images" on public.product_images;
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:72:  on public.product_images for insert
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:76:      where products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:82:  on public.product_images for update
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:86:      where products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:92:  on public.product_images for delete
supabase\migrations_legacy_sync_20260223193150\20251127012500_add_wishlist_and_fixes.sql:96:      where products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:9:-- The extension will remain in public schema but is required for search functionality
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:11:-- Step 2: Fix function search_path issues
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:12:-- Add explicit search_path to prevent security vulnerabilities
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:13:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:16:  new.search_vector :=
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:17:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:18:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B') ||
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:19:    setweight(to_tsvector('english', coalesce(new.subcategory, '')), 'C') ||
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:20:    setweight(to_tsvector('english', array_to_string(new.tags, ' ')), 'C');
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:25:-- Step 3: Fix is_admin function search_path
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:34:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:36:-- Step 4: Fix protect_sensitive_columns function search_path
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:56:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:253:CREATE INDEX IF NOT EXISTS idx_products_search_vector ON public.products USING GIN(search_vector);
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:307:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:332:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:347:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124192642_production_ready.sql:379:COMMENT ON TABLE public.products IS 'Product catalog with search capabilities';
supabase\migrations_legacy_sync_20260223193150\20251127000002_share_wishlist.sql:78:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000002_share_wishlist.sql:109:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000002_share_wishlist.sql:132:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000002_share_wishlist.sql:155:    p.images[1] AS product_image,
supabase\migrations_legacy_sync_20260223193150\20251127000002_share_wishlist.sql:164:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:9:-- The extension will remain in public schema but is required for search functionality
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:11:-- Step 2: Fix function search_path issues
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:12:-- Add explicit search_path to prevent security vulnerabilities
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:13:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:16:  new.search_vector :=
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:17:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:18:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B') ||
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:19:    setweight(to_tsvector('english', coalesce(new.subcategory, '')), 'C') ||
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:20:    setweight(to_tsvector('english', array_to_string(new.tags, ' ')), 'C');
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:25:-- Step 3: Fix is_admin function search_path
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:34:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:36:-- Step 4: Fix protect_sensitive_columns function search_path
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:56:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:253:CREATE INDEX IF NOT EXISTS idx_products_search_vector ON public.products USING GIN(search_vector);
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:307:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:332:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:347:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124000000_production_ready.sql:379:COMMENT ON TABLE public.products IS 'Product catalog with search capabilities';
supabase\migrations_legacy_sync_20260223193150\20251127000001_messaging_system.sql:156:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000001_messaging_system.sql:193:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000001_messaging_system.sql:214:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000001_messaging_system.sql:254:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000000_product_variants_seo.sql:144:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251127000000_product_variants_seo.sql:174:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:1:-- Create product_images table for multiple images per product
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:2:CREATE TABLE IF NOT EXISTS product_images (
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:13:CREATE INDEX IF NOT EXISTS idx_product_images_product_id ON product_images(product_id);
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:14:CREATE INDEX IF NOT EXISTS idx_product_images_primary ON product_images(product_id, is_primary) WHERE is_primary = true;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:17:ALTER TABLE product_images ENABLE ROW LEVEL SECURITY;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:20:DROP POLICY IF EXISTS "Anyone can view product images" ON product_images;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:22:  ON product_images FOR SELECT
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:25:DROP POLICY IF EXISTS "Sellers can insert their product images" ON product_images;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:27:  ON product_images FOR INSERT
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:31:      WHERE products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:36:DROP POLICY IF EXISTS "Sellers can update their product images" ON product_images;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:38:  ON product_images FOR UPDATE
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:42:      WHERE products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:47:DROP POLICY IF EXISTS "Sellers can delete their product images" ON product_images;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:49:  ON product_images FOR DELETE
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:53:      WHERE products.id = product_images.product_id
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:63:    UPDATE product_images 
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:72:DROP TRIGGER IF EXISTS trigger_ensure_single_primary_image ON product_images;
supabase\migrations_legacy_sync_20260223193150\20251124202249_add_product_images_support.sql:74:  BEFORE INSERT OR UPDATE ON product_images
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:6:-- Update search vector function to include subcategory and tags
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:7:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:10:  new.search_vector :=
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:11:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:12:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B') ||
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:13:    setweight(to_tsvector('english', coalesce(new.subcategory, '')), 'C') ||
supabase\migrations_legacy_sync_20260223193150\20240101000001_add_tags.sql:14:    setweight(to_tsvector('english', array_to_string(new.tags, ' ')), 'C');
supabase\migrations_legacy_sync_20260223193150\20251127022254_share_wishlist.sql:113:    p.images[1],
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:1:-- Security fix: Set explicit search_path on all database functions
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:2:-- This addresses the Supabase security advisor warnings about mutable search paths
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:5:ALTER FUNCTION public.mark_messages_read SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:8:ALTER FUNCTION public.update_conversation_on_message SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:11:ALTER FUNCTION public.get_total_unread_messages SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:14:ALTER FUNCTION public.get_or_create_conversation SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:17:ALTER FUNCTION public.generate_share_token SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:20:ALTER FUNCTION public.enable_wishlist_sharing SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:23:ALTER FUNCTION public.disable_wishlist_sharing SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251127100000_fix_search_paths.sql:26:ALTER FUNCTION public.get_shared_wishlist SET search_path = public;
designs\treido.pen:52:          "content": "Route map: generated from designs/route-inventory.json → docs/generated/pencil-route-map.md  ·  Tip: in the layer search, type 'Screens (M375)' or 'M375 / /checkout' to jump.",
designs\treido.pen:72:          "content": "Search these in the layer panel:\n• Browse → Browse (tab)\n• Categories → M375 / /categories\n• Search → M375 / /search\n• Product (PDP) → M375 / /:username/:productSlug\n• Cart → M375 / /cart\n• Checkout → M375 / /checkout\n• Wishlist → M375 / /wishlist\n• Auth → M375 / /auth\n• Onboarding → M375 / /onboarding\n• Account/Profile → M375 / /account\n• Sell → M375 / /sell\n• Chat → M375 / /chat\n• Desktop-only → M375 / /admin, M375 / /dashboard",
designs\treido.pen:172:                      "name": "searchIcon",
designs\treido.pen:175:                      "iconFontName": "search",
designs\treido.pen:182:                      "name": "searchText",
designs\treido.pen:2272:                  "name": "searchPill",
designs\treido.pen:2287:                      "name": "searchIcon",
designs\treido.pen:2290:                      "iconFontName": "search",
designs\treido.pen:2297:                      "name": "searchText",
designs\treido.pen:2566:                      "iconFontName": "search",
designs\treido.pen:3947:                      "name": "search",
designs\treido.pen:3962:                          "name": "searchIcon",
designs\treido.pen:3965:                          "iconFontName": "search",
designs\treido.pen:3972:                          "name": "searchText",
designs\treido.pen:4617:                      "iconFontName": "search",
designs\treido.pen:5043:                          "name": "searchIcon",
designs\treido.pen:5046:                          "iconFontName": "search",
designs\treido.pen:5053:                          "name": "searchText",
designs\treido.pen:5540:                          "name": "searchIcon",
designs\treido.pen:5543:                          "iconFontName": "search",
designs\treido.pen:5550:                          "name": "searchText",
designs\treido.pen:6037:                          "name": "searchIcon",
designs\treido.pen:6040:                          "iconFontName": "search",
designs\treido.pen:6047:                          "name": "searchText",
designs\treido.pen:6534:                          "name": "searchIcon",
designs\treido.pen:6537:                          "iconFontName": "search",
designs\treido.pen:6544:                          "name": "searchText",
designs\treido.pen:7031:                          "name": "searchIcon",
designs\treido.pen:7034:                          "iconFontName": "search",
designs\treido.pen:7041:                          "name": "searchText",
designs\treido.pen:7478:              "name": "M375 / /search / Search Results",
designs\treido.pen:7548:                          "name": "searchIcon",
designs\treido.pen:7551:                          "iconFontName": "search",
designs\treido.pen:7558:                          "name": "searchText",
designs\treido.pen:27398:                              "iconFontName": "search"
designs\treido.pen:27502:                              "iconFontName": "search"
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:2:-- This table stores user search queries for personalized search suggestions
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:3:-- Each user can have up to 50 recent searches stored
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:5:create table public.search_history (
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:9:  category text, -- optional: the category filter used with this search
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:15:create index idx_search_history_user_id on public.search_history(user_id);
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:16:create index idx_search_history_created_at on public.search_history(created_at desc);
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:17:create index idx_search_history_user_query on public.search_history(user_id, query);
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:20:alter table public.search_history enable row level security;
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:22:-- RLS Policies: Users can only see and manage their own search history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:23:create policy "Users can view own search history"
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:24:  on public.search_history for select
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:27:create policy "Users can insert own search history"
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:28:  on public.search_history for insert
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:31:create policy "Users can delete own search history"
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:32:  on public.search_history for delete
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:35:-- Function to clean up old search history entries (keeps only 50 most recent per user)
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:36:create or replace function public.cleanup_old_search_history()
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:39:  -- Delete old entries if user has more than 50 searches
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:40:  delete from public.search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:43:    select id from public.search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:52:-- Trigger to automatically clean up old search history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:53:create trigger cleanup_search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:54:  after insert on public.search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:55:  for each row execute procedure public.cleanup_old_search_history();
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:57:-- Create a function to add search and avoid duplicates (updates timestamp if same query exists)
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:58:create or replace function public.add_search_history(
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:67:  delete from public.search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:71:  insert into public.search_history (user_id, query, category, result_count)
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:77:create or replace view public.trending_searches as
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:80:  count(*) as search_count
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:81:from public.search_history
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:84:order by search_count desc
supabase\migrations_legacy_sync_20260223193150\20251127_add_search_history.sql:88:grant select on public.trending_searches to anon, authenticated;
components\providers\wishlist-context.tsx:136:            image: prod?.images?.[0] || "/placeholder.svg",
components\providers\cart-context.tsx:215:      const images = asStringArray(products?.images)
components\providers\header-context.tsx:22:  /** When true, title area expands to fill available space (for search bar). */
components\providers\header-context.tsx:24:  /** Custom trailing actions (replaces default search/wishlist/cart). */
designs\treido-v2.pen:52:          "content": "Route map: generated from designs/route-inventory.json → docs/generated/pencil-route-map.md  ·  Tip: in the layer search, type 'Screens (M375)' or 'M375 / /checkout' to jump.",
designs\treido-v2.pen:72:          "content": "Search these in the layer panel:\n• Browse → Browse (tab)\n• Categories → M375 / /categories\n• Search → M375 / /search\n• Product (PDP) → M375 / /:username/:productSlug\n• Cart → M375 / /cart\n• Checkout → M375 / /checkout\n• Wishlist → M375 / /wishlist\n• Auth → M375 / /auth\n• Onboarding → M375 / /onboarding\n• Account/Profile → M375 / /account\n• Sell → M375 / /sell\n• Chat → M375 / /chat\n• Desktop-only → M375 / /admin, M375 / /dashboard",
designs\treido-v2.pen:172:                      "name": "searchIcon",
designs\treido-v2.pen:175:                      "iconFontName": "search",
designs\treido-v2.pen:182:                      "name": "searchText",
designs\treido-v2.pen:2269:                  "name": "searchPill",
designs\treido-v2.pen:2284:                      "name": "searchIcon",
designs\treido-v2.pen:2287:                      "iconFontName": "search",
designs\treido-v2.pen:2294:                      "name": "searchText",
designs\treido-v2.pen:2563:                      "iconFontName": "search",
designs\treido-v2.pen:3944:                      "name": "search",
designs\treido-v2.pen:3959:                          "name": "searchIcon",
designs\treido-v2.pen:3962:                          "iconFontName": "search",
designs\treido-v2.pen:3969:                          "name": "searchText",
designs\treido-v2.pen:4614:                      "iconFontName": "search",
designs\treido-v2.pen:5633:                          "name": "searchIcon",
designs\treido-v2.pen:5636:                          "iconFontName": "search",
designs\treido-v2.pen:5643:                          "name": "searchText",
designs\treido-v2.pen:6453:                          "name": "searchIcon",
designs\treido-v2.pen:6456:                          "iconFontName": "search",
designs\treido-v2.pen:6463:                          "name": "searchText",
designs\treido-v2.pen:6900:              "name": "M375 / /search / Search Results",
designs\treido-v2.pen:6913:                  "name": "searchHeader",
designs\treido-v2.pen:6943:                      "iconFontName": "search",
designs\treido-v2.pen:7057:                  "name": "searchFilter",
designs\treido-v2.pen:7091:                          "name": "searchCard1",
designs\treido-v2.pen:7106:                          "name": "searchCard2",
designs\treido-v2.pen:7125:                  "name": "searchNav",
designs\treido-v2.pen:23049:                      "name": "searchIcon",
designs\treido-v2.pen:23052:                      "iconFontName": "search",
designs\treido-v2.pen:23059:                      "name": "searchText",
designs\treido-v2.pen:23546:                      "name": "searchIcon",
designs\treido-v2.pen:23549:                      "iconFontName": "search",
designs\treido-v2.pen:23556:                      "name": "searchText",
designs\treido-v2.pen:24043:                      "name": "searchIcon",
designs\treido-v2.pen:24046:                      "iconFontName": "search",
designs\treido-v2.pen:24053:                      "name": "searchText",
designs\treido-v2.pen:24540:                      "name": "searchIcon",
designs\treido-v2.pen:24543:                      "iconFontName": "search",
designs\treido-v2.pen:24550:                      "name": "searchText",
designs\treido-v2.pen:24967:          "name": "M375 / /search / Search Results  Legacy",
designs\treido-v2.pen:25037:                      "name": "searchIcon",
designs\treido-v2.pen:25040:                      "iconFontName": "search",
designs\treido-v2.pen:25047:                      "name": "searchText",
designs\treido-v2.pen:32777:                              "iconFontName": "search"
designs\treido-v2.pen:32881:                              "iconFontName": "search"
components\layout\sidebar\sidebar-menu-header.tsx:51:  const searchParams = useSearchParams()
components\layout\sidebar\sidebar-menu-header.tsx:52:  const search = searchParams?.toString()
components\layout\sidebar\sidebar-menu-header.tsx:53:  const localeHref = search ? `${pathname}?${search}` : pathname
designs\route-inventory.json:77:  "/search",
components\mobile\drawers\cart-drawer.tsx:109:              <Link href="/search" onClick={handleClose}>
designs\pencil-tasks-1.md:31:- [ ] `/search` — FeedGridPage — Search results
components\shared\wishlist\wishlist-drawer.tsx:85:              <Link href="/search" className="gap-1">
supabase\migrations\20251201094713_user_addresses_payments.sql:74:SET search_path = public
supabase\migrations\20251201094713_user_addresses_payments.sql:101:SET search_path = public
supabase\migrations\20251201094713_user_addresses_payments.sql:133:SET search_path = public
components\layout\header\types.ts:28:  /** Callback to open search overlay */
components\layout\header\types.ts:30:  /** Optional context chip label rendered inside the search pill. */
components\layout\header\types.ts:58:  /** Active category slug (used for search context). */
components\layout\header\types.ts:68:  /** Optional trailing actions (replaces the default search/wishlist/cart cluster). */
components\layout\header\types.ts:72:  /** When true, title area expands to fill available space (for inline search bar). */
supabase\migrations\20251127022254_share_wishlist.sql:113:    p.images[1],
supabase\migrations\20251127013128_add_helpful_count_function.sql:6:set search_path = public
components\layout\header\mobile\homepage-header.tsx:17: * - Hamburger + Logo + Inline search + Cart
components\layout\header\mobile\homepage-header.tsx:28:  const searchPlaceholder = tNav("searchPlaceholderShort")
components\layout\header\mobile\homepage-header.tsx:54:              aria-label={searchPlaceholder}
components\layout\header\mobile\homepage-header.tsx:56:              data-testid="mobile-home-header-search-trigger"
components\layout\header\mobile\homepage-header.tsx:59:                {searchPlaceholder}
components\shared\search\search-context.ts:6:const SEARCH_PATH = "/search"
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:35:-- FIX: Function search_path mutable
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:37:-- Drop and recreate function with search_path set
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:44:set search_path = public
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:48:    update public.product_images
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:60:  before insert or update on public.product_images
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:66:-- Fix product_images policies
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:67:drop policy if exists "Sellers can insert their product images" on public.product_images;
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:68:drop policy if exists "Sellers can update their product images" on public.product_images;
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:69:drop policy if exists "Sellers can delete their product images" on public.product_images;
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:72:  on public.product_images for insert
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:76:      where products.id = product_images.product_id
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:82:  on public.product_images for update
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:86:      where products.id = product_images.product_id
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:92:  on public.product_images for delete
supabase\migrations\20251127012500_add_wishlist_and_fixes.sql:96:      where products.id = product_images.product_id
components\layout\header\mobile\contextual-header.tsx:10:import { buildSearchHref } from "@/components/shared/search/search-context"
components\layout\header\mobile\contextual-header.tsx:37:  const searchHref = shouldRenderDefaultActions
components\layout\header\mobile\contextual-header.tsx:90:                  href={searchHref ?? "/search"}
components\layout\header\mobile\contextual-header.tsx:92:                  aria-label={tCommon("search")}
components\shared\search\search-ai-chat.tsx:13:import { SearchAiAssistantAvatar, SearchAiUserAvatar } from "./search-ai-chat-avatars"
components\shared\search\search-ai-chat.tsx:14:import { SearchAiChatEmptyState } from "./search-ai-chat-empty-state"
components\shared\search\search-ai-chat.tsx:15:import { extractListings } from "./search-ai-chat-utils"
components\shared\search\search-ai-chat.tsx:43: * AI Chat component for search overlay
components\shared\search\search-ai-chat.tsx:106:              const searchQuery = !isUser ? getClosestPreviousUserMessageText(messages, messageIndex) : null
components\shared\search\search-ai-chat.tsx:160:                            href={searchQuery ? `/search?q=${encodeURIComponent(searchQuery)}` : "/search"}
supabase\migrations\20251124202249_add_product_images_support.sql:1:-- Create product_images table for multiple images per product
supabase\migrations\20251124202249_add_product_images_support.sql:2:CREATE TABLE IF NOT EXISTS product_images (
supabase\migrations\20251124202249_add_product_images_support.sql:13:CREATE INDEX IF NOT EXISTS idx_product_images_product_id ON product_images(product_id);
supabase\migrations\20251124202249_add_product_images_support.sql:14:CREATE INDEX IF NOT EXISTS idx_product_images_primary ON product_images(product_id, is_primary) WHERE is_primary = true;
supabase\migrations\20251124202249_add_product_images_support.sql:17:ALTER TABLE product_images ENABLE ROW LEVEL SECURITY;
supabase\migrations\20251124202249_add_product_images_support.sql:20:DROP POLICY IF EXISTS "Anyone can view product images" ON product_images;
supabase\migrations\20251124202249_add_product_images_support.sql:22:  ON product_images FOR SELECT
supabase\migrations\20251124202249_add_product_images_support.sql:25:DROP POLICY IF EXISTS "Sellers can insert their product images" ON product_images;
supabase\migrations\20251124202249_add_product_images_support.sql:27:  ON product_images FOR INSERT
supabase\migrations\20251124202249_add_product_images_support.sql:31:      WHERE products.id = product_images.product_id
supabase\migrations\20251124202249_add_product_images_support.sql:36:DROP POLICY IF EXISTS "Sellers can update their product images" ON product_images;
supabase\migrations\20251124202249_add_product_images_support.sql:38:  ON product_images FOR UPDATE
supabase\migrations\20251124202249_add_product_images_support.sql:42:      WHERE products.id = product_images.product_id
supabase\migrations\20251124202249_add_product_images_support.sql:47:DROP POLICY IF EXISTS "Sellers can delete their product images" ON product_images;
supabase\migrations\20251124202249_add_product_images_support.sql:49:  ON product_images FOR DELETE
supabase\migrations\20251124202249_add_product_images_support.sql:53:      WHERE products.id = product_images.product_id
supabase\migrations\20251124202249_add_product_images_support.sql:63:    UPDATE product_images 
supabase\migrations\20251124202249_add_product_images_support.sql:72:DROP TRIGGER IF EXISTS trigger_ensure_single_primary_image ON product_images;
supabase\migrations\20251124202249_add_product_images_support.sql:74:  BEFORE INSERT OR UPDATE ON product_images
components\shared\search\search-ai-chat-utils.ts:32:      part.type === "tool-searchListings" &&
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:4:-- Drop old search trigger and function
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:6:DROP FUNCTION IF EXISTS public.handle_new_product_search();
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:8:-- Create multi-language full text search function (English + Cyrillic support)
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:9:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:13:  new.search_vector :=
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:14:    setweight(to_tsvector('simple', coalesce(new.title, '')), 'A') ||
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:15:    setweight(to_tsvector('simple', coalesce(new.description, '')), 'B') ||
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:16:    setweight(to_tsvector('simple', coalesce(array_to_string(new.tags, ' '), '')), 'C');
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:24:  FOR EACH ROW EXECUTE PROCEDURE public.handle_new_product_search();
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:26:-- Update existing products to have search_vector
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:27:UPDATE public.products SET search_vector = 
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:28:  setweight(to_tsvector('simple', coalesce(title, '')), 'A') ||
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:29:  setweight(to_tsvector('simple', coalesce(description, '')), 'B') ||
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:30:  setweight(to_tsvector('simple', coalesce(array_to_string(tags, ' '), '')), 'C');
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:32:-- Create GIN index on search_vector for performance (if not exists)
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:33:CREATE INDEX IF NOT EXISTS idx_products_search_vector ON public.products USING GIN (search_vector);
supabase\migrations\20251124195332_add_tags_column_and_bulgarian_search.sql:39:COMMENT ON COLUMN public.products.tags IS 'Product tags for categorization and search (e.g., ["BMW", "car parts", "steering wheel"])';;
supabase\migrations\20251124192642_production_ready.sql:9:-- The extension will remain in public schema but is required for search functionality
supabase\migrations\20251124192642_production_ready.sql:11:-- Step 2: Fix function search_path issues
supabase\migrations\20251124192642_production_ready.sql:12:-- Add explicit search_path to prevent security vulnerabilities
supabase\migrations\20251124192642_production_ready.sql:13:CREATE OR REPLACE FUNCTION public.handle_new_product_search()
supabase\migrations\20251124192642_production_ready.sql:16:  new.search_vector :=
supabase\migrations\20251124192642_production_ready.sql:17:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations\20251124192642_production_ready.sql:18:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B') ||
supabase\migrations\20251124192642_production_ready.sql:19:    setweight(to_tsvector('english', coalesce(new.subcategory, '')), 'C') ||
supabase\migrations\20251124192642_production_ready.sql:20:    setweight(to_tsvector('english', array_to_string(new.tags, ' ')), 'C');
supabase\migrations\20251124192642_production_ready.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:25:-- Step 3: Fix is_admin function search_path
supabase\migrations\20251124192642_production_ready.sql:34:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:36:-- Step 4: Fix protect_sensitive_columns function search_path
supabase\migrations\20251124192642_production_ready.sql:56:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:253:CREATE INDEX IF NOT EXISTS idx_products_search_vector ON public.products USING GIN(search_vector);
supabase\migrations\20251124192642_production_ready.sql:307:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:332:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:347:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251124192642_production_ready.sql:379:COMMENT ON TABLE public.products IS 'Product catalog with search capabilities';
components\layout\header\desktop\standard-header.tsx:11:import { DesktopSearch } from "./desktop-search"
supabase\migrations\20240101000000_initial_schema.sql:4:-- For fuzzy search
supabase\migrations\20240101000000_initial_schema.sql:47:  search_vector tsvector, -- For Full Text Search
supabase\migrations\20240101000000_initial_schema.sql:92:-- Automatically update search_vector on insert/update
supabase\migrations\20240101000000_initial_schema.sql:93:create function public.handle_new_product_search()
supabase\migrations\20240101000000_initial_schema.sql:96:  new.search_vector :=
supabase\migrations\20240101000000_initial_schema.sql:97:    setweight(to_tsvector('english', coalesce(new.title, '')), 'A') ||
supabase\migrations\20240101000000_initial_schema.sql:98:    setweight(to_tsvector('english', coalesce(new.description, '')), 'B');
supabase\migrations\20240101000000_initial_schema.sql:104:  for each row execute procedure public.handle_new_product_search();
components\layout\header\desktop\desktop-search.tsx:20:import { useProductSearch } from "@/hooks/use-product-search"
components\layout\header\desktop\desktop-search.tsx:22:import { buildSearchHref } from "@/components/shared/search/search-context"
components\layout\header\desktop\desktop-search.tsx:25:import { DesktopSearchPopoverPanel } from "./desktop-search-popover-panel"
components\layout\header\desktop\desktop-search.tsx:33:  const searchInputId = "treido-desktop-search-input"
components\layout\header\desktop\desktop-search.tsx:54:  const buildSearchHrefFromQuery = useCallback((searchQuery: string) => buildSearchHref({ query: searchQuery }), [])
components\layout\header\desktop\desktop-search.tsx:70:  const handleSelectSearch = useCallback((search: string) => {
components\layout\header\desktop\desktop-search.tsx:71:    setQuery(search)
components\layout\header\desktop\desktop-search.tsx:72:    saveSearch(search)
components\layout\header\desktop\desktop-search.tsx:74:    router.push(buildSearchHrefFromQuery(search))
components\layout\header\desktop\desktop-search.tsx:104:    <div className="w-full" data-desktop-search>
components\layout\header\desktop\desktop-search.tsx:109:            action={`/${locale}/search`}
components\layout\header\desktop\desktop-search.tsx:111:            className="relative flex h-11 w-full items-center rounded-full border border-search-border bg-search-bg motion-safe:transition-colors motion-safe:duration-fast motion-safe:ease-(--ease-smooth) motion-reduce:transition-none focus-within:border-search-focus-border focus-within:bg-background focus-within:ring-2 focus-within:ring-search-focus-ring/30"
components\layout\header\desktop\desktop-search.tsx:115:              className="absolute left-4 text-search-placeholder pointer-events-none"
components\layout\header\desktop\desktop-search.tsx:118:            <FieldLabel htmlFor={searchInputId} className="sr-only">
components\layout\header\desktop\desktop-search.tsx:119:              {tNav("search")}
components\layout\header\desktop\desktop-search.tsx:122:              id={searchInputId}
components\layout\header\desktop\desktop-search.tsx:124:              type="search"
components\layout\header\desktop\desktop-search.tsx:125:              inputMode="search"
components\layout\header\desktop\desktop-search.tsx:126:              enterKeyHint="search"
components\layout\header\desktop\desktop-search.tsx:128:              placeholder={tNav("searchPlaceholder")}
components\layout\header\desktop\desktop-search.tsx:129:              className="h-full w-full rounded-full border-0 bg-transparent pl-11 pr-24 text-sm text-search-text placeholder:text-search-placeholder focus-visible:border-0 focus-visible:ring-0"
components\layout\header\desktop\desktop-search.tsx:136:              aria-label={tNav("search")}
components\layout\header\desktop\desktop-search.tsx:171:              aria-label={tNav("search")}
components\mobile\category-nav\category-icon-grid.tsx:69:            placeholder={tDrawer("searchPlaceholder")}
components\mobile\category-nav\category-icon-grid.tsx:70:            aria-label={tDrawer("searchAriaLabel")}
components\layout\header\desktop\desktop-search-popover-panel.tsx:13:  () => import("@/components/shared/search/search-ai-chat").then((mod) => mod.SearchAiChat),
components\layout\header\desktop\desktop-search-popover-panel.tsx:125:  onSelectSearch: (search: string) => void
components\layout\header\desktop\desktop-search-popover-panel.tsx:183:                    {product.images?.[0] ? (
components\layout\header\desktop\desktop-search-popover-panel.tsx:185:                        src={product.images[0]}
components\layout\header\desktop\desktop-search-popover-panel.tsx:249:              {trendingSearches.map((search, i) => (
components\layout\header\desktop\desktop-search-popover-panel.tsx:253:                  onClick={() => onSelectSearch(search)}
components\layout\header\desktop\desktop-search-popover-panel.tsx:259:                  <span className="text-sm text-foreground group-hover:text-primary flex-1">{search}</span>
components\layout\header\desktop\desktop-search-popover-panel.tsx:274:              {tSearch("searching")}
designs\archive\treido-screens-2026.pen:152:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:155:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:162:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:2177:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:2180:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:2187:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:2674:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:2677:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:2684:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:3171:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:3174:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:3181:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:3668:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:3671:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:3678:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:4444:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:4447:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:4454:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:4941:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:4944:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:4951:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:5368:          "name": "M375 / /search / Suggestions Overlay",
designs\archive\treido-screens-2026.pen:5438:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:5441:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:5448:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:5865:          "name": "M375 / /search / Results (0 filters)",
designs\archive\treido-screens-2026.pen:5935:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:5938:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:5945:                      "name": "searchText",
designs\archive\treido-screens-2026.pen:6362:          "name": "M375 / /search / Results (filters active)",
designs\archive\treido-screens-2026.pen:6432:                      "name": "searchIcon",
designs\archive\treido-screens-2026.pen:6435:                      "iconFontName": "search",
designs\archive\treido-screens-2026.pen:6442:                      "name": "searchText",
supabase\functions\ai-shopping-assistant\index.ts:516:    // 2) If overlap fails or returns nothing, try searching the name.
supabase\functions\ai-shopping-assistant\index.ts:595:Your job is to extract search filters from the user's message so the server can query the database.
components\layout\header\cart\cart-dropdown.tsx:91:              <Link href="/search">
designs\archive\treido-gold-mobile-exploration.pen:135:                  "content": "Browse (tab)\n☐ Home (/) — Gold\n☐ Categories Index (/categories) — Gold\n☐ Category Feed (/categories/:slug) — Gold\n☐ Subcategory Feed (/categories/:slug/:subslug) — Gold\n☐ Wishlist (/wishlist) — Gold\n☐ Wishlist — Empty\n☐ Shared Wishlist (/wishlist/shared/:token) — Gold\n\nSearch (tab)\n☐ Search Overlay — Gold\n☐ Search Results (/search) — Gold\n☐ Search Results — Empty\n☐ Drawer: Sort — Open\n☐ Drawer: Filters — Open\n☐ Drawer: Categories — Open\n\nProduct & Seller\n☐ Product Detail (/:username/:productSlug) — Gold\n☐ Product Detail — Loading\n☐ Product Detail — Sold\n☐ Seller Profile (/:username) — Gold\n☐ Seller Profile — Reviews\n☐ Seller Profile — Sold (tab)\n\nCart & Checkout (no tabs)\n☐ Cart (/cart) — Gold\n☐ Cart — Empty\n☐ Checkout (/checkout) — Gold\n☐ Checkout Success (/checkout/success) — Gold\n\nAuth (no tabs)\n☐ Welcome (/auth/welcome)\n☐ Login (/auth/login)\n☐ Sign Up (/auth/sign-up)\n☐ Forgot Password (/auth/forgot-password)\n☐ Reset Password (/auth/reset-password)\n☐ Auth Error (/auth/error)\n\nOnboarding (no tabs)\n☐ Start (/onboarding)\n☐ Account Type (/onboarding/account-type)\n☐ Profile (/onboarding/profile)\n☐ Interests (/onboarding/interests)\n☐ Business Profile (/onboarding/business-profile)\n☐ Complete (/onboarding/complete)\n\nSell (wizard; no tabs)\n☐ Photos (/sell)\n☐ Details (/sell)\n☐ Category Picker (drawer)\n☐ Pricing (/sell)\n☐ Shipping (/sell)\n☐ Review (/sell)\n☐ Published (/sell)\n\nChat (tab)\n☐ Inbox (/chat)\n☐ Inbox — Empty\n☐ Conversation (/chat/:conversationId)\n☐ Conversation — With images\n\nProfile/Account (tab)\n☐ Account Overview (/account)\n☐ Orders (/account/orders)\n☐ Order Detail (/account/orders/:id)\n☐ Addresses (/account/addresses)\n☐ Payments (/account/payments)\n☐ Notifications (/account/notifications)\n☐ Settings (/account/settings)\n☐ Security (/account/security)\n☐ Profile (/account/profile)\n\nDark variants\n☐ Home — Dark\n☐ Search Results — Dark\n☐ Product Detail — Dark\n☐ Seller Profile — Dark\n☐ Filters Drawer — Dark",
designs\archive\treido-gold-mobile-exploration.pen:238:                  "name": "searchPill",
designs\archive\treido-gold-mobile-exploration.pen:253:                      "name": "searchIcon",
designs\archive\treido-gold-mobile-exploration.pen:256:                      "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:522:                      "name": "searchIcon",
designs\archive\treido-gold-mobile-exploration.pen:525:                      "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:533:                      "name": "searchLbl",
designs\archive\treido-gold-mobile-exploration.pen:2480:                  "name": "search",
designs\archive\treido-gold-mobile-exploration.pen:2495:                      "name": "searchIcon",
designs\archive\treido-gold-mobile-exploration.pen:2498:                      "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:3172:                          "name": "search",
designs\archive\treido-gold-mobile-exploration.pen:3187:                              "name": "searchIcon",
designs\archive\treido-gold-mobile-exploration.pen:3190:                              "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:3198:                              "name": "searchText",
designs\archive\treido-gold-mobile-exploration.pen:4388:              "name": "searchTitle",
designs\archive\treido-gold-mobile-exploration.pen:4415:                      "name": "searchHeader",
designs\archive\treido-gold-mobile-exploration.pen:4447:                              "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:4666:                              "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:4690:                  "name": "M375 / /search / Search Results  Gold",
designs\archive\treido-gold-mobile-exploration.pen:4819:                  "name": "M375 / /search / Search Results  Gold  Empty",
designs\archive\treido-gold-mobile-exploration.pen:4868:                              "content": "Try a different search\nor clear filters."
designs\archive\treido-gold-mobile-exploration.pen:5310:                  "name": "M375 / /search / Search Results  Gold  Dark",
designs\archive\treido-gold-mobile-exploration.pen:12130:                          "name": "search",
designs\archive\treido-gold-mobile-exploration.pen:12148:                              "iconFontName": "search",
designs\archive\treido-gold-mobile-exploration.pen:12484:                          "name": "search",
designs\archive\treido-gold-mobile-exploration.pen:12502:                              "iconFontName": "search",
components\dropdowns\wishlist-dropdown.tsx:72:              <Link href="/search">
designs\archive\treido-design-system-2026.pen:697:                          "name": "searchIcon",
designs\archive\treido-design-system-2026.pen:700:                          "iconFontName": "search",
lib\ai\tools\search-listings.ts:8:export async function searchListings(input: SearchListingsInput): Promise<ListingCard[]> {
lib\ai\tools\search-listings.ts:17:  const searchPattern = `%${query}%`
lib\ai\tools\search-listings.ts:31:    .or(`title.ilike.${searchPattern},description.ilike.${searchPattern}`)
lib\ai\tools\search-listings.ts:38:    const normalizedImages = Array.isArray(p.images) ? p.images : []
lib\ai\tools\get-listing.ts:39:  const normalizedImages = Array.isArray(product.images) ? product.images : []
lib\ai\tools\assistant-tools.ts:10:import { searchListings } from "@/lib/ai/tools/search-listings"
lib\ai\tools\assistant-tools.ts:14:  searchListings: tool({
lib\ai\tools\assistant-tools.ts:19:      return searchListings(input)
scripts\ts-safety-gate.baseline.json:75:    "file": "app/[locale]/(main)/search/_lib/search-products.ts",
scripts\ts-safety-gate.baseline.json:81:    "file": "app/[locale]/(main)/search/_lib/search-products.ts",
scripts\ts-safety-gate.baseline.json:87:    "file": "app/[locale]/(main)/search/_lib/search-products.ts",
scripts\ts-safety-gate.baseline.json:93:    "file": "app/[locale]/(main)/search/_lib/search-products.ts",
scripts\ts-safety-gate.baseline.json:99:    "file": "app/[locale]/(main)/search/_lib/search-products.ts",
designs\archive\exports-2026-02-23\treido-v2.pen:52:          "content": "Route map: generated from designs/route-inventory.json → docs/generated/pencil-route-map.md  ·  Tip: in the layer search, type 'Screens (M375)' or 'M375 / /checkout' to jump.",
designs\archive\exports-2026-02-23\treido-v2.pen:72:          "content": "Search these in the layer panel:\n• Browse → Browse (tab)\n• Categories → M375 / /categories\n• Search → M375 / /search\n• Product (PDP) → M375 / /:username/:productSlug\n• Cart → M375 / /cart\n• Checkout → M375 / /checkout\n• Wishlist → M375 / /wishlist\n• Auth → M375 / /auth\n• Onboarding → M375 / /onboarding\n• Account/Profile → M375 / /account\n• Sell → M375 / /sell\n• Chat → M375 / /chat\n• Desktop-only → M375 / /admin, M375 / /dashboard",
designs\archive\exports-2026-02-23\treido-v2.pen:172:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:175:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:182:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:2272:                  "name": "searchPill",
designs\archive\exports-2026-02-23\treido-v2.pen:2287:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:2290:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:2297:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:2566:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:3947:                      "name": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:3962:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:3965:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:3972:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:4617:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:4783:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:4786:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:4793:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:5280:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:5283:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:5290:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:5777:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:5780:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:5787:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:6274:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:6277:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:6284:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:6771:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:6774:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:6781:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:7268:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:7271:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:7278:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:7715:              "name": "M375 / /search / Search Results",
designs\archive\exports-2026-02-23\treido-v2.pen:7785:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-v2.pen:7788:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:7795:                          "name": "searchText",
designs\archive\exports-2026-02-23\treido-v2.pen:27635:                              "iconFontName": "search"
designs\archive\exports-2026-02-23\treido-v2.pen:27739:                              "iconFontName": "search"
designs\archive\exports-2026-02-23\treido-v2.pen:30148:          "name": "M375 / /search / Search Results v2",
designs\archive\exports-2026-02-23\treido-v2.pen:30161:              "name": "searchHeader",
designs\archive\exports-2026-02-23\treido-v2.pen:30191:                  "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-v2.pen:30305:              "name": "searchFilter",
designs\archive\exports-2026-02-23\treido-v2.pen:30339:                      "name": "searchCard1",
designs\archive\exports-2026-02-23\treido-v2.pen:30354:                      "name": "searchCard2",
designs\archive\exports-2026-02-23\treido-v2.pen:30373:              "name": "searchNav",
scripts\scan-tailwind-semantic-tokens.mjs:45:  "search",
scripts\scan-mobile-chrome-consistency.mjs:19:  "app/[locale]/(main)/search/_components/mobile-seller-filter-controls.tsx",
scripts\scan-mobile-chrome-consistency.mjs:29:  "app/[locale]/_components/search/mobile-search-overlay.tsx",
scripts\scan-mobile-chrome-consistency.mjs:76:      "app/[locale]/(main)/search/_components/mobile-seller-filter-controls.tsx",
components\shared\product\card\metadata.ts:104:  if (input.images) quickView.images = input.images
designs\archive\exports-2026-02-23\treido-screens-2026.pen:152:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:155:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:162:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2177:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2180:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2187:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2674:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2677:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:2684:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3171:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3174:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3181:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3668:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3671:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:3678:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4444:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4447:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4454:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4941:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4944:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:4951:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5368:          "name": "M375 / /search / Suggestions Overlay",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5438:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5441:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5448:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5865:          "name": "M375 / /search / Results (0 filters)",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5935:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5938:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:5945:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:6362:          "name": "M375 / /search / Results (filters active)",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:6432:                      "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:6435:                      "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-screens-2026.pen:6442:                      "name": "searchText",
designs\archive\exports-2026-02-23\treido-design-system-2026.pen:697:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-design-system-2026.pen:700:                          "iconFontName": "search",
designs\archive\exports-2026-02-23\treido-commerce-screens.pen:697:                          "name": "searchIcon",
designs\archive\exports-2026-02-23\treido-commerce-screens.pen:700:                          "iconFontName": "search",
designs\AGENTS.md:27:5. **Components first:** perfect the marketplace primitives (product card, bottom nav, header/search, chips, filter bar) before you design lots of screens.
designs\AGENTS.md:79:- `Header / Browse` (logo + search trigger + quick actions)
designs\AGENTS.md:95:1. Lock the primitives (card, header/search, bottom nav, drawer filters) in Pencil.
scripts\generate-pencil-route-map.mjs:80:  // Browse/search style pages.
scripts\generate-pencil-route-map.mjs:83:    route === "/search" ||
components\shared\product\quick-view\quick-view-image-gallery.tsx:57:  }, [images])
supabase\migrations\20251203131238_fix_rls_security_and_performance.sql:23:-- Full-text search GIN index
supabase\migrations\20251203131238_fix_rls_security_and_performance.sql:24:CREATE INDEX IF NOT EXISTS idx_products_search_vector 
supabase\migrations\20251203131238_fix_rls_security_and_performance.sql:25:  ON public.products USING GIN(search_vector);
supabase\migrations\20251203131238_fix_rls_security_and_performance.sql:27:-- Trigram index for fuzzy search
supabase\migrations\20251202131441_fix_function_search_path_security.sql:1:-- Fix security vulnerability: Set immutable search_path for functions
supabase\migrations\20251202131441_fix_function_search_path_security.sql:2:-- This prevents SQL injection via search path manipulation
supabase\migrations\20251202131441_fix_function_search_path_security.sql:5:ALTER FUNCTION public.handle_new_user() SET search_path = public;
supabase\migrations\20251202131441_fix_function_search_path_security.sql:8:ALTER FUNCTION public.check_not_own_product() SET search_path = public;
supabase\migrations\20251202131441_fix_function_search_path_security.sql:10:COMMENT ON FUNCTION public.handle_new_user() IS 'Trigger function to create profile when new user signs up. search_path secured.';
supabase\migrations\20251202131441_fix_function_search_path_security.sql:11:COMMENT ON FUNCTION public.check_not_own_product() IS 'Validates user is not reviewing their own product. search_path secured.';;
codex\GOLDEN-STRUCTURE.md:25:│   │   │   │   ├── page.tsx        # Browse/search all products
codex\GOLDEN-STRUCTURE.md:113:│   │   ├── search-bar.tsx
codex\AGENTS.md:17:3. **Scan the codebase** for the patterns described. Don't guess — grep, search, read files.
codex\AGENTS.md:94:- **grep/search** — use extensively to find patterns before fixing them
app\globals.css:22:  input[type="search"],
app\globals.css:627:  --spacing-search: 2.75rem;
app\globals.css:937:  --color-search-bg: var(--color-muted);
app\globals.css:938:  --color-search-border: var(--color-border);
app\globals.css:939:  --color-search-text: var(--color-foreground);
app\globals.css:940:  --color-search-placeholder: var(--color-muted-foreground);
app\globals.css:941:  --color-search-focus-border: var(--color-primary);
app\globals.css:942:  --color-search-focus-ring: var(--color-primary);
app\sitemap.ts:16:  { path: '/search', priority: 0.8, changeFrequency: 'hourly' as const },
app\legacy-vars.css:70:  --header-search-max-w: 40rem;               /* 640px - search bar max width */
app\legacy-vars.css:94:  --search-sidebar-max-h: calc(100dvh - var(--header-h) - 4rem);
app\[locale]\(admin)\_components\locale-switcher.tsx:27:  const searchParams = useSearchParams()
app\[locale]\(admin)\_components\locale-switcher.tsx:28:  const search = searchParams?.toString()
app\[locale]\(admin)\_components\locale-switcher.tsx:29:  const href = search ? `${pathname}?${search}` : pathname
app\[locale]\(account)\not-found.tsx:32:        <Link href="/account/orders">{t("searchProducts")}</Link>
app\auth\confirm\route.ts:21:function resolveLocaleFromRequest(searchParams: URLSearchParams, nextPath: string): string {
app\auth\confirm\route.ts:22:  const qpLocale = searchParams.get("locale")
app\auth\confirm\route.ts:129:  const { searchParams, origin } = new URL(request.url)
app\auth\confirm\route.ts:132:  const code = searchParams.get("code")
app\auth\confirm\route.ts:133:  const token_hash = searchParams.get("token_hash")
app\auth\confirm\route.ts:134:  const type = searchParams.get("type") as EmailOtpType | null
app\auth\confirm\route.ts:135:  const next = safeNextPath(searchParams.get("next"))
app\auth\confirm\route.ts:136:  const locale = resolveLocaleFromRequest(searchParams, next)
app\auth\callback\route.ts:12:    const { searchParams, origin } = new URL(request.url)
app\auth\callback\route.ts:13:    const code = searchParams.get("code")
app\auth\callback\route.ts:15:    const next = safeNextPath(searchParams.get("next"))
app\[locale]\(admin)\admin\docs\_components\docs-table.tsx:29:  search: string
app\[locale]\(admin)\admin\docs\_components\docs-table.tsx:44:  search,
app\[locale]\(admin)\admin\docs\_components\docs-table.tsx:73:            placeholder={t("filters.searchPlaceholder")}
app\[locale]\(admin)\admin\docs\_components\docs-table.tsx:74:            value={search}
app\[locale]\(admin)\admin\docs\_components\docs-content.tsx:23:  const [search, setSearch] = useState("")
app\[locale]\(admin)\admin\docs\_components\docs-content.tsx:33:    const matchesSearch = doc.title.toLowerCase().includes(search.toLowerCase())
app\[locale]\(admin)\admin\docs\_components\docs-content.tsx:158:        search={search}
designs\archive\treido-commerce-screens.pen:152:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:155:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:162:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:2128:                  "name": "searchPill",
designs\archive\treido-commerce-screens.pen:2143:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:2146:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:2153:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:2422:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:3780:                      "name": "search",
designs\archive\treido-commerce-screens.pen:3795:                          "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:3798:                          "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:3805:                          "name": "searchText",
designs\archive\treido-commerce-screens.pen:4450:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:4539:                  "name": "searchPill",
designs\archive\treido-commerce-screens.pen:4554:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:4557:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:4564:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:4746:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:6307:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:6310:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:6317:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:7888:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:7891:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:7898:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:8385:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:8388:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:8395:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:8882:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:8885:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:8892:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:11035:          "name": "M375 / /search / Search",
designs\archive\treido-commerce-screens.pen:11105:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:11108:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:11115:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:11703:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:11706:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:11713:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:12301:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:12304:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:12311:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:12798:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:12801:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:12808:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:13295:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:13298:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:13305:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:13792:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:13795:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:13802:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:14018:                      "content": "Browse categories or search to get started.",
designs\archive\treido-commerce-screens.pen:14124:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:14127:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:14134:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:16759:          "name": "M375 / /search / Search  No results",
designs\archive\treido-commerce-screens.pen:16829:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:16832:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:16839:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:17091:          "name": "M375 / /search / Search  Filters",
designs\archive\treido-commerce-screens.pen:17161:                      "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:17164:                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:17171:                      "name": "searchText",
designs\archive\treido-commerce-screens.pen:17795:              "name": "M375 / /search / Search Results  Gold",
designs\archive\treido-commerce-screens.pen:18500:                      "iconFontName": "search"
designs\archive\treido-commerce-screens.pen:18662:                      "iconFontName": "search"
designs\archive\treido-commerce-screens.pen:18850:                      "iconFontName": "search"
designs\archive\treido-commerce-screens.pen:19504:              "name": "M375 / /search / Search Results  Gold  Empty",
designs\archive\treido-commerce-screens.pen:19553:                          "iconFontName": "search"
designs\archive\treido-commerce-screens.pen:20020:                              "name": "searchIcon",
designs\archive\treido-commerce-screens.pen:20023:                              "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:20254:                                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:20291:                                      "iconFontName": "search",
designs\archive\treido-commerce-screens.pen:22215:              "name": "M375 / /search / Search Results  Gold  Dark",
app\[locale]\_components\search\mobile-search-overlay.tsx:26:import { useProductSearch } from "@/hooks/use-product-search"
app\[locale]\_components\search\mobile-search-overlay.tsx:27:import { buildSearchHref, type SearchLaunchContext } from "@/components/shared/search/search-context"
app\[locale]\_components\search\mobile-search-overlay.tsx:31:  () => import("@/components/shared/search/search-ai-chat").then((mod) => mod.SearchAiChat),
app\[locale]\_components\search\mobile-search-overlay.tsx:46:  /** Optional category context preserved when launching search results */
app\[locale]\_components\search\mobile-search-overlay.tsx:47:  searchContext?: SearchLaunchContext
app\[locale]\_components\search\mobile-search-overlay.tsx:56: * A full-screen search overlay optimized for mobile devices with:
app\[locale]\_components\search\mobile-search-overlay.tsx:57: * - Live product search with debouncing
app\[locale]\_components\search\mobile-search-overlay.tsx:58: * - Recent searches with localStorage persistence
app\[locale]\_components\search\mobile-search-overlay.tsx:59: * - Trending searches
app\[locale]\_components\search\mobile-search-overlay.tsx:67:  searchContext,
app\[locale]\_components\search\mobile-search-overlay.tsx:70:  const searchInputId = React.useId()
app\[locale]\_components\search\mobile-search-overlay.tsx:97:  // Use shared search hook
app\[locale]\_components\search\mobile-search-overlay.tsx:159:          ...(searchContext ? { context: searchContext } : {}),
app\[locale]\_components\search\mobile-search-overlay.tsx:163:    [saveSearch, closeDrawer, router, searchContext]
app\[locale]\_components\search\mobile-search-overlay.tsx:209:          aria-label={tSearch("search")}
app\[locale]\_components\search\mobile-search-overlay.tsx:220:        title={tSearch("search")}
app\[locale]\_components\search\mobile-search-overlay.tsx:222:        contentAriaLabel={tSearch("searchDescription")}
app\[locale]\_components\search\mobile-search-overlay.tsx:244:              <form onSubmit={handleSubmit} className="relative" role="search" aria-label={tSearch("search")}>
app\[locale]\_components\search\mobile-search-overlay.tsx:250:                <FieldLabel htmlFor={searchInputId} className="sr-only">
app\[locale]\_components\search\mobile-search-overlay.tsx:251:                  {tSearch("searchFieldLabel")}
app\[locale]\_components\search\mobile-search-overlay.tsx:255:                  id={searchInputId}
app\[locale]\_components\search\mobile-search-overlay.tsx:256:                  type="search"
app\[locale]\_components\search\mobile-search-overlay.tsx:257:                  inputMode="search"
app\[locale]\_components\search\mobile-search-overlay.tsx:258:                  enterKeyHint="search"
app\[locale]\_components\search\mobile-search-overlay.tsx:259:                  placeholder={tNav("searchPlaceholder")}
app\[locale]\_components\search\mobile-search-overlay.tsx:267:                  aria-label={tSearch("searchFieldLabel")}
app\[locale]\_components\search\mobile-search-overlay.tsx:293:            <DrawerBody className="px-0 py-0" aria-label={tSearch("search")}>
app\[locale]\_components\search\mobile-search-overlay.tsx:302:                    <span>{tSearch("searching")}</span>
app\[locale]\_components\search\mobile-search-overlay.tsx:330:                            {product.images?.[0] ? (
app\[locale]\_components\search\mobile-search-overlay.tsx:332:                                src={product.images[0]}
app\[locale]\_components\search\mobile-search-overlay.tsx:370:                    <section aria-labelledby="recent-searches-heading">
app\[locale]\_components\search\mobile-search-overlay.tsx:373:                          id="recent-searches-heading"
app\[locale]\_components\search\mobile-search-overlay.tsx:389:                        {recentSearches.map((search) => (
app\[locale]\_components\search\mobile-search-overlay.tsx:391:                            key={search}
app\[locale]\_components\search\mobile-search-overlay.tsx:393:                            onClick={() => handleSearch(search)}
app\[locale]\_components\search\mobile-search-overlay.tsx:397:                            <span className="truncate">{search}</span>
app\[locale]\_components\search\mobile-search-overlay.tsx:405:                    <section aria-labelledby="trending-searches-heading">
app\[locale]\_components\search\mobile-search-overlay.tsx:407:                        id="trending-searches-heading"
app\[locale]\_components\search\mobile-search-overlay.tsx:414:                        {trendingSearches.map((search) => (
app\[locale]\_components\search\mobile-search-overlay.tsx:416:                            key={search}
app\[locale]\_components\search\mobile-search-overlay.tsx:418:                            onClick={() => handleSearch(search)}
app\[locale]\_components\search\mobile-search-overlay.tsx:422:                            <span className="truncate">{search}</span>
app\[locale]\(account)\account\billing\page.tsx:87:      products: product ? { id: product.id, title: product.title, images: product.images || [] } : undefined
app\[locale]\(account)\account\_components\account-recent-activity.tsx:136:                    if (Array.isArray(products)) return products[0]?.images?.[0]
app\[locale]\(account)\account\_components\account-recent-activity.tsx:137:                    return products.images?.[0]
app\[locale]\(account)\account\_components\account-recent-activity.tsx:195:                  if (Array.isArray(products)) return products[0]?.images?.[0]
app\[locale]\(account)\account\_components\account-recent-activity.tsx:196:                  return products.images?.[0]
app\[locale]\(account)\account\_components\account-recent-activity.tsx:267:                    {product.images?.[0] ? (
app\[locale]\(account)\account\_components\account-recent-activity.tsx:269:                        src={product.images[0]}
app\[locale]\(account)\account\_components\account-recent-activity.tsx:306:                  {product.images?.[0] ? (
app\[locale]\(account)\account\_components\account-recent-activity.tsx:308:                      src={product.images[0]}
supabase\migrations\20251204194749_real_estate_attributes_location.sql:21:    -- Sofia Districts (most common search)
app\[locale]\(account)\account\billing\billing-history-tabs.tsx:239:                              {boost.products?.images?.[0] && (
app\[locale]\(account)\account\billing\billing-history-tabs.tsx:241:                                  src={boost.products.images[0]}
app\api\sales\export\route.ts:41:    const { searchParams } = new URL(req.url)
app\api\sales\export\route.ts:43:      from: searchParams.get("from"),
app\api\sales\export\route.ts:44:      to: searchParams.get("to"),
app\[locale]\(account)\account\plans\plans-content.tsx:110:  boostFootnote: 'Boosted listings appear in "Recommended" and rank higher in search.',
app\[locale]\(account)\account\plans\plans-content.tsx:173:  const searchParams = useSearchParams()
app\[locale]\(account)\account\plans\plans-content.tsx:190:    if (searchParams.get("success") === "true") {
app\[locale]\(account)\account\plans\plans-content.tsx:193:    } else if (searchParams.get("canceled") === "true") {
app\[locale]\(account)\account\plans\plans-content.tsx:197:  }, [searchParams, copy])
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:45:  const searchParams = useSearchParams()
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:65:      search: locale === "bg" ? "Търсене" : "Search",
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:66:      searchPlaceholder: locale === "bg" ? "Търси в любими..." : "Search wishlist...",
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:79:    const params = new URLSearchParams(searchParams?.toString() || "")
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:81:    // Handle search query
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:99:  }, [searchParams, basePathname])
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar.tsx:122:  // Debounced search
app\[locale]\(account)\account\selling\selling-products-mobile-list.tsx:93:              {product.images?.[0] && product.images[0].startsWith("http") ? (
app\[locale]\(account)\account\selling\selling-products-mobile-list.tsx:94:                <Image src={product.images[0]} alt={product.title} fill className="object-cover" sizes="80px" />
app\[locale]\(account)\account\selling\selling-products-list.tsx:19:  const searchParams = useSearchParams()
app\[locale]\(account)\account\selling\selling-products-list.tsx:88:    const isSuccess = searchParams.get("boost_success") === "true"
app\[locale]\(account)\account\selling\selling-products-list.tsx:89:    const isCanceled = searchParams.get("boost_canceled") === "true"
app\[locale]\(account)\account\selling\selling-products-list.tsx:93:    const productId = searchParams.get("product_id")
app\[locale]\(account)\account\selling\selling-products-list.tsx:124:  }, [searchParams, router, tBoost])
app\[locale]\(account)\account\selling\selling-products-desktop-list.tsx:86:              {product.images?.[0] && product.images[0].startsWith("http") ? (
app\[locale]\(account)\account\selling\selling-products-desktop-list.tsx:88:                  src={product.images[0]}
supabase\migrations\20251204200153_services_l2_education_tech_business.sql:84:-- Research Services
supabase\migrations\20251204200153_services_l2_education_tech_business.sql:85:('b1c2d3e4-2008-4000-8000-000000000010', 'Research Services', 'Изследователски услуги', 'business-research', 'b1c2d3e4-1111-4000-8000-000000000007', '🔬', 10),
app\api\products\search\route.ts:14:    const { searchParams } = new URL(request.url)
app\api\products\search\route.ts:16:      q: searchParams.get("q"),
app\api\products\search\route.ts:17:      limit: searchParams.get("limit") ?? undefined,
app\api\products\search\route.ts:32:    // Use ILIKE for flexible search (supports Cyrillic/Bulgarian)
app\api\products\search\route.ts:33:    const searchPattern = `%${query}%`
app\api\products\search\route.ts:48:      .or(`title.ilike.${searchPattern},description.ilike.${searchPattern}`)
app\api\products\search\route.ts:54:      return errorResponse("Failed to search products", 500, { products: [], hasMore: false })
app\api\products\search\route.ts:59:      const normalizedImages = Array.isArray(p.images) ? p.images : []
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\mobile-wishlist-toolbar.tsx:15:import { WishlistSearchClearButton } from "./wishlist-search-clear-button"
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\mobile-wishlist-toolbar.tsx:52:          placeholder={labels.searchPlaceholder}
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\mobile-wishlist-toolbar.tsx:54:          aria-label={labels.search}
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\mobile-wishlist-toolbar.tsx:58:            ariaLabel={locale === "bg" ? "Изчисти търсенето" : "Clear search"}
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\desktop-wishlist-toolbar.tsx:25:import { WishlistSearchClearButton } from "./wishlist-search-clear-button"
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\desktop-wishlist-toolbar.tsx:68:          placeholder={labels.searchPlaceholder}
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\desktop-wishlist-toolbar.tsx:70:          aria-label={labels.search}
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\desktop-wishlist-toolbar.tsx:74:            ariaLabel={locale === "bg" ? "Изчисти търсенето" : "Clear search"}
app\[locale]\(account)\account\page.tsx:119:    ...(p.images ? { images: p.images } : {}),
app\[locale]\(account)\account\page.tsx:132:      product_image: product?.images?.[0] ?? null,
app\api\products\quick-view\route.ts:24:    const { searchParams } = new URL(request.url)
app\api\products\quick-view\route.ts:26:      username: searchParams.get("username"),
app\api\products\quick-view\route.ts:27:      productSlug: searchParams.get("productSlug"),
app\api\products\quick-view\route.ts:41:    const imagesFromProductImages = [...(product.product_images ?? [])]
app\api\products\quick-view\route.ts:46:    const imagesFromArray = (product.images ?? []).filter(
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\account-wishlist-toolbar.types.ts:19:  search: string
app\[locale]\(account)\account\wishlist\_components\account-wishlist-toolbar\account-wishlist-toolbar.types.ts:20:  searchPlaceholder: string
app\[locale]\(account)\account\selling\edit\edit-product-client.tsx:526:                {product?.images?.[0] ? (
app\[locale]\(account)\account\selling\edit\edit-product-client.tsx:528:                    src={product.images[0]}
app\api\products\newest\route.ts:46:function parseProductsNewestQuery(searchParams: URLSearchParams): ParseResult<ParsedProductsNewestQuery> {
app\api\products\newest\route.ts:48:    category: searchParams.get("category") ?? undefined,
app\api\products\newest\route.ts:49:    sort: searchParams.get("sort") ?? undefined,
app\api\products\newest\route.ts:50:    type: searchParams.get("type") ?? undefined,
app\api\products\newest\route.ts:51:    city: searchParams.get("city") ?? undefined,
app\api\products\newest\route.ts:52:    nearby: searchParams.get("nearby") ?? undefined,
app\api\products\newest\route.ts:53:    minPrice: searchParams.get("minPrice") ?? undefined,
app\api\products\newest\route.ts:54:    maxPrice: searchParams.get("maxPrice") ?? undefined,
app\api\products\newest\route.ts:55:    minRating: searchParams.get("minRating") ?? undefined,
app\api\products\newest\route.ts:56:    availability: searchParams.get("availability") ?? undefined,
app\api\products\newest\route.ts:57:    deals: searchParams.get("deals") ?? undefined,
app\api\products\newest\route.ts:70:function parseAttributeFilters(searchParams: URLSearchParams): ParseResult<Record<string, string[]>> {
app\api\products\newest\route.ts:76:  for (const key of searchParams.keys()) {
app\api\products\newest\route.ts:78:    rawAttributeFilters[key] = searchParams.getAll(key)
app\api\products\newest\route.ts:127:  product_images?: Array<{
app\api\products\newest\route.ts:169:  const searchParams = request.nextUrl.searchParams
app\api\products\newest\route.ts:170:  const { page, limit: safeLimit, offset } = parsePaginationParams(searchParams)
app\api\products\newest\route.ts:172:  const parsedQuery = parseProductsNewestQuery(searchParams)
app\api\products\newest\route.ts:188:  const parsedAttributeFilters = parseAttributeFilters(searchParams)
app\api\products\feed\route.ts:139:  const searchParams = request.nextUrl.searchParams
app\api\products\feed\route.ts:141:    type: searchParams.get("type") ?? undefined,
app\api\products\feed\route.ts:142:    sort: searchParams.get("sort") ?? undefined,
app\api\products\feed\route.ts:143:    category: searchParams.get("category") ?? undefined,
app\api\products\feed\route.ts:144:    city: searchParams.get("city") ?? undefined,
app\api\products\feed\route.ts:145:    filters: searchParams.get("filters") ?? undefined,
app\api\products\feed\route.ts:157:  const { page, limit: safeLimit, offset } = parsePaginationParams(searchParams)
supabase\migrations\20251204202618_expand_software_category_l3_depth_part2.sql:176:('AI-Powered Search', 'AI търсене', 'ai-search', '🔎', v_parent_id, 7);
app\api\products\count\route.ts:129:    const searchTerm = `%${query.trim()}%`
app\api\products\count\route.ts:130:    countQuery = countQuery.or(`title.ilike.${searchTerm},description.ilike.${searchTerm}`)
app\[locale]\(account)\account\wishlist\_components\account-wishlist-grid\wishlist-empty-state.tsx:25:          <Link href="/search">
supabase\migrations\20251204202507_expand_software_category_l3_depth_part1.sql:91:('Roam Research', 'Roam Research', 'notes-roam', '🧠', v_parent_id, 5),
app\[locale]\_components\error-boundary-ui.tsx:16:  | "search" 
app\[locale]\_components\error-boundary-ui.tsx:28:  search: MagnifyingGlass,
app\[locale]\_components\empty-state-cta.tsx:14:  | "no-search"        // Search returned no results
app\[locale]\_components\empty-state-cta.tsx:31:  searchQuery?: string
app\[locale]\_components\empty-state-cta.tsx:57:  "no-search": {
app\[locale]\_components\empty-state-cta.tsx:109:  searchQuery,
app\[locale]\_components\empty-state-cta.tsx:126:  if (searchQuery && variant === "no-search") {
app\[locale]\_components\empty-state-cta.tsx:128:      ? `Няма резултати за "${searchQuery}". Опитай с други думи.`
app\[locale]\_components\empty-state-cta.tsx:129:      : `No results for "${searchQuery}". Try different keywords.`
app\[locale]\(account)\account\wishlist\wishlist-content.tsx:84:    // Filter by search query
app\[locale]\(account)\account\wishlist\wishlist-content.tsx:108:      : "Try adjusting your filters or search",
app\[locale]\(account)\account\wishlist\page.tsx:11:  searchParams: Promise<{
app\[locale]\(account)\account\wishlist\page.tsx:33:export default async function WishlistPage({ params, searchParams }: WishlistPageProps) {
app\[locale]\(account)\account\wishlist\page.tsx:37:  const { category: categoryFilter, q: searchQuery, stock: stockFilter } = await searchParams
app\[locale]\(account)\account\wishlist\page.tsx:114:      image: product?.images?.[0] || "/placeholder.svg",
app\[locale]\(account)\account\wishlist\page.tsx:159:        initialSearchQuery={searchQuery || ""}
app\api\products\category\[slug]\route.ts:35:    const { searchParams } = new URL(request.url)
app\api\products\category\[slug]\route.ts:38:      limit: searchParams.get("limit") ?? undefined,
app\api\products\category\[slug]\route.ts:39:      zone: searchParams.get("zone") ?? undefined,
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:49:  const searchParams = useSearchParams()
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:85:      const params = new URLSearchParams(searchParams?.toString() || "")
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:104:    [basePathname, searchParams],
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:170:      {/* Desktop: Tabs + search */}
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:206:            placeholder={t("ordersPage.searchPlaceholder")}
app\[locale]\(account)\account\orders\_components\account-orders-toolbar.tsx:208:            aria-label={tCommon("search")}
app\[locale]\(account)\account\settings\page.tsx:12:  searchParams: Promise<{ email_changed?: string }>
app\[locale]\(account)\account\settings\page.tsx:30:  searchParams,
app\[locale]\(account)\account\settings\page.tsx:33:  const sp = await searchParams
app\[locale]\(account)\account\sales\_components\sales-table.tsx:80:                    {sale.product?.images?.[0] && sale.product.images[0].startsWith("http") ? (
app\[locale]\(account)\account\sales\_components\sales-table.tsx:82:                        src={sale.product.images[0]}
app\[locale]\(account)\account\orders\_components\account-orders-grid-mobile.tsx:73:        const primaryImage = primaryProduct?.images?.[0] ?? null
app\[locale]\(account)\account\orders\_components\account-orders-grid-mobile.tsx:181:                      const image = product?.images?.[0] || "/placeholder.svg"
app\[locale]\(account)\account\orders\_components\account-orders-grid-desktop.tsx:92:                        const image = item.product?.images?.[0] || "/placeholder.svg"
app\[locale]\(account)\account\orders\_components\account-orders-grid-desktop.tsx:182:                          const image = product?.images?.[0] || "/placeholder.svg"
app\[locale]\_components\category-browse-drawer.tsx:40: * Sellers tab: top sellers list with avatars, search, "view all" link.
app\[locale]\_components\category-browse-drawer.tsx:173:    router.push("/search")
app\[locale]\_components\category-browse-drawer.tsx:214:  // Reset search and tab on open/category change
app\[locale]\_components\category-browse-drawer.tsx:233:  const searchPlaceholder = browseTab === "sellers"
app\[locale]\_components\category-browse-drawer.tsx:234:    ? t("searchSellersPlaceholder")
app\[locale]\_components\category-browse-drawer.tsx:235:    : t("searchPlaceholder")
app\[locale]\_components\category-browse-drawer.tsx:308:              placeholder={searchPlaceholder}
app\[locale]\_components\category-browse-drawer.tsx:309:              aria-label={searchPlaceholder}
app\[locale]\(account)\account\sales\page.tsx:25:  searchParams: Promise<{
app\[locale]\(account)\account\sales\page.tsx:101:export default async function SalesPage({ params, searchParams }: SalesPageProps) {
app\[locale]\(account)\account\sales\page.tsx:103:  const { period = "30d", page } = await searchParams
app\[locale]\(account)\account\sales\page.tsx:264:          images: product.images || [],
app\[locale]\(account)\account\orders\[id]\_components\order-detail-items-card.tsx:62:            const firstImage = item.product?.images?.[0]
app\[locale]\_components\category-browse-drawer\category-browse-drawer-listings-tab.tsx:50:      {/* Quick action chips — root view only, no active search */}
app\[locale]\(account)\account\orders\[id]\_components\order-detail-content.tsx:409:                imageSrc={selectedItem.product?.images?.[0]}
app\[locale]\(account)\account\orders\page.tsx:53:  searchParams?: Promise<{ q?: string; status?: string; page?: string }>
app\[locale]\(account)\account\orders\page.tsx:126:export default async function OrdersPage({ params, searchParams }: OrdersPageProps) {
app\[locale]\(account)\account\orders\page.tsx:131:  const sp = (await searchParams) || {}
app\[locale]\_components\app-header.tsx:12:// - default:    Standard pages (hamburger + logo + search below + actions)
app\[locale]\_components\app-header.tsx:13:// - homepage:   Homepage (inline search + category pills on mobile)
app\[locale]\_components\app-header.tsx:30:import { MobileSearchOverlay } from "./search/mobile-search-overlay"
app\[locale]\_components\app-header.tsx:63:  /** Callback to open search overlay */
app\[locale]\_components\app-header.tsx:138:  // Search: contextual header (Phase 4 mobile search revamp)
app\[locale]\_components\app-header.tsx:139:  if (pathWithoutLocale.startsWith("/search")) {
app\[locale]\_components\app-header.tsx:148:  // Known routes start with: /search, /cart, /checkout, /account, /sell, /plans, /auth
app\[locale]\_components\app-header.tsx:151:    "search",
app\[locale]\_components\app-header.tsx:310:  // Handle search open
app\[locale]\_components\app-header.tsx:448:        // Fallback to homepage header (inline search + pills)
app\[locale]\_components\app-header.tsx:488:      {/* Search Overlay - for variants that use internal search state */}
app\[locale]\(chat)\_components\messages-page-client.tsx:81:  const [searchQuery, setSearchQuery] = useState("")
app\[locale]\(chat)\_components\messages-page-client.tsx:86:    searchPlaceholder: t("searchPlaceholder"),
app\[locale]\(chat)\_components\messages-page-client.tsx:107:        {/* Header with back button, title and search */}
app\[locale]\(chat)\_components\messages-page-client.tsx:127:                value={searchQuery}
app\[locale]\(chat)\_components\messages-page-client.tsx:129:                placeholder={labels.searchPlaceholder}
app\[locale]\(chat)\_components\messages-page-client.tsx:140:          searchQuery={searchQuery}
app\[locale]\(chat)\_components\conversation-list.tsx:21:  searchQuery?: string
app\[locale]\(chat)\_components\conversation-list.tsx:28:  searchQuery = "",
app\[locale]\(chat)\_components\conversation-list.tsx:47:  // Filter conversations based on search and filter type
app\[locale]\(chat)\_components\conversation-list.tsx:74:    // Apply search query
app\[locale]\(chat)\_components\conversation-list.tsx:75:    if (searchQuery.trim()) {
app\[locale]\(chat)\_components\conversation-list.tsx:76:      const query = searchQuery.toLowerCase()
app\[locale]\(chat)\_components\conversation-list.tsx:78:        // Use new profile fields for search
app\[locale]\(chat)\_components\conversation-list.tsx:93:  }, [conversations, searchQuery, filter, currentUserId])
app\[locale]\(chat)\_components\conversation-list.tsx:131:          {searchQuery ? t("noSearchResults") : t("noConversations")}
app\[locale]\(chat)\_components\conversation-list.tsx:134:          {searchQuery ? t("tryDifferentSearch") : t("noConversationsHint")}
app\[locale]\(chat)\_components\conversation-list.tsx:260:        {conversation.product?.images?.[0] && (
app\[locale]\(chat)\_components\conversation-list.tsx:263:              src={conversation.product.images[0]}
app\[locale]\(chat)\_components\chat-interface-messages.tsx:82:  const productImage = conversation.product?.images?.[0]
app\[locale]\(checkout)\_components\checkout-success-page-client.tsx:32:  const searchParams = useSearchParams()
app\[locale]\(checkout)\_components\checkout-success-page-client.tsx:33:  const sessionId = searchParams.get("session_id")
app\[locale]\(onboarding)\onboarding\profile\profile-page-client.tsx:21:  const searchParams = useSearchParams()
app\[locale]\(onboarding)\onboarding\profile\profile-page-client.tsx:25:  const accountType = searchParams.get("type") || "personal"
app\[locale]\(onboarding)\onboarding\interests\interests-page-client.tsx:34:  const searchParams = useSearchParams()
app\[locale]\(onboarding)\onboarding\interests\interests-page-client.tsx:37:  const accountType = searchParams.get("type") || "personal"
app\[locale]\(sell)\_components\ui\select-drawer.tsx:30: * Displays a searchable list of options in a drawer.
app\[locale]\(sell)\_components\ui\select-drawer.tsx:95:              placeholder={t("selectDrawer.searchPlaceholder")}
app\[locale]\(sell)\_components\ui\select-drawer.tsx:98:              inputMode="search"
supabase\migrations\20251207213240_restore_software_digital_l3_complete.sql:114:  ('Research Papers', 'ebooks-research', 'Научни статии', 4),
app\[locale]\(sell)\_components\ui\category-selector.types.ts:15:  searchText: string
app\[locale]\(checkout)\layout.tsx:35: * - No navigation, search, or footer
app\[locale]\(onboarding)\onboarding\complete\complete-page-client.tsx:29:  const searchParams = useSearchParams()
app\[locale]\(onboarding)\onboarding\complete\complete-page-client.tsx:33:  const accountType = searchParams.get("type") || "personal"
app\[locale]\(sell)\_components\ui\category-selector.tsx:47:          searchText: `${cat.name} ${cat.name_bg || ""} ${cat.slug}`.toLowerCase(),
app\[locale]\(sell)\_components\ui\category-selector.tsx:78:          searchText: "",
app\[locale]\(sell)\_components\ui\category-selector-shared.tsx:31:        placeholder={compact ? tSell("categoryModal.searchPlaceholderCompact") : tSell("categoryModal.searchPlaceholder")}
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:18:  searchQuery,
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:19:  searchResults,
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:29:  searchQuery: string
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:30:  searchResults: FlatCategory[]
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:42:  if (searchQuery.trim()) {
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:43:    if (searchResults.length === 0) {
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:49:        results={searchResults}
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:82:  const [searchQuery, setSearchQuery] = useState("")
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:134:  const searchResults = useMemo(() => {
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:135:    if (!searchQuery.trim()) return []
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:136:    const query = searchQuery.toLowerCase()
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:138:      .filter((cat) => cat.searchText.includes(query))
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:140:  }, [flatCategories, searchQuery])
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:162:        searchText: `${cat.name} ${cat.name_bg || ""} ${cat.slug}`.toLowerCase(),
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:217:            <CategorySearchInput value={searchQuery} onChange={setSearchQuery} />
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:220:          {!searchQuery.trim() && (
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:262:              searchQuery={searchQuery}
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:263:              searchResults={searchResults}
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:302:          <CategorySearchInput value={searchQuery} onChange={setSearchQuery} compact />
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:308:              searchQuery={searchQuery}
app\[locale]\(sell)\_components\ui\category-selector-modal-content.tsx:309:              searchResults={searchResults}
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:31:// Uses Popover + Command for searchable dropdown with custom brand support
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:73:  const [searchQuery, setSearchQuery] = React.useState("");
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:88:  // Filter brands based on search query
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:90:    if (!searchQuery.trim()) {
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:93:    const query = searchQuery.toLowerCase().trim();
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:112:  }, [searchQuery, brands]);
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:116:    if (!allowCustom || !searchQuery.trim()) return false;
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:117:    const query = searchQuery.toLowerCase().trim();
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:119:  }, [allowCustom, searchQuery, brands]);
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:133:    if (searchQuery.trim()) {
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:134:      onValueChange(null, searchQuery.trim());
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:138:  }, [searchQuery, onValueChange]);
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:159:        placeholder={t("brandCombobox.searchPlaceholder")}
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:160:        value={searchQuery}
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:177:                  {t("brandCombobox.addCustom", { name: searchQuery })}
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:187:        {/* Custom brand option when searching */}
app\[locale]\(sell)\_components\ui\brand-combobox.tsx:197:                  {t("brandCombobox.addCustom", { name: searchQuery })}
app\[locale]\(checkout)\checkout\success\page.tsx:12:  searchParams: Promise<{ session_id?: string }>
app\[locale]\(checkout)\checkout\success\page.tsx:26:export default async function Page({ params, searchParams }: CheckoutSuccessPageProps) {
app\[locale]\(checkout)\checkout\success\page.tsx:29:    searchParams,
app\[locale]\(chat)\chat\page.tsx:25:  searchParams,
app\[locale]\(chat)\chat\page.tsx:28:  searchParams: Promise<{ conversation?: string; seller?: string; product?: string }>
app\[locale]\(chat)\chat\page.tsx:31:  const { conversation, seller, product } = await searchParams
app\[locale]\(sell)\_components\sell-form-unified.tsx:269:    const firstImageObj = form.getValues().images?.[0];
app\[locale]\(sell)\_components\sell-form-provider.tsx:187:        if (parsed.images?.length || parsed.title || parsed.categoryId) {
app\[locale]\(auth)\auth\login\page.tsx:24:  searchParams,
app\[locale]\(auth)\auth\login\page.tsx:27:  searchParams: Promise<{ next?: string; redirect?: string }>
app\[locale]\(auth)\auth\login\page.tsx:30:  const sp = await searchParams
app\[locale]\[username]\[productSlug]\_components\mobile\mobile-gallery.tsx:76:    [images],
app\[locale]\(auth)\auth\error\page.tsx:27:  searchParams,
app\[locale]\(auth)\auth\error\page.tsx:30:  searchParams: Promise<{ error?: string; error_description?: string }>
app\[locale]\(auth)\auth\error\page.tsx:36:  const query = await searchParams
app\[locale]\(main)\_providers\onboarding-provider.tsx:39:const BYPASS_PREFIXES = [ONBOARDING_ROUTE, "/auth", "/api", "/terms", "/privacy", "/customer-service", "/search", "/cart", "/categories"]
app\[locale]\(sell)\_components\layouts\stepper-wrapper.tsx:138:      (values.images?.length ?? 0) > 0 ||
app\[locale]\(sell)\_components\layouts\desktop-layout.tsx:118:                {(formValues.images?.length ?? 0) > 0 && (
app\[locale]\(sell)\_components\fields\photos-field.tsx:211:    const newImages = [...images, ...successfulUploads];
app\[locale]\(sell)\_components\fields\photos-field.tsx:268:      const newImages = [...images];
app\[locale]\(sell)\_components\fields\photos-field.tsx:290:  const hasError = !!errors.images;
app\[locale]\(sell)\_components\fields\photos-field.tsx:339:          {errors.images?.message ? tSell(errors.images.message as never) : null}
app\[locale]\[username]\[productSlug]\page.tsx:141:  const ogImage = Array.isArray(product.images) && product.images?.[0]
app\[locale]\[username]\[productSlug]\page.tsx:142:    ? (product.images[0] as string)
app\[locale]\[username]\[productSlug]\page.tsx:224:    image: (Array.isArray(productData.images) ? productData.images : []) || [],
app\[locale]\[username]\profile-client-tabs.tsx:133:                          image={product.images?.[0] || ""}
app\[locale]\[username]\profile-client-tabs.tsx:155:                        <Link href={`/search?seller=${profile.id}`}>
app\[locale]\[username]\not-found.tsx:26:            href="/search"
app\[locale]\[username]\not-found.tsx:29:            {t("searchProducts")}
app\[locale]\not-found.tsx:51:            href="/search"
app\[locale]\not-found.tsx:54:            {t('searchProducts')}
app\[locale]\(main)\_components\search-controls\sort-select.tsx:22:  const searchParams = useSearchParams()
app\[locale]\(main)\_components\search-controls\sort-select.tsx:34:  const rawSort = searchParams.get('sort')
app\[locale]\(main)\_components\search-controls\sort-select.tsx:44:    const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\_components\search-controls\sort-select.tsx:54:  }, [router, normalizedPathname, searchParams])
app\[locale]\(main)\_components\search-controls\search-pagination.tsx:29:  const searchParams = useSearchParams()
app\[locale]\(main)\_components\search-controls\search-pagination.tsx:38:    const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:19: * SaveSearchButton - Allows users to save the current search for later
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:25:  const searchParams = useSearchParams()
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:29:  // Build search key from current params (exclude pagination/sort).
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:30:  const searchKey = useMemo(() => {
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:36:    const minPrice = searchParams.get("minPrice")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:37:    const maxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:38:    const minRating = searchParams.get("minRating")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:39:    const deals = searchParams.get("deals")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:40:    const verified = searchParams.get("verified")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:49:  }, [query, category, searchParams])
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:53:    if (!searchKey) return
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:56:      const raw = localStorage.getItem("treido-saved-searches")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:58:      setIsSaved(savedSearches.some((s) => s.key === searchKey))
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:62:  }, [searchKey])
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:65:    const key = searchKey
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:75:    const savedSearches = JSON.parse(localStorage.getItem("treido-saved-searches") || "[]")
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:81:      localStorage.setItem("treido-saved-searches", JSON.stringify(savedSearches))
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:94:          minPrice: searchParams.get("minPrice"),
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:95:          maxPrice: searchParams.get("maxPrice"),
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:96:          minRating: searchParams.get("minRating"),
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:97:          deals: searchParams.get("deals"),
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:98:          verified: searchParams.get("verified"),
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:103:      localStorage.setItem("treido-saved-searches", JSON.stringify(savedSearches))
app\[locale]\(main)\_components\search-controls\save-search-button.tsx:114:  // Don't show if no search criteria
app\[locale]\(sell)\sell\orders\seller-orders-client.tsx:404:                            {item.product?.images?.[0] ? (
app\[locale]\(sell)\sell\orders\seller-orders-client.tsx:406:                                src={item.product.images[0]}
app\[locale]\(main)\_components\mobile-home.tsx:18:import { MobileSearchOverlay } from "../../_components/search/mobile-search-overlay"
app\[locale]\(main)\_components\mobile-home.tsx:45:  const [searchOpen, setSearchOpen] = useState(false)
app\[locale]\(main)\_components\mobile-home.tsx:272:        externalOpen={searchOpen}
app\[locale]\(sell)\_actions\sell.ts:236:  const imageRecords = (form.images || []).map((image, index) => ({
app\[locale]\(sell)\_actions\sell.ts:245:    const { error: imagesError } = await supabase.from("product_images").insert(imageRecords)
app\[locale]\(sell)\_actions\sell.ts:339:  const imageUrls = (form.images || []).map((img) => img.url)
app\[locale]\(main)\members\_lib\get-members-page-data.ts:20:export async function getMembersPageData(searchParams: MembersSearchParams) {
app\[locale]\(main)\members\_lib\get-members-page-data.ts:22:  const { filter = "all", sort = "active", page = "1", q } = searchParams
app\[locale]\(main)\members\_lib\get-members-page-data.ts:64:  // Apply search
app\[locale]\(main)\members\_lib\get-members-page-data.ts:121:    searchQuery: q || "",
app\api\assistant\find-similar\route.ts:7:import { searchListings } from "@/lib/ai/tools/search-listings"
app\api\assistant\find-similar\route.ts:57:        "You extract a short marketplace search query from an image. Return a compact query (2-6 words) and optional keywords.",
app\api\assistant\find-similar\route.ts:64:              text: "Look at this product photo and produce a short search query to find similar items in our marketplace.",
app\api\assistant\find-similar\route.ts:72:    const results = await searchListings({
app\[locale]\(main)\members\_components\members-page-client.tsx:44:  searchQuery: string
app\[locale]\(main)\members\_components\members-page-client.tsx:55:    searchByName: "Търси по име",
app\[locale]\(main)\members\_components\members-page-client.tsx:56:    searchByNamePlaceholder: "Търси по име...",
app\[locale]\(main)\members\_components\members-page-client.tsx:57:    searchButton: "Търси",
app\[locale]\(main)\members\_components\members-page-client.tsx:82:    searchByName: "Search by name",
app\[locale]\(main)\members\_components\members-page-client.tsx:83:    searchByNamePlaceholder: "Search by name...",
app\[locale]\(main)\members\_components\members-page-client.tsx:84:    searchButton: "Search",
app\[locale]\(main)\members\_components\members-page-client.tsx:192:  searchQuery,
app\[locale]\(main)\members\_components\members-page-client.tsx:198:  const [search, setSearch] = useState(searchQuery)
app\[locale]\(main)\members\_components\members-page-client.tsx:204:    if (search || updates.q) params.set("q", updates.q ?? search)
app\[locale]\(main)\members\_components\members-page-client.tsx:214:    updateParams({ q: search, page: "1" })
app\[locale]\(main)\members\_components\members-page-client.tsx:261:              <FieldLabel htmlFor="members-search" className="sr-only">
app\[locale]\(main)\members\_components\members-page-client.tsx:262:                {copy.searchByName}
app\[locale]\(main)\members\_components\members-page-client.tsx:265:                id="members-search"
app\[locale]\(main)\members\_components\members-page-client.tsx:266:                placeholder={copy.searchByNamePlaceholder}
app\[locale]\(main)\members\_components\members-page-client.tsx:267:                value={search}
app\[locale]\(main)\members\_components\members-page-client.tsx:280:                  copy.searchButton
app\[locale]\(main)\members\_components\members-page-client.tsx:327:          {searchQuery && <span> {copy.forLabel} &quot;{searchQuery}&quot;</span>}
app\[locale]\(main)\about\_components\about-page-content.tsx:228:                href="/search"
app\api\assistant\chat\route.ts:72:    "- You MUST ground product suggestions in tool results (searchListings/getListing).",
app\[locale]\(main)\members\page.tsx:21:  searchParams: Promise<MembersSearchParams>
app\[locale]\(main)\members\page.tsx:24:export default async function MembersPage({ params, searchParams }: MembersPageProps) {
app\[locale]\(main)\members\page.tsx:27:  const resolvedSearchParams = await searchParams
app\[locale]\(main)\layout.tsx:11: * - Complete site header with navigation, search, mega menus
app\[locale]\(main)\_components\mobile\home-city-picker-sheet.tsx:79:          type="search"
app\[locale]\(main)\(support)\faq\page.tsx:181:      searchPlaceholder: 'Search FAQ...',
app\[locale]\(main)\(support)\faq\page.tsx:190:      searchPlaceholder: 'Търсене в ЧЗВ...',
app\[locale]\(main)\(support)\faq\page.tsx:199:    searchPlaceholder: 'Search FAQ...',
app\api\admin\docs\seed\templates.ts:40:- Listings: create/edit, photos, categories, browse/search
app\api\admin\docs\seed\templates.ts:391:- Listings: create/edit, photos, categories, search
app\api\admin\docs\seed\templates.ts:520:| Intent | search rate | % sessions that perform search |
app\[locale]\(main)\wishlist\_components\wishlist-page-client.tsx:154:              <Link href="/search">
app\[locale]\(main)\(support)\customer-service\page.tsx:78:                    <h2 className="text-xl font-bold tracking-tight mb-4">{t('searchTitle')}</h2>
app\[locale]\(main)\(support)\customer-service\page.tsx:83:                            placeholder={t('searchPlaceholder')}
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:21:  searchParams: URLSearchParams | ReadonlyURLSearchParams
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:41:  searchParams,
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:45:  searchParams: URLSearchParams | ReadonlyURLSearchParams
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:51:  pending.minPrice = searchParams.get("minPrice")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:52:  pending.maxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:53:  pending.minRating = searchParams.get("minRating")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:54:  pending.availability = searchParams.get("availability")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:57:    pending.deals = searchParams.get("deals")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:58:    pending.verified = searchParams.get("verified")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:59:    pending.city = searchParams.get("city")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:60:    pending.nearby = searchParams.get("nearby")
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:66:        ...searchParams.getAll(`attr_${attrKey}`),
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:68:        ...searchParams.getAll(`attr_${attr.name}`),
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:81:  searchParams,
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:90:        searchParams,
app\[locale]\(main)\_components\filters\shared\state\use-pending-filters.ts:95:  }, [searchParams, attributes, includeExtendedFields])
AGENTS.md:47:| Feature-specific implementation | `docs/features/<feature>.md` (auth, bottom-nav, checkout-payments, header, product-cards, search-filters, sell-flow) |
app\[locale]\(main)\_components\filters\shared\sections\filter-attribute-section-content.tsx:79:        searchThreshold={8}
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:13:// - Brand/Condition: list with search input if options > 8
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:22:  /** Show search input when options exceed this threshold */
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:23:  searchThreshold?: number
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:24:  /** Placeholder for search input */
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:25:  searchPlaceholder?: string
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:33:  searchThreshold = 8,
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:34:  searchPlaceholder,
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:37:  const [searchQuery, setSearchQuery] = useState("")
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:39:  const showSearch = options.length > searchThreshold
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:42:    if (!searchQuery.trim()) return options
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:43:    const query = searchQuery.toLowerCase().trim()
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:45:  }, [options, searchQuery])
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:69:            value={searchQuery}
app\[locale]\(main)\_components\filters\shared\controls\filter-list.tsx:71:            placeholder={searchPlaceholder || tHub("searchPlaceholder", { filterName: "" })}
app\[locale]\(main)\categories\[slug]\_lib\search-products.ts:3:import { applySharedProductFilters, applySharedProductSort } from "@/lib/data/search-products"
app\[locale]\(main)\categories\[slug]\_lib\search-products.ts:41:export async function searchProducts(
app\[locale]\(main)\categories\[slug]\_lib\search-products.ts:84:    logEvent("info", "category_search_products_debug", {
app\[locale]\(main)\categories\[slug]\_lib\search-products.ts:128:      images: p.images || [],
app\[locale]\(main)\categories\[slug]\_lib\search-products.ts:132:      image_url: p.images?.[0] || null,
app\[locale]\(main)\_components\filters\filter-hub.tsx:45:  searchQuery,
app\[locale]\(main)\_components\filters\filter-hub.tsx:60:  const searchParamsFromRouter = useSearchParams()
app\[locale]\(main)\_components\filters\filter-hub.tsx:61:  const searchParams = appliedSearchParams ?? searchParamsFromRouter
app\[locale]\(main)\_components\filters\filter-hub.tsx:80:    searchParams,
app\[locale]\(main)\_components\filters\filter-hub.tsx:96:      query: searchQuery ?? null,
app\[locale]\(main)\_components\filters\filter-hub.tsx:109:    [effectiveCategoryId, searchQuery, pending]
app\[locale]\(main)\_components\filters\filter-hub.tsx:160:      searchParams: new URLSearchParams(searchParams.toString()),
app\[locale]\(main)\_components\filters\filter-hub.tsx:175:  }, [searchParams, pending, resolvedBasePath, pendingCategorySlug, onApply, router, onOpenChange])
app\[locale]\(main)\_components\filters\filter-hub\types.ts:33:  searchQuery?: string | undefined
app\[locale]\(main)\_components\filters\filter-hub\filter-hub-utils.ts:176:  searchParams,
app\[locale]\(main)\_components\filters\filter-hub\filter-hub-utils.ts:181:  searchParams: URLSearchParams
app\[locale]\(main)\_components\filters\filter-hub\filter-hub-utils.ts:186:  const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\sellers\_components\sellers-grid.tsx:31:        const href = seller.username ? `/${seller.username}` : `/search?seller=${seller.id}`
app\[locale]\(main)\_components\filters\filter-chips.tsx:27:  /** External search params (for instant-apply flows without URL navigation) */
app\[locale]\(main)\_components\filters\filter-chips.tsx:46:  const searchParamsFromRouter = useSearchParams()
app\[locale]\(main)\_components\filters\filter-chips.tsx:47:  const searchParams = appliedSearchParams ?? searchParamsFromRouter
app\[locale]\(main)\_components\filters\filter-chips.tsx:54:  const currentMinPrice = searchParams.get("minPrice")
app\[locale]\(main)\_components\filters\filter-chips.tsx:55:  const currentMaxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\_components\filters\filter-chips.tsx:56:  const currentRating = searchParams.get("minRating")
app\[locale]\(main)\_components\filters\filter-chips.tsx:57:  const currentDeals = searchParams.get("deals")
app\[locale]\(main)\_components\filters\filter-chips.tsx:58:  const currentAvailability = searchParams.get("availability")
app\[locale]\(main)\_components\filters\filter-chips.tsx:59:  const currentFreeShipping = searchParams.get("freeShipping")
app\[locale]\(main)\_components\filters\filter-chips.tsx:60:  const currentCity = searchParams.get("city")
app\[locale]\(main)\_components\filters\filter-chips.tsx:61:  const currentNearby = searchParams.get("nearby") === "true"
app\[locale]\(main)\_components\filters\filter-chips.tsx:66:    for (const key of searchParams.keys()) {
app\[locale]\(main)\_components\filters\filter-chips.tsx:69:        const values = searchParams.getAll(key)
app\[locale]\(main)\_components\filters\filter-chips.tsx:76:  }, [searchParams])
app\[locale]\(main)\_components\filters\filter-chips.tsx:91:          const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\_components\filters\filter-chips.tsx:94:          router.push(`/search?${params.toString()}`)
app\[locale]\(main)\_components\filters\filter-chips.tsx:99:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\_components\filters\filter-chips.tsx:108:        router.push(`/search?${queryString}`)
app\[locale]\(main)\_components\filters\filter-chips.tsx:111:    [isInstantMode, onRemoveFilter, basePath, router, searchParams]
app\[locale]\(main)\_components\filters\filter-chips.tsx:228:      const q = searchParams.get("q")
app\[locale]\(main)\_components\filters\filter-chips.tsx:229:      const category = searchParams.get("category")
app\[locale]\(main)\_components\filters\filter-chips.tsx:232:      router.push(`/search?${params.toString()}`)
app\[locale]\(main)\_components\filters\filter-chips.tsx:234:  }, [isInstantMode, onClearAll, basePath, router, searchParams])
app\[locale]\(main)\sellers\_components\sellers-directory-client.tsx:57:            placeholder={t("searchPlaceholder")}
app\actions\products-create.ts:107:        images: data.images,
app\actions\products-create.ts:230:        images: original.images,
app\actions\products-create.ts:255:          images: original.images,
app\actions\products-update.ts:84:  if (input.images !== undefined) updateData.images = input.images
app\[locale]\(main)\_components\desktop\use-desktop-home-controller.ts:63:  const images = Array.isArray(product.images) ? (product.images as string[]) : []
app\[locale]\(main)\categories\[slug]\[subslug]\page.tsx:30:  searchParams,
app\[locale]\(main)\categories\[slug]\[subslug]\page.tsx:33:  searchParams: Promise<Record<string, string | string[] | undefined>>
app\[locale]\(main)\categories\[slug]\[subslug]\page.tsx:43:  return <CategoryPage params={mappedParams} searchParams={searchParams} />
app\[locale]\(main)\assistant\_components\assistant-playground.tsx:147:                            image={item.images?.[0] ?? null}
app\[locale]\(main)\categories\[slug]\page.tsx:90:  searchParams: searchParamsPromise,
app\[locale]\(main)\categories\[slug]\page.tsx:93:  searchParams: Promise<CategoryPageSearchParams>
app\[locale]\(main)\categories\[slug]\page.tsx:97:      <CategoryPageContent paramsPromise={paramsPromise} searchParamsPromise={searchParamsPromise} />
app\[locale]\(main)\categories\[slug]\page.tsx:104:  searchParamsPromise,
app\[locale]\(main)\categories\[slug]\page.tsx:107:  searchParamsPromise: Promise<CategoryPageSearchParams>
app\[locale]\(main)\categories\[slug]\page.tsx:141:      searchParamsPromise={searchParamsPromise}
app\[locale]\(main)\assistant\_components\assistant-playground-ui.tsx:50:      part.type === "tool-searchListings" &&
app\[locale]\(main)\_components\desktop\desktop-filter-search.tsx:25:  const [search, setSearch] = React.useState("")
app\[locale]\(main)\_components\desktop\desktop-filter-search.tsx:28:  const filteredOptions = search
app\[locale]\(main)\_components\desktop\desktop-filter-search.tsx:29:    ? options.filter((option) => option.toLowerCase().includes(search.toLowerCase()))
app\[locale]\(main)\_components\desktop\desktop-filter-search.tsx:42:          value={search}
app\[locale]\(main)\_components\desktop\desktop-filter-search.tsx:108:      {hasMore && !search && (
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:38:  const searchParams = useSearchParams()
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:49:  const basePath = categorySlug ? pathname : "/search"
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:51:  const currentMinPrice = searchParams.get("minPrice")
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:52:  const currentMaxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:53:  const currentRating = searchParams.get("minRating")
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:60:          ...searchParams.getAll(`attr_${attrKey}`),
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:61:          ...searchParams.getAll(`attr_${attr.name}`),
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:65:    [searchParams],
app\[locale]\(main)\_components\desktop\desktop-filter-modal.tsx:140:    searchParams.forEach((value, key) => {
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:2:-- Fix function search_path security warnings with correct signatures
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:3:ALTER FUNCTION public.get_category_hierarchy(p_slug text, p_depth integer) SET search_path = public;
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:4:ALTER FUNCTION public.transliterate_bulgarian(input_text text) SET search_path = public;
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:5:ALTER FUNCTION public.generate_product_slug(title text, product_id uuid) SET search_path = public;
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:6:ALTER FUNCTION public.auto_generate_product_slug() SET search_path = public;
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:7:ALTER FUNCTION public.generate_store_slug(store_name text) SET search_path = public;
supabase\migrations\20251208095400_fix_function_search_paths_v2.sql:8:ALTER FUNCTION public.auto_generate_store_slug() SET search_path = public;
app\[locale]\(main)\_components\desktop\desktop-filter-modal-content.tsx:22:import { DesktopFilterSearch } from "./desktop-filter-search"
app\[locale]\(main)\_components\desktop\desktop-filter-modal-content.tsx:257:                      placeholder={t("searchAttributePlaceholder", { attribute: attrName })}
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:61:  searchParams: SearchParamsLike
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:72:  searchParams,
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:80:      if (searchParams.get(filter.paramKey) === filter.paramValue) {
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:85:  }, [searchParams])
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:88:    const isActive = searchParams.get(filter.paramKey) === filter.paramValue
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:90:  }, [searchParams, updateParams])
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:150:    for (const key of searchParams.keys()) {
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:153:    if (searchParams.get("minPrice") || searchParams.get("maxPrice")) count++
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:154:    if (searchParams.get("minRating")) count++
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:156:  }, [searchParams])
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar-filter-pills.tsx:164:        const selectedValue = searchParams.get(dropdown.paramKey)
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:12:import { SortSelect } from "../../../_components/search-controls/sort-select"
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:36:  const searchParams = useSearchParams()
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:41:  const viewMode = (searchParams.get("view") as "grid" | "list") || "grid"
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:45:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:54:    [router, pathname, searchParams]
app\[locale]\(main)\categories\[slug]\_components\desktop-filter-toolbar.tsx:89:        searchParams={searchParams}
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:9:import { searchProducts } from "../_lib/search-products"
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:10:import { SearchPagination } from "../../../_components/search-controls/search-pagination"
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:48:  searchParamsPromise: Promise<CategoryPageSearchParams>
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:61:  searchParamsPromise,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:69:  const searchParams = use(searchParamsPromise)
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:70:  const currentPage = Math.max(1, Number.parseInt(searchParams.page || "1", 10))
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:73:  for (const [key, value] of Object.entries(searchParams)) {
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:95:    searchProducts(
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:99:        minPrice: searchParams.minPrice,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:100:        maxPrice: searchParams.maxPrice,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:101:        tag: searchParams.tag,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:102:        minRating: searchParams.minRating,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:103:        availability: searchParams.availability,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:104:        sort: searchParams.sort,
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:122:    image: product.image_url || product.images?.[0] || "/placeholder.svg",
app\[locale]\(main)\categories\[slug]\_components\category-page-dynamic-content.tsx:201:                image: product.image_url || product.images?.[0] || "/placeholder.svg",
app\[locale]\(main)\_components\category\subcategory-tabs.tsx:26:  basePath?: string // "/categories" or undefined for "/search?category="
app\[locale]\(main)\_components\category\subcategory-tabs.tsx:50:  const searchParams = useSearchParams()
app\[locale]\(main)\_components\category\subcategory-tabs.tsx:67:            searchParamsString={searchParams.toString()}
app\[locale]\(main)\_components\category\subcategory-tabs.tsx:88:        searchParamsString={searchParams.toString()}
app\[locale]\(main)\_components\category\subcategory-circles.tsx:23:  basePath?: string // "/categories" or undefined for "/search?category="
app\[locale]\(main)\_components\category\subcategory-circles.tsx:24:  /** Pre-serialized search params string (without leading '?') to preserve during navigation */
app\[locale]\(main)\_components\category\subcategory-circles.tsx:25:  searchParamsString?: string
app\[locale]\(main)\_components\category\subcategory-circles.tsx:56:  searchParamsString,
app\[locale]\(main)\_components\category\subcategory-circles.tsx:60:  searchParamsString: string
app\[locale]\(main)\_components\category\subcategory-circles.tsx:64:    const params = new URLSearchParams(searchParamsString)
app\[locale]\(main)\_components\category\subcategory-circles.tsx:71:  const params = new URLSearchParams(searchParamsString)
app\[locale]\(main)\_components\category\subcategory-circles.tsx:73:  return `/search?${params.toString()}`
app\[locale]\(main)\_components\category\subcategory-circles.tsx:268:  searchParamsString = "",
app\[locale]\(main)\_components\category\subcategory-circles.tsx:285:        searchParamsString,
app\[locale]\(main)\_components\category\subcategory-circles.tsx:288:    [basePath, searchParamsString]
app\[locale]\(main)\categories\[slug]\_components\mobile\use-instant-category-browse.ts:78:  /** Initial querystring without leading ? (from server searchParams) */
app\[locale]\(main)\categories\[slug]\_components\mobile\use-instant-category-browse.ts:294:        const params = new URLSearchParams(window.location.search)
app\[locale]\(main)\search\_lib\search-sellers.ts:5:import { buildTokenizedIlikeOrFilter, normalizeSearchQuery } from "@/lib/filters/search-query"
app\[locale]\(main)\search\_lib\search-sellers.ts:61:export async function searchSellers(
app\[locale]\(main)\search\_lib\search-sellers.ts:86:      logger.error("[search-sellers] failed to resolve category", categoryError, { categorySlug })
app\[locale]\(main)\search\_lib\search-sellers.ts:110:    logger.error("[search-sellers] failed to fetch seller profiles", profilesError, {
app\[locale]\(main)\search\_lib\search-sellers.ts:149:    logger.error("[search-sellers] failed to fetch seller products", productsError, {
app\[locale]\(main)\search\error.tsx:6:  titleKey: 'search.title',
app\[locale]\(main)\search\error.tsx:7:  descriptionKey: 'search.description',
app\[locale]\(main)\search\error.tsx:8:  ctaIcon: 'search',
app\[locale]\(main)\search\_lib\search-page-metadata.ts:3:import { BrowseModeSchema } from "./search-page-helpers"
app\[locale]\(main)\search\_lib\search-page-metadata.ts:8:  searchParams: Promise<{ q?: string; category?: string; mode?: string }>
app\[locale]\(main)\search\_lib\search-page-metadata.ts:20:  searchParams,
app\[locale]\(main)\search\_lib\search-page-metadata.ts:25:  const resolvedSearchParams = await searchParams
app\[locale]\(main)\search\_lib\search-page-metadata.ts:31:  let title = t("searchResults")
app\[locale]\(main)\search\_lib\search-page-metadata.ts:42:    description = `${t("searchResults")} — ${t("resultsFor")} "${query}".`
app\[locale]\(main)\search\_lib\search-page-metadata.ts:45:    title = `${categoryLabel} · ${t("searchResults")}`
app\[locale]\(main)\search\_lib\search-page-metadata.ts:46:    description = `${t("searchResults")} · ${categoryLabel}.`
app\[locale]\(main)\search\_lib\search-products.ts:4:import { applySharedProductFilters, applySharedProductSort } from "@/lib/data/search-products"
app\[locale]\(main)\search\_lib\search-products.ts:5:import { buildTokenizedIlikeOrFilter } from "@/lib/filters/search-query"
app\[locale]\(main)\search\_lib\search-products.ts:26:export async function searchProducts(
app\[locale]\(main)\search\_lib\search-products.ts:89:    const searchFilter = buildTokenizedIlikeOrFilter(normalizedQuery, ["title", "description"])
app\[locale]\(main)\search\_lib\search-products.ts:90:    if (searchFilter) next = next.or(searchFilter)
app\[locale]\(main)\search\_lib\search-products.ts:132:        const images = Array.isArray(p.images)
app\[locale]\(main)\search\_lib\search-products.ts:133:          ? p.images.filter((img): img is string => typeof img === "string" && img.length > 0)
app\[locale]\(main)\search\page.tsx:8:import { SearchPageLayout } from "./_components/search-page-layout"
app\[locale]\(main)\search\page.tsx:9:import { searchProducts } from "./_lib/search-products"
app\[locale]\(main)\search\page.tsx:10:import { parseSellerSearchFilters, searchSellers } from "./_lib/search-sellers"
app\[locale]\(main)\search\page.tsx:24:} from "./_lib/search-page-helpers"
app\[locale]\(main)\search\page.tsx:25:import { generateSearchPageMetadata } from "./_lib/search-page-metadata"
app\[locale]\(main)\search\page.tsx:85:  searchParams: Record<string, string | string[] | undefined>
app\[locale]\(main)\search\page.tsx:87:  const sellerSortParam = toSingleValue(searchParams.sellerSort)
app\[locale]\(main)\search\page.tsx:88:  const sellerVerifiedParam = toSingleValue(searchParams.sellerVerified)
app\[locale]\(main)\search\page.tsx:89:  const sellerMinRatingParam = toSingleValue(searchParams.sellerMinRating)
app\[locale]\(main)\search\page.tsx:90:  const sellerMinListingsParam = toSingleValue(searchParams.sellerMinListings)
app\[locale]\(main)\search\page.tsx:91:  const cityParam = toSingleValue(searchParams.city)
app\[locale]\(main)\search\page.tsx:92:  const nearbyParam = toSingleValue(searchParams.nearby)
app\[locale]\(main)\search\page.tsx:108:  searchParams,
app\[locale]\(main)\search\page.tsx:115:  searchParams: Record<string, string | string[] | undefined>
app\[locale]\(main)\search\page.tsx:119:  const attributeFilters = extractAttributeFilters(searchParams)
app\[locale]\(main)\search\page.tsx:121:  const result = await searchProducts(
app\[locale]\(main)\search\page.tsx:126:      minPrice: toSingleValue(searchParams.minPrice),
app\[locale]\(main)\search\page.tsx:127:      maxPrice: toSingleValue(searchParams.maxPrice),
app\[locale]\(main)\search\page.tsx:128:      tag: toSingleValue(searchParams.tag),
app\[locale]\(main)\search\page.tsx:129:      minRating: toSingleValue(searchParams.minRating),
app\[locale]\(main)\search\page.tsx:130:      deals: toSingleValue(searchParams.deals),
app\[locale]\(main)\search\page.tsx:131:      promoted: toSingleValue(searchParams.promoted),
app\[locale]\(main)\search\page.tsx:132:      nearby: toSingleValue(searchParams.nearby),
app\[locale]\(main)\search\page.tsx:133:      city: toSingleValue(searchParams.city),
app\[locale]\(main)\search\page.tsx:134:      verified: toSingleValue(searchParams.verified),
app\[locale]\(main)\search\page.tsx:135:      availability: toSingleValue(searchParams.availability),
app\[locale]\(main)\search\page.tsx:136:      sort: toSingleValue(searchParams.sort),
app\[locale]\(main)\search\page.tsx:155:  searchParams,
app\[locale]\(main)\search\page.tsx:162:  searchParams: Record<string, string | string[] | undefined>
app\[locale]\(main)\search\page.tsx:165:  const sellerFilters = toSellerFilters(searchParams)
app\[locale]\(main)\search\page.tsx:168:  const sellerResults = await searchSellers(supabase, {
app\[locale]\(main)\search\page.tsx:187:    image: product.image_url || product.images?.[0] || "/placeholder.svg",
app\[locale]\(main)\search\page.tsx:217:  searchParams,
app\[locale]\(main)\search\page.tsx:220:  searchParams: Promise<{ q?: string; category?: string; mode?: string }>
app\[locale]\(main)\search\page.tsx:222:  return generateSearchPageMetadata({ params, searchParams })
app\[locale]\(main)\search\page.tsx:226:  searchParams: searchParamsPromise,
app\[locale]\(main)\search\page.tsx:229:  searchParams: Promise<Record<string, string | string[] | undefined>>
app\[locale]\(main)\search\page.tsx:233:  const searchParams = await searchParamsPromise
app\[locale]\(main)\search\page.tsx:236:  const parsedMode = BrowseModeSchema.safeParse(toSingleValue(searchParams.mode))
app\[locale]\(main)\search\page.tsx:239:  const query = toSingleValue(searchParams.q) || ""
app\[locale]\(main)\search\page.tsx:240:  const categorySlug = toSingleValue(searchParams.category)
app\[locale]\(main)\search\page.tsx:241:  const currentPage = Math.max(1, Number.parseInt(toSingleValue(searchParams.page) || "1", 10))
app\[locale]\(main)\search\page.tsx:248:  const searchUrlParams = toUrlSearchParams(searchParams)
app\[locale]\(main)\search\page.tsx:272:          searchParams,
app\[locale]\(main)\search\page.tsx:285:          searchParams,
app\[locale]\(main)\search\page.tsx:299:  const modeListingsHref = buildModeHref(searchUrlParams, "listings")
app\[locale]\(main)\search\page.tsx:300:  const modeSellersHref = buildModeHref(searchUrlParams, "sellers")
app\[locale]\(main)\search\_components\desktop-filters.tsx:37:  const searchParams = useSearchParams()
app\[locale]\(main)\search\_components\desktop-filters.tsx:40:  const currentMinPrice = searchParams.get("minPrice")
app\[locale]\(main)\search\_components\desktop-filters.tsx:41:  const currentMaxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\search\_components\desktop-filters.tsx:42:  const currentRating = searchParams.get("minRating")
app\[locale]\(main)\search\_components\desktop-filters.tsx:44:  const basePath = categorySlug ? pathname : '/search'
app\[locale]\(main)\search\_components\desktop-filters.tsx:47:    const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\desktop-filters.tsx:87:    for (const key of searchParams.keys()) {
app\[locale]\(main)\search\_lib\search-page-helpers.ts:71:  return queryString ? `/search?${queryString}` : "/search"
app\[locale]\(main)\search\_lib\search-page-helpers.ts:75:  searchParams: Record<string, string | string[] | undefined>
app\[locale]\(main)\search\_lib\search-page-helpers.ts:79:  for (const [key, value] of Object.entries(searchParams)) {
app\[locale]\(main)\search\_components\mobile-search-smart-rail.tsx:8:import { SearchActionBar } from "./search-action-bar"
app\[locale]\(main)\search\_components\mobile-search-smart-rail.tsx:26:  basePath = "/search",
app\[locale]\(main)\search\_components\mobile-search-smart-rail.tsx:68:          testId="mobile-search-smart-rail"
app\[locale]\(main)\search\_components\mobile-search-smart-rail.tsx:81:        {...(query.trim().length > 0 ? { searchQuery: query } : {})}
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:83:  basePath = "/search",
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:90:  const searchParams = useSearchParams()
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:92:  const currentSort = (searchParams.get("sellerSort") || "products") as SellerSortKey
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:93:  const currentVerified = searchParams.get("sellerVerified") === "true"
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:94:  const currentMinRating = Number(searchParams.get("sellerMinRating") || "0")
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:95:  const currentMinListings = Number(searchParams.get("sellerMinListings") || "0")
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:96:  const currentQuery = searchParams.get("q") || ""
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:98:  const [searchInput, setSearchInput] = useState(currentQuery)
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:120:      const next = applySellerSearchParams(new URLSearchParams(searchParams.toString()), {
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:121:        q: searchInput,
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:125:    [replaceUrl, searchInput, searchParams]
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:130:      const next = applySellerSearchParams(new URLSearchParams(searchParams.toString()), {
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:136:    [replaceUrl, searchParams]
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:147:    const next = applySellerSearchParams(new URLSearchParams(searchParams.toString()), {
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:154:  }, [pendingListings, pendingRating, pendingVerified, replaceUrl, searchParams])
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:157:    const next = applySellerSearchParams(new URLSearchParams(searchParams.toString()), {
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:165:  }, [replaceUrl, searchParams])
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:168:      replaceUrl(applySellerSearchParams(new URLSearchParams(searchParams.toString()), next))
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:170:    [replaceUrl, searchParams]
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:207:          value={searchInput}
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:209:          placeholder={t("searchSellersPlaceholder")}
app\[locale]\(main)\search\_components\mobile-seller-filter-controls.tsx:211:          aria-label={t("searchSellersPlaceholder")}
app\[locale]\(main)\search\_components\filters\search-filters.tsx:41:  const searchParams = useSearchParams()
app\[locale]\(main)\search\_components\filters\search-filters.tsx:48:  const currentMinPrice = searchParams.get("minPrice")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:49:  const currentMaxPrice = searchParams.get("maxPrice")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:50:  const currentRating = searchParams.get("minRating")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:51:  const currentBrand = searchParams.get("brand")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:52:  const currentAvailability = searchParams.get("availability")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:53:  const currentCity = searchParams.get("city")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:54:  const currentNearby = searchParams.get("nearby") === "true"
app\[locale]\(main)\search\_components\filters\search-filters.tsx:94:        router.push(`/search?${params.toString()}`)
app\[locale]\(main)\search\_components\filters\search-filters.tsx:102:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:112:      const path = basePath ?? "/search"
app\[locale]\(main)\search\_components\filters\search-filters.tsx:115:    [basePath, searchParams],
app\[locale]\(main)\search\_components\filters\search-filters.tsx:128:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:136:    [searchParams, pushWithParams],
app\[locale]\(main)\search\_components\filters\search-filters.tsx:141:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:157:    [searchParams, pushWithParams],
app\[locale]\(main)\search\_components\filters\search-filters.tsx:161:    const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:176:  }, [priceMin, priceMax, searchParams, pushWithParams])
app\[locale]\(main)\search\_components\filters\search-filters.tsx:180:      const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:188:    [searchParams, pushWithParams],
app\[locale]\(main)\search\_components\filters\search-filters.tsx:192:    const params = new URLSearchParams(searchParams.toString())
app\[locale]\(main)\search\_components\filters\search-filters.tsx:199:  }, [currentNearby, searchParams, pushWithParams])
app\[locale]\(main)\search\_components\filters\search-filters.tsx:208:    const category = searchParams.get("category")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:209:    const query = searchParams.get("q")
app\[locale]\(main)\search\_components\filters\search-filters.tsx:217:    router.push(`/search?${params.toString()}`)
app\[locale]\(main)\search\_components\filters\search-filters.tsx:218:  }, [basePath, router, searchParams])
app\[locale]\(main)\search\_components\search-page-layout.tsx:5:import { SearchFilters } from "./filters/search-filters"
app\[locale]\(main)\search\_components\search-page-layout.tsx:6:import { SearchHeader } from "./search-header"
app\[locale]\(main)\search\_components\search-page-layout.tsx:9:import { SortSelect } from "../../_components/search-controls/sort-select"
app\[locale]\(main)\search\_components\search-page-layout.tsx:10:import { SearchPagination } from "../../_components/search-controls/search-pagination"
app\[locale]\(main)\search\_components\search-page-layout.tsx:16:import { MobileSearchSmartRail } from "./mobile-search-smart-rail"
app\[locale]\(main)\search\_components\search-page-layout.tsx:17:import { SearchHeaderSync } from "./search-header-sync"
app\[locale]\(main)\search\_components\search-page-layout.tsx:18:import { SearchResultsTransition } from "./search-results-transition"
app\[locale]\(main)\search\_components\search-page-layout.tsx:87:  const searchHeader = (
app\[locale]\(main)\search\_components\search-page-layout.tsx:108:      variant={query ? "no-search" : "no-category"}
app\[locale]\(main)\search\_components\search-page-layout.tsx:109:      {...(query ? { searchQuery: query } : {})}
app\[locale]\(main)\search\_components\search-page-layout.tsx:137:          <MobileSellerFilterControls basePath="/search" listingsHref={modeListingsHref} className="mb-2" />
app\[locale]\(main)\search\_components\search-page-layout.tsx:169:        {searchHeader}
app\[locale]\(main)\search\_components\search-bar-pill.tsx:6:import { MobileSearchOverlay } from "../../../_components/search/mobile-search-overlay"
app\[locale]\(main)\search\_components\search-bar-pill.tsx:22:        aria-label={t("search")}
app\[locale]\(main)\search\_components\search-bar-pill.tsx:26:          {query || t("search")}
app\[locale]\(main)\search\_components\search-action-bar.tsx:7:import { SortSelect } from "../../_components/search-controls/sort-select"
app\[locale]\(main)\search\_components\search-action-bar.tsx:15:  const searchParams = useSearchParams()
app\[locale]\(main)\search\_components\search-action-bar.tsx:16:  const filterCount = getActiveFilterCount(searchParams)
app\[locale]\(main)\search\_components\search-header-sync.tsx:10:import { SearchBarPill } from "./search-bar-pill"
app\[locale]\(business)\_components\business-command-palette.tsx:206:        <CommandInput placeholder={t("searchPlaceholder", { storeName: storeLabel })} />
app\[locale]\(business)\_components\business-recent-activity.tsx:76:                    src={product.images?.[0]}
app\[locale]\(business)\_components\business-recent-activity.tsx:124:                      src={product?.images?.[0]}
app\[locale]\(business)\_components\products-table-grid.tsx:25:  searchQuery: string
app\[locale]\(business)\_components\products-table-grid.tsx:85:  searchQuery,
app\[locale]\(business)\_components\products-table-grid.tsx:99:          {searchQuery ? "No products found" : "No products yet"}
app\[locale]\(business)\_components\products-table-grid.tsx:102:          {searchQuery ? "Try a different search" : "Add your first product to get started"}
app\[locale]\(business)\_components\products-table-grid.tsx:104:        {!searchQuery && (
app\[locale]\(business)\_components\orders-table-view.tsx:48:  searchQuery,
app\[locale]\(business)\_components\orders-table-view.tsx:66:  searchQuery: string
app\[locale]\(business)\_components\orders-table-view.tsx:151:            value={searchQuery}
app\[locale]\(business)\_components\orders-table-view.tsx:208:              {searchQuery || statusFilter !== "all"
app\[locale]\(business)\_components\orders-table-view.tsx:209:                ? "Try adjusting your search or filters"
app\[locale]\(business)\_components\orders-table-view.tsx:256:                const firstImage = product?.images?.[0]
app\[locale]\(business)\_components\products-table.tsx:28:  const [searchQuery, setSearchQuery] = React.useState("")
app\[locale]\(business)\_components\products-table.tsx:54:    if (searchQuery) {
app\[locale]\(business)\_components\products-table.tsx:55:      const query = searchQuery.toLowerCase()
app\[locale]\(business)\_components\products-table.tsx:89:  }, [products, searchQuery, statusFilter, sortField, sortOrder])
app\[locale]\(business)\_components\products-table.tsx:228:          searchQuery={searchQuery}
app\[locale]\(business)\_components\products-table.tsx:247:            searchQuery={searchQuery}
app\[locale]\(business)\_components\order-detail-view.tsx:268:                      imageSrc={product?.images?.[0]}
app\[locale]\(business)\_components\orders-table.tsx:22:  const [searchQuery, setSearchQuery] = React.useState("")
app\[locale]\(business)\_components\orders-table.tsx:51:    if (searchQuery) {
app\[locale]\(business)\_components\orders-table.tsx:52:      const query = searchQuery.toLowerCase()
app\[locale]\(business)\_components\orders-table.tsx:91:  }, [orders, searchQuery, statusFilter, sortField, sortOrder])
app\[locale]\(business)\_components\orders-table.tsx:149:      searchQuery={searchQuery}
app\[locale]\(business)\_components\products-table-row.tsx:67:            {product.images?.[0] ? (
app\[locale]\(business)\_components\products-table-row.tsx:69:                src={product.images[0]}
app\[locale]\(business)\_components\product-form-modal.tsx:86:        images: product?.images || [],
app\[locale]\(business)\_components\product-form-modal.tsx:121:    setValue("images", [...images, ...newImages], { shouldDirty: true })
app\[locale]\(business)\_components\product-form-modal.tsx:126:    const newImages = [...images]
app\[locale]\(business)\_components\products-table-mappers.ts:19:    images: data.images,
app\[locale]\(business)\_components\products-table-mappers.ts:41:    images: data.images,
app\[locale]\(business)\_components\products-table-toolbar.tsx:18:  searchQuery: string
app\[locale]\(business)\_components\products-table-toolbar.tsx:41:  searchQuery,
app\[locale]\(business)\_components\products-table-toolbar.tsx:122:              value={searchQuery}
app\[locale]\(business)\_components\products-table-toolbar.tsx:126:            {searchQuery && (
app\[locale]\(business)\_components\products-table-toolbar.tsx:132:                aria-label="Clear search"
app\[locale]\(business)\_components\products-table-toolbar.tsx:139:          {searchQuery && (
app\[locale]\(business)\dashboard\analytics\page.tsx:207:                      Boosted products appear higher in search results
app\[locale]\(business)\dashboard\inventory\page.tsx:133:                        {product.images?.[0] ? (
app\[locale]\(business)\dashboard\inventory\page.tsx:135:                            src={product.images[0]}
app\[locale]\(business)\dashboard\not-found.tsx:32:        <Link href="/dashboard/orders">{t("searchProducts")}</Link>
app\[locale]\(main)\search\_components\search-header.tsx:5:import { SaveSearchButton } from "../../_components/search-controls/save-search-button"
app\[locale]\(main)\search\_components\search-header.tsx:33:              {query ? t('searchResults') : t('allProducts')}
supabase\migrations_legacy_sync_20260223193150\20251201094713_user_addresses_payments.sql:74:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251201094713_user_addresses_payments.sql:101:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251201094713_user_addresses_payments.sql:133:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251201100000_user_addresses_payments.sql:74:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251201100000_user_addresses_payments.sql:101:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251201100000_user_addresses_payments.sql:133:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:1:-- Fix security vulnerability: Set immutable search_path for functions
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:2:-- This prevents SQL injection via search path manipulation
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:5:ALTER FUNCTION public.handle_new_user() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:8:ALTER FUNCTION public.check_not_own_product() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:10:COMMENT ON FUNCTION public.handle_new_user() IS 'Trigger function to create profile when new user signs up. search_path secured.';
supabase\migrations_legacy_sync_20260223193150\20251202131441_fix_function_search_path_security.sql:11:COMMENT ON FUNCTION public.check_not_own_product() IS 'Validates user is not reviewing their own product. search_path secured.';;
supabase\migrations_legacy_sync_20260223193150\20251203131238_fix_rls_security_and_performance.sql:23:-- Full-text search GIN index
supabase\migrations_legacy_sync_20260223193150\20251203131238_fix_rls_security_and_performance.sql:24:CREATE INDEX IF NOT EXISTS idx_products_search_vector 
supabase\migrations_legacy_sync_20260223193150\20251203131238_fix_rls_security_and_performance.sql:25:  ON public.products USING GIN(search_vector);
supabase\migrations_legacy_sync_20260223193150\20251203131238_fix_rls_security_and_performance.sql:27:-- Trigram index for fuzzy search
supabase\migrations\20251209130630_fix_function_search_path_security.sql:2:-- Fix security warning: Function search_path mutable
supabase\migrations\20251209130630_fix_function_search_path_security.sql:3:-- Add SET search_path to the function to prevent mutable search_path vulnerability
supabase\migrations\20251209130630_fix_function_search_path_security.sql:9:SET search_path = public
supabase\migrations\20251213014840_seller_account_types_and_plans.sql:88:  '["50 active listings", "7% commission on sales", "3 free boosts/month", "⭐ Pro Seller badge", "Full analytics dashboard", "Priority email support", "Featured in search results"]'::jsonb
supabase\migrations\20251213113940_add_order_item_status_and_triggers.sql:104:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations\20251213113940_add_order_item_status_and_triggers.sql:189:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations\20251213121702_fix_order_item_trigger_ambiguous_buyer_id.sql:65:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;;
supabase\migrations\20251213122439_fix_trigger_no_auth_context.sql:67:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations\20251213123651_create_get_user_conversations_rpc.sql:25:  product_images TEXT[],
supabase\migrations\20251213123651_create_get_user_conversations_rpc.sql:58:    p.images AS product_images,
supabase\migrations\20251213123733_fix_get_user_conversations_rpc.sql:25:  product_images TEXT[],
supabase\migrations\20251213123733_fix_get_user_conversations_rpc.sql:58:    p.images AS product_images,
supabase\migrations\20251213162700_add_fee_columns_and_update_plans.sql:46:  '["50 free listings per month", "12% fee when you sell", "0.25 лв per order", "0.30 лв per extra listing", "Standard search visibility", "Community support"]'::jsonb,
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:1:-- Drop existing functions to recreate with fixed search_path
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:5:-- Recreate get_user_conversations with empty search_path
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:27:  product_images TEXT[],
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:36:SET search_path = ''
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:58:    p.images AS product_images,
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:82:-- Recreate get_user_conversation_ids with empty search_path
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:87:SET search_path = ''
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:101:SET search_path = ''
supabase\migrations\20251213130919_fix_search_path_security_v2.sql:119:SET search_path = ''
supabase\migrations\20251213182000_fix_tier_enum_consistency.sql:44:  '["50 free listings per month", "12% fee when you sell", "0.25 лв per order", "Standard search visibility"]'::jsonb,
supabase\migrations\20251214110241_phase4_notifications_functions.sql:11:SET search_path = public
supabase\migrations\20251214110241_phase4_notifications_functions.sql:27:SET search_path = public
supabase\migrations\20251214110241_phase4_notifications_functions.sql:44:SET search_path = public
supabase\migrations\20251214110309_phase4_order_status_notification_trigger.sql:8:SET search_path = public
supabase\migrations\20251214110256_phase4_notification_triggers.sql:8:SET search_path = public
supabase\migrations\20251214110832_fix_get_or_create_conversation_v2.sql:19:SET search_path = public
supabase\migrations\20251214110430_phase4_message_block_trigger.sql:10:SET search_path = public
supabase\migrations\20251214110336_phase4_blocked_users_functions.sql:11:SET search_path = public
supabase\migrations\20251214110336_phase4_blocked_users_functions.sql:28:SET search_path = public
supabase\migrations\20251214110336_phase4_blocked_users_functions.sql:44:SET search_path = public
supabase\migrations\20251214110336_phase4_blocked_users_functions.sql:67:SET search_path = public
supabase\migrations\20251214110336_phase4_blocked_users_functions.sql:95:SET search_path = public
supabase\migrations\20251214121001_buyer_feedback_stats_trigger.sql:12:SET search_path = public
supabase\migrations\20251214121001_buyer_feedback_stats_trigger.sql:49:SET search_path = public
supabase\migrations\20251214132210_security_fixes_phase8.sql:35:-- 3. Recreate all functions with SET search_path = ''
supabase\migrations\20251214132210_security_fixes_phase8.sql:38:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:47:RETURNS void LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:57:LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:66:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:70:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:77:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:88:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:101:LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:110:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:114:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:121:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:125:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251214132210_security_fixes_phase8.sql:133:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations\20251215124744_fix_sellers_table_references.sql:21:SET search_path TO 'public'
supabase\migrations\20251215124744_fix_sellers_table_references.sql:46:SET search_path TO 'public'
supabase\migrations\20251215124744_fix_sellers_table_references.sql:81:  product_images text[],
supabase\migrations\20251215124744_fix_sellers_table_references.sql:90:SET search_path TO 'public'
supabase\migrations\20251215124744_fix_sellers_table_references.sql:112:    p.images AS product_images,
supabase\migrations\20251215124744_fix_sellers_table_references.sql:138:SET search_path TO 'public'
supabase\migrations\20251215124744_fix_sellers_table_references.sql:159:SET search_path TO 'public'
supabase\migrations\20251215124744_fix_sellers_table_references.sql:179:SET search_path TO 'public'
supabase\migrations\20251214111953_reviews_feedback_system.sql:28:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251214111953_reviews_feedback_system.sql:126:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251214111953_reviews_feedback_system.sql:182:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251214111953_reviews_feedback_system.sql:230:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251214111953_reviews_feedback_system.sql:282:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251219094302_phase12_security_performance_audit.sql:5:-- FIX 1: Function search_path security
supabase\migrations\20251219094302_phase12_security_performance_audit.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations\20251219094302_phase12_security_performance_audit.sql:51:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations\20251219094302_phase12_security_performance_audit.sql:84:$$ LANGUAGE plpgsql IMMUTABLE SET search_path = public;
supabase\migrations\20251217155607_fix_get_conversation_messages_rpc_v2.sql:20:SET search_path = public
supabase\migrations\20251217151237_get_conversation_messages_rpc.sql:21:SET search_path = public
supabase\migrations\20251217151203_phase2_security_performance.sql:5:-- 1. SECURITY: Function search_path vulnerability (handle_new_user, auto_set_seller_flag)
supabase\migrations\20251217151203_phase2_security_performance.sql:12:-- PART 1: Fix Security Definer Functions (add search_path)
supabase\migrations\20251217151203_phase2_security_performance.sql:15:-- Fix handle_new_user function - add search_path security
supabase\migrations\20251217151203_phase2_security_performance.sql:20:SET search_path = public
supabase\migrations\20251217151203_phase2_security_performance.sql:44:-- Fix auto_set_seller_flag function - add search_path security
supabase\migrations\20251217151203_phase2_security_performance.sql:49:SET search_path = public
supabase\migrations\20251217151203_phase2_security_performance.sql:82:    search_vector,
supabase\migrations\20251231163053_add_get_category_descendants_function.sql:8:SET search_path TO 'public'
supabase\migrations\20251227170607_phase2_advisors_fixes_20251227.sql:3:-- SECURITY: pin search_path to avoid role-mutable search_path
supabase\migrations\20251227170607_phase2_advisors_fixes_20251227.sql:5:set search_path = public;
supabase\migrations\20260101225539_order_items_decrement_stock_trigger.sql:6:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations\20260101225539_order_items_decrement_stock_trigger.sql:11:SET search_path = public, pg_catalog
supabase\migrations\20260102070516_variant_id_cart_order_items.sql:139:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260102070516_variant_id_cart_order_items.sql:196:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260102070516_variant_id_cart_order_items.sql:250:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations\20260102070516_variant_id_cart_order_items.sql:255:SET search_path = public, pg_catalog
supabase\migrations\20251226202032_cart_and_wishlist_hardening_20251226.sql:81:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251226202032_cart_and_wishlist_hardening_20251226.sql:174:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251226202032_cart_and_wishlist_hardening_20251226.sql:207:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251226202032_cart_and_wishlist_hardening_20251226.sql:220:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20251231164453_add_category_ancestors_to_products.sql:97:    p.images,
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:1:-- Fix function search_path security warnings
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:9:SET search_path = ''
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:26:SET search_path = ''
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:50:SET search_path = ''
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:59:    p.images,
supabase\migrations\20260101053207_fix_function_search_path_v2.sql:82:SET search_path = ''
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:2:-- Fix search_path for cart functions and others - batch 1
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:11:SET search_path = public
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:24:ALTER FUNCTION cart_add_item(uuid, uuid, integer) SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:27:ALTER FUNCTION cart_clear() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:30:ALTER FUNCTION cart_set_quantity(uuid, integer, uuid) SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:33:ALTER FUNCTION expire_listing_boosts() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:36:ALTER FUNCTION get_category_ancestor_ids(uuid) SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:39:ALTER FUNCTION get_user_conversation_ids(uuid) SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:41:-- Fix handle_new_product_search
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:42:ALTER FUNCTION handle_new_product_search() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:45:ALTER FUNCTION increment_helpful_count(uuid) SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:48:ALTER FUNCTION init_business_verification() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:51:ALTER FUNCTION init_seller_stats() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:54:ALTER FUNCTION init_user_verification() SET search_path = public;
supabase\migrations\20260102101511_fix_function_search_path_batch1.sql:57:ALTER FUNCTION is_admin() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:2:-- Fix search_path for remaining functions - batch 2
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:5:ALTER FUNCTION on_listing_boost_created() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:8:ALTER FUNCTION on_review_notify() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:11:ALTER FUNCTION on_seller_feedback_notify() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:14:ALTER FUNCTION order_items_decrement_stock() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:17:ALTER FUNCTION protect_sensitive_columns() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:20:ALTER FUNCTION queue_badge_evaluation() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:23:ALTER FUNCTION update_follower_count() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:26:ALTER FUNCTION update_product_category_ancestors() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:29:ALTER FUNCTION update_product_rating() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:32:ALTER FUNCTION update_product_stock() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:35:ALTER FUNCTION update_seller_five_star_count() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:38:ALTER FUNCTION update_seller_listing_counts() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:41:ALTER FUNCTION update_seller_rating() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:44:ALTER FUNCTION update_seller_sales_stats() SET search_path = public;
supabase\migrations\20260102101521_fix_function_search_path_batch2.sql:47:ALTER FUNCTION update_seller_stats_from_feedback() SET search_path = public;
supabase\migrations\20260103165132_update_handle_new_user_trigger.sql:6:SET search_path = 'public'
supabase\migrations\20260103181808_fix_handle_new_user_account_type.sql:8:SET search_path = public
supabase\migrations\20260104001642_fix_get_category_path_search_path.sql:2:SET search_path = public;;
supabase\migrations\20260106135958_fix_db_lint_errors.sql:31:-- Fix: qualify extensions.gen_random_bytes so a fixed search_path remains safe.
supabase\migrations\20260106135958_fix_db_lint_errors.sql:50:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260106135958_fix_db_lint_errors.sql:95:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260110182427_fix_handle_order_item_status_change.sql:11:SET search_path TO 'public'
supabase\migrations\20260110182431_set_search_path_fulfillment_functions.sql:1:-- Hardening: set explicit search_path on fulfillment status functions
supabase\migrations\20260110182431_set_search_path_fulfillment_functions.sql:3:-- Supabase Security Advisor warns when function search_path is mutable.
supabase\migrations\20260110182431_set_search_path_fulfillment_functions.sql:5:ALTER FUNCTION public.recompute_order_fulfillment_status(uuid) SET search_path TO 'public';
supabase\migrations\20260110182431_set_search_path_fulfillment_functions.sql:6:ALTER FUNCTION public.trg_recompute_order_fulfillment_status() SET search_path TO 'public';
supabase\migrations\20260113200211_category_stats_view.sql:58:SET search_path = public
supabase\migrations\20260114123510_boost_expiry_cron.sql:7:SET search_path = ''
supabase\migrations\20260114223434_fix_security_advisor_warnings.sql:1:-- Fix 1: Set search_path on increment_view_count function
supabase\migrations\20260114223434_fix_security_advisor_warnings.sql:6:SET search_path = public
supabase\migrations\20260119053716_fix_cart_rpcs.sql:57:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260119053716_fix_cart_rpcs.sql:111:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations\20260119195304_add_get_hero_specs_function.sql:24:SET search_path = public
supabase\migrations\20260120003337_fix_normalize_attribute_key_search_path.sql:1:-- Fix search_path for normalize_attribute_key function
supabase\migrations\20260120003337_fix_normalize_attribute_key_search_path.sql:2:-- Security Advisor warning: function_search_path_mutable
supabase\migrations\20260120003337_fix_normalize_attribute_key_search_path.sql:8:SET search_path TO 'public'
supabase\migrations\20260124161357_phase_c_private_surfaces.sql:173:SET search_path TO 'public'
supabase\migrations\20260124161357_phase_c_private_surfaces.sql:254:SET search_path TO 'public'
supabase\migrations\20260124161357_phase_c_private_surfaces.sql:299:SET search_path TO 'public'
supabase\migrations\20260124161357_phase_c_private_surfaces.sql:369:  search_vector,
supabase\migrations\20260124175059_phase_c_followups.sql:63:SET search_path TO 'public'
supabase\migrations\20260124211353_20260124215000_category_stats_security_invoker_view.sql:25:SET search_path = public
supabase\migrations\20260124210112_20260124214000_category_stats_public_view.sql:27:SET search_path = public
supabase\migrations\20260124211929_20260124213000_anon_privileges_hardening.sql:21:SET search_path TO 'public'
supabase\migrations\20260124211929_20260124213000_anon_privileges_hardening.sql:34:SET search_path TO 'public'
supabase\migrations\20260124221818_20260124220000_products_category_must_be_leaf.sql:13:SET search_path = public
supabase\migrations\20260127020753_create_get_badge_specs_rpc.sql:22:SET search_path TO 'public'
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:1:-- Fix Security Advisor: function_search_path_mutable
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:2:-- Ensure functions run with a fixed, non-mutable search_path.
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:5:  SET search_path = public;
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:8:  SET search_path = public;
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:11:  SET search_path = public;
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:14:  SET search_path = public;
supabase\migrations\20260129044947_fix_missing_function_search_path.sql:17:  SET search_path = public;
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:50:$$ language plpgsql security definer set search_path = public, pg_temp;
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:74:$$ language plpgsql security definer set search_path = public, pg_temp;
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:108:  product_images text[],
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:117:set search_path = public, pg_temp
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:147:    p.images as product_images,
supabase\migrations\20260130021328_secure_security_definer_rpcs.sql:173:set search_path = public, pg_temp
supabase\migrations\20260204074337_category_attributes_inherit_scope_and_sync.sql:36:SET search_path = public, pg_temp
supabase\migrations\20260204074337_category_attributes_inherit_scope_and_sync.sql:55:SET search_path = public, pg_temp
supabase\migrations\20260204074337_category_attributes_inherit_scope_and_sync.sql:120:SET search_path = public, pg_temp
supabase\migrations\20260204074337_category_attributes_inherit_scope_and_sync.sql:246:SET search_path = public, pg_temp
supabase\migrations\20260223183000_fix_rpc_lint_errors.sql:11:SET search_path = public, pg_temp
supabase\migrations\20260223183000_fix_rpc_lint_errors.sql:67:SET search_path = public, pg_temp
supabase\migrations\20260224040000_category_browseable_layer.sql:60:SET search_path = ''
supabase\migrations\20260224050000_fix_product_leaf_mapping.sql:15:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251204194749_real_estate_attributes_location.sql:21:    -- Sofia Districts (most common search)
supabase\migrations_legacy_sync_20260223193150\20251204200153_services_l2_education_tech_business.sql:84:-- Research Services
supabase\migrations_legacy_sync_20260223193150\20251204200153_services_l2_education_tech_business.sql:85:('b1c2d3e4-2008-4000-8000-000000000010', 'Research Services', 'Изследователски услуги', 'business-research', 'b1c2d3e4-1111-4000-8000-000000000007', '🔬', 10),
supabase\migrations_legacy_sync_20260223193150\20251204202507_expand_software_category_l3_depth_part1.sql:91:('Roam Research', 'Roam Research', 'notes-roam', '🧠', v_parent_id, 5),
supabase\migrations_legacy_sync_20260223193150\20251204202618_expand_software_category_l3_depth_part2.sql:176:('AI-Powered Search', 'AI търсене', 'ai-search', '🔎', v_parent_id, 7);
supabase\migrations_legacy_sync_20260223193150\20251207213240_restore_software_digital_l3_complete.sql:114:  ('Research Papers', 'ebooks-research', 'Научни статии', 4),
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:2:-- Fix function search_path security warnings with correct signatures
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:3:ALTER FUNCTION public.get_category_hierarchy(p_slug text, p_depth integer) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:4:ALTER FUNCTION public.transliterate_bulgarian(input_text text) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:5:ALTER FUNCTION public.generate_product_slug(title text, product_id uuid) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:6:ALTER FUNCTION public.auto_generate_product_slug() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:7:ALTER FUNCTION public.generate_store_slug(store_name text) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251208095400_fix_function_search_paths_v2.sql:8:ALTER FUNCTION public.auto_generate_store_slug() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251213000000_chat_query_optimization.sql:34:  product_images TEXT[],
supabase\migrations_legacy_sync_20260223193150\20251213000000_chat_query_optimization.sql:44:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20251213000000_chat_query_optimization.sql:70:    p.images AS product_images,
supabase\migrations_legacy_sync_20260223193150\20251213000000_chat_query_optimization.sql:101:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20251213113940_add_order_item_status_and_triggers.sql:104:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251213113940_add_order_item_status_and_triggers.sql:189:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251213000000_subscription_plans_enhanced.sql:34:  '["10 active listings", "10% commission", "Standard search visibility", "Community support"]'::jsonb,
supabase\migrations_legacy_sync_20260223193150\20251213014840_seller_account_types_and_plans.sql:88:  '["50 active listings", "7% commission on sales", "3 free boosts/month", "⭐ Pro Seller badge", "Full analytics dashboard", "Priority email support", "Featured in search results"]'::jsonb
supabase\migrations_legacy_sync_20260223193150\20251211000000_seller_feedback.sql:107:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251211000000_seller_feedback.sql:123:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251213121702_fix_order_item_trigger_ambiguous_buyer_id.sql:65:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;;
supabase\migrations_legacy_sync_20260223193150\20251209130630_fix_function_search_path_security.sql:2:-- Fix security warning: Function search_path mutable
supabase\migrations_legacy_sync_20260223193150\20251209130630_fix_function_search_path_security.sql:3:-- Add SET search_path to the function to prevent mutable search_path vulnerability
supabase\migrations_legacy_sync_20260223193150\20251209130630_fix_function_search_path_security.sql:9:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251213162700_add_fee_columns_and_update_plans.sql:46:  '["50 free listings per month", "12% fee when you sell", "0.25 лв per order", "0.30 лв per extra listing", "Standard search visibility", "Community support"]'::jsonb,
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:1:-- Drop existing functions to recreate with fixed search_path
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:5:-- Recreate get_user_conversations with empty search_path
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:27:  product_images TEXT[],
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:36:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:58:    p.images AS product_images,
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:82:-- Recreate get_user_conversation_ids with empty search_path
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:87:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:101:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251213130919_fix_search_path_security_v2.sql:119:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251213123733_fix_get_user_conversations_rpc.sql:25:  product_images TEXT[],
supabase\migrations_legacy_sync_20260223193150\20251213123733_fix_get_user_conversations_rpc.sql:58:    p.images AS product_images,
supabase\migrations_legacy_sync_20260223193150\20251213182000_fix_tier_enum_consistency.sql:44:  '["50 free listings per month", "12% fee when you sell", "0.25 лв per order", "Standard search visibility"]'::jsonb,
supabase\migrations_legacy_sync_20260223193150\20251213123651_create_get_user_conversations_rpc.sql:25:  product_images TEXT[],
supabase\migrations_legacy_sync_20260223193150\20251213123651_create_get_user_conversations_rpc.sql:58:    p.images AS product_images,
supabase\migrations_legacy_sync_20260223193150\20251213122439_fix_trigger_no_auth_context.sql:67:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251214110256_phase4_notification_triggers.sql:8:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:52:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:69:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:85:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:108:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:136:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:166:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000001_blocked_users.sql:207:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110241_phase4_notifications_functions.sql:11:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110241_phase4_notifications_functions.sql:27:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110241_phase4_notifications_functions.sql:44:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214100000_reviews_feedback_system.sql:28:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214100000_reviews_feedback_system.sql:126:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214100000_reviews_feedback_system.sql:182:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214100000_reviews_feedback_system.sql:230:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214100000_reviews_feedback_system.sql:314:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214000001_complete_fee_structure.sql:117:    "Standard search visibility",
supabase\migrations_legacy_sync_20260223193150\20251214000000_notifications_table.sql:66:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000000_notifications_table.sql:82:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000000_notifications_table.sql:99:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000000_notifications_table.sql:126:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214000000_notifications_table.sql:194:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110309_phase4_order_status_notification_trigger.sql:8:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110336_phase4_blocked_users_functions.sql:11:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110336_phase4_blocked_users_functions.sql:28:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110336_phase4_blocked_users_functions.sql:44:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110336_phase4_blocked_users_functions.sql:67:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110336_phase4_blocked_users_functions.sql:95:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214110430_phase4_message_block_trigger.sql:10:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214111953_reviews_feedback_system.sql:28:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214111953_reviews_feedback_system.sql:126:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214111953_reviews_feedback_system.sql:182:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214111953_reviews_feedback_system.sql:230:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214111953_reviews_feedback_system.sql:282:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251214110832_fix_get_or_create_conversation_v2.sql:19:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:35:-- 3. Recreate all functions with SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:38:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:47:RETURNS void LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:57:LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:66:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:70:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:77:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:88:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:101:LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:110:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:114:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:121:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:125:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214132210_security_fixes_phase8.sql:133:RETURNS TRIGGER LANGUAGE plpgsql SECURITY DEFINER SET search_path = '' AS $$
supabase\migrations_legacy_sync_20260223193150\20251214121001_buyer_feedback_stats_trigger.sql:12:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251214121001_buyer_feedback_stats_trigger.sql:49:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251215200000_unified_profile_system.sql:336:$$ LANGUAGE plpgsql STABLE SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251215200000_unified_profile_system.sql:405:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251215200000_unified_profile_system.sql:467:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251215200000_unified_profile_system.sql:527:$$ LANGUAGE plpgsql STABLE SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:21:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:46:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:81:  product_images text[],
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:90:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:112:    p.images AS product_images,
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:138:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:159:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215124744_fix_sellers_table_references.sql:179:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:50:-- Add SET search_path = '' to prevent search path attacks
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:58:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:101:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:130:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:154:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:168:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:192:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:236:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:272:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:293:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:309:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:327:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:343:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:366:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:406:COMMENT ON FUNCTION public.sync_seller_from_subscription() IS 'Syncs seller tier when subscription changes. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:407:COMMENT ON FUNCTION public.check_subscription_expiry() IS 'Marks expired subscriptions. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:408:COMMENT ON FUNCTION public.get_seller_subscription_status(UUID) IS 'Gets seller subscription info. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:409:COMMENT ON FUNCTION public.queue_badge_evaluation() IS 'Queues badge evaluation. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:410:COMMENT ON FUNCTION public.update_seller_sales_stats() IS 'Updates seller stats on sale. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:411:COMMENT ON FUNCTION public.update_seller_rating() IS 'Recalculates seller rating. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:412:COMMENT ON FUNCTION public.check_listing_limit() IS 'Enforces listing limits. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:413:COMMENT ON FUNCTION public.get_seller_listing_info(UUID) IS 'Gets seller listing info. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:414:COMMENT ON FUNCTION public.init_seller_stats() IS 'Initializes seller_stats row. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:415:COMMENT ON FUNCTION public.init_business_verification() IS 'Initializes business verification row. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:416:COMMENT ON FUNCTION public.init_user_verification() IS 'Initializes user verification row. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:417:COMMENT ON FUNCTION public.update_follower_count() IS 'Updates follower count. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:418:COMMENT ON FUNCTION public.update_seller_listing_counts() IS 'Updates listing counts. SET search_path = '''' for security.';
supabase\migrations_legacy_sync_20260223193150\20251215100000_security_fixes_phase8.sql:433:ALTER TABLE public.product_images ENABLE ROW LEVEL SECURITY;
supabase\migrations_legacy_sync_20260223193150\20251217000001_get_conversation_messages_rpc.sql:21:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:5:-- 1. SECURITY: Function search_path vulnerability (handle_new_user, auto_set_seller_flag)
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:12:-- PART 1: Fix Security Definer Functions (add search_path)
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:15:-- Fix handle_new_user function - add search_path security
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:20:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:44:-- Fix auto_set_seller_flag function - add search_path security
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:49:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251217000000_phase2_security_performance.sql:81:    search_vector,
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:8:-- 1. FIX: function_search_path_mutable for validate_username
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:9:-- Issue: Function search_path is mutable, could be exploited
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:10:-- Fix: Set search_path to empty string for security
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:13:-- Drop and recreate with secure search_path
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:18:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20251218000000_security_performance_audit_fixes.sql:237:-- - 1 security function fixed (search_path)
supabase\migrations_legacy_sync_20260223193150\20251219094302_phase12_security_performance_audit.sql:5:-- FIX 1: Function search_path security
supabase\migrations_legacy_sync_20260223193150\20251219094302_phase12_security_performance_audit.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251219094302_phase12_security_performance_audit.sql:51:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251219094302_phase12_security_performance_audit.sql:84:$$ LANGUAGE plpgsql IMMUTABLE SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251219000000_complete_notifications_triggers.sql:13:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251219000000_complete_notifications_triggers.sql:66:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251219000000_complete_notifications_triggers.sql:114:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251220000000_update_follower_count_trigger.sql:8:SET search_path TO ''
supabase\migrations_legacy_sync_20260223193150\20251217151237_get_conversation_messages_rpc.sql:21:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251226000000_cart_and_wishlist_hardening.sql:81:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226000000_cart_and_wishlist_hardening.sql:174:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226000000_cart_and_wishlist_hardening.sql:207:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226000000_cart_and_wishlist_hardening.sql:220:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251217155607_fix_get_conversation_messages_rpc_v2.sql:20:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251227000000_phase2_advisors_fixes_20251227.sql:6:-- SECURITY: pin search_path to avoid role-mutable search_path
supabase\migrations_legacy_sync_20260223193150\20251227000000_phase2_advisors_fixes_20251227.sql:8:set search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:5:-- 1. SECURITY: Function search_path vulnerability (handle_new_user, auto_set_seller_flag)
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:12:-- PART 1: Fix Security Definer Functions (add search_path)
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:15:-- Fix handle_new_user function - add search_path security
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:20:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:44:-- Fix auto_set_seller_flag function - add search_path security
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:49:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20251217151203_phase2_security_performance.sql:82:    search_vector,
supabase\migrations_legacy_sync_20260223193150\20251219000000_phase12_security_performance_audit.sql:5:-- FIX 1: Function search_path security
supabase\migrations_legacy_sync_20260223193150\20251219000000_phase12_security_performance_audit.sql:23:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251219000000_phase12_security_performance_audit.sql:51:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251219000000_phase12_security_performance_audit.sql:84:$$ LANGUAGE plpgsql IMMUTABLE SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251226202032_cart_and_wishlist_hardening_20251226.sql:81:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226202032_cart_and_wishlist_hardening_20251226.sql:174:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226202032_cart_and_wishlist_hardening_20251226.sql:207:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251226202032_cart_and_wishlist_hardening_20251226.sql:220:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20251227170607_phase2_advisors_fixes_20251227.sql:3:-- SECURITY: pin search_path to avoid role-mutable search_path
supabase\migrations_legacy_sync_20260223193150\20251227170607_phase2_advisors_fixes_20251227.sql:5:set search_path = public;
supabase\migrations_legacy_sync_20260223193150\20251231164453_add_category_ancestors_to_products.sql:97:    p.images,
supabase\migrations_legacy_sync_20260223193150\20251231163053_add_get_category_descendants_function.sql:8:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:1:-- Fix function search_path security warnings
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:9:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:26:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:50:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:59:    p.images,
supabase\migrations_legacy_sync_20260223193150\20260101053207_fix_function_search_path_v2.sql:82:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:2:-- Fix function search_path security warnings
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:5:-- https://supabase.com/docs/guides/database/database-linter?lint=0011_function_search_path_mutable
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:7:-- Functions must have search_path set to '' to prevent potential SQL injection
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:8:-- via search_path manipulation. When search_path is empty, you must use
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:11:-- NOTE: This migration was applied as fix_function_search_path_v2
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:19:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:36:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:60:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:69:    p.images,
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:92:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260101000000_fix_function_search_path.sql:102:  RAISE NOTICE 'Migration complete: Fixed search_path for 4 functions';
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:2:-- Fix search_path for remaining functions - batch 2
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:5:ALTER FUNCTION on_listing_boost_created() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:8:ALTER FUNCTION on_review_notify() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:11:ALTER FUNCTION on_seller_feedback_notify() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:14:ALTER FUNCTION order_items_decrement_stock() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:17:ALTER FUNCTION protect_sensitive_columns() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:20:ALTER FUNCTION queue_badge_evaluation() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:23:ALTER FUNCTION update_follower_count() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:26:ALTER FUNCTION update_product_category_ancestors() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:29:ALTER FUNCTION update_product_rating() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:32:ALTER FUNCTION update_product_stock() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:35:ALTER FUNCTION update_seller_five_star_count() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:38:ALTER FUNCTION update_seller_listing_counts() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:41:ALTER FUNCTION update_seller_rating() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:44:ALTER FUNCTION update_seller_sales_stats() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101521_fix_function_search_path_batch2.sql:47:ALTER FUNCTION update_seller_stats_from_feedback() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260103000000_fix_handle_new_user_account_type.sql:8:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260102070516_variant_id_cart_order_items.sql:139:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260102070516_variant_id_cart_order_items.sql:196:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260102070516_variant_id_cart_order_items.sql:250:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations_legacy_sync_20260223193150\20260102070516_variant_id_cart_order_items.sql:255:SET search_path = public, pg_catalog
supabase\migrations_legacy_sync_20260223193150\20260101225539_order_items_decrement_stock_trigger.sql:6:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations_legacy_sync_20260223193150\20260101225539_order_items_decrement_stock_trigger.sql:11:SET search_path = public, pg_catalog
supabase\migrations_legacy_sync_20260223193150\20260102120000_order_items_decrement_stock_trigger.sql:6:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations_legacy_sync_20260223193150\20260102120000_order_items_decrement_stock_trigger.sql:11:SET search_path = public, pg_catalog
supabase\migrations_legacy_sync_20260223193150\20260104001642_fix_get_category_path_search_path.sql:2:SET search_path = public;;
supabase\migrations_legacy_sync_20260223193150\20260103181808_fix_handle_new_user_account_type.sql:8:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260102130000_variant_id_cart_order_items.sql:139:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260102130000_variant_id_cart_order_items.sql:196:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260102130000_variant_id_cart_order_items.sql:251:-- SECURITY: Use a fixed search_path to avoid SECURITY DEFINER attacks.
supabase\migrations_legacy_sync_20260223193150\20260102130000_variant_id_cart_order_items.sql:256:SET search_path = public, pg_catalog
supabase\migrations_legacy_sync_20260223193150\20260103165132_update_handle_new_user_trigger.sql:6:SET search_path = 'public'
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:2:-- Fix search_path for cart functions and others - batch 1
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:11:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:24:ALTER FUNCTION cart_add_item(uuid, uuid, integer) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:27:ALTER FUNCTION cart_clear() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:30:ALTER FUNCTION cart_set_quantity(uuid, integer, uuid) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:33:ALTER FUNCTION expire_listing_boosts() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:36:ALTER FUNCTION get_category_ancestor_ids(uuid) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:39:ALTER FUNCTION get_user_conversation_ids(uuid) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:41:-- Fix handle_new_product_search
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:42:ALTER FUNCTION handle_new_product_search() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:45:ALTER FUNCTION increment_helpful_count(uuid) SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:48:ALTER FUNCTION init_business_verification() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:51:ALTER FUNCTION init_seller_stats() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:54:ALTER FUNCTION init_user_verification() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260102101511_fix_function_search_path_batch1.sql:57:ALTER FUNCTION is_admin() SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260106135958_fix_db_lint_errors.sql:31:-- Fix: qualify extensions.gen_random_bytes so a fixed search_path remains safe.
supabase\migrations_legacy_sync_20260223193150\20260106135958_fix_db_lint_errors.sql:50:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260106135958_fix_db_lint_errors.sql:95:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260110153200_set_search_path_fulfillment_functions.sql:1:-- Hardening: set explicit search_path on fulfillment status functions
supabase\migrations_legacy_sync_20260223193150\20260110153200_set_search_path_fulfillment_functions.sql:3:-- Supabase Security Advisor warns when function search_path is mutable.
supabase\migrations_legacy_sync_20260223193150\20260110153200_set_search_path_fulfillment_functions.sql:5:ALTER FUNCTION public.recompute_order_fulfillment_status(uuid) SET search_path TO 'public';
supabase\migrations_legacy_sync_20260223193150\20260110153200_set_search_path_fulfillment_functions.sql:6:ALTER FUNCTION public.trg_recompute_order_fulfillment_status() SET search_path TO 'public';
supabase\migrations_legacy_sync_20260223193150\20260110153100_fix_handle_order_item_status_change.sql:11:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260110182427_fix_handle_order_item_status_change.sql:11:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260110182431_set_search_path_fulfillment_functions.sql:1:-- Hardening: set explicit search_path on fulfillment status functions
supabase\migrations_legacy_sync_20260223193150\20260110182431_set_search_path_fulfillment_functions.sql:3:-- Supabase Security Advisor warns when function search_path is mutable.
supabase\migrations_legacy_sync_20260223193150\20260110182431_set_search_path_fulfillment_functions.sql:5:ALTER FUNCTION public.recompute_order_fulfillment_status(uuid) SET search_path TO 'public';
supabase\migrations_legacy_sync_20260223193150\20260110182431_set_search_path_fulfillment_functions.sql:6:ALTER FUNCTION public.trg_recompute_order_fulfillment_status() SET search_path TO 'public';
supabase\migrations_legacy_sync_20260223193150\20260112000000_category_stats_view.sql:61:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260114020000_boost_expiry_cron.sql:18:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260113200211_category_stats_view.sql:58:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260114123510_boost_expiry_cron.sql:7:SET search_path = ''
supabase\migrations_legacy_sync_20260223193150\20260114223434_fix_security_advisor_warnings.sql:1:-- Fix 1: Set search_path on increment_view_count function
supabase\migrations_legacy_sync_20260223193150\20260114223434_fix_security_advisor_warnings.sql:6:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260119053716_fix_cart_rpcs.sql:57:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260119053716_fix_cart_rpcs.sql:111:$$ LANGUAGE plpgsql SECURITY DEFINER SET search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260119195304_add_get_hero_specs_function.sql:24:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260120000000_buyer_protection_fees.sql:160:    "Slight priority in search"
supabase\migrations_legacy_sync_20260223193150\20260120003337_fix_normalize_attribute_key_search_path.sql:1:-- Fix search_path for normalize_attribute_key function
supabase\migrations_legacy_sync_20260223193150\20260120003337_fix_normalize_attribute_key_search_path.sql:2:-- Security Advisor warning: function_search_path_mutable
supabase\migrations_legacy_sync_20260223193150\20260120003337_fix_normalize_attribute_key_search_path.sql:8:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124090000_paid_only_boost_fields.sql:13:SET search_path = public, pg_catalog
supabase\migrations_legacy_sync_20260223193150\20260124100000_update_deal_products_view.sql:5:-- This keeps Deals semantics consistent across API, search, and count endpoints.
supabase\migrations_legacy_sync_20260223193150\20260124100000_update_deal_products_view.sql:25:    search_vector,
supabase\migrations_legacy_sync_20260223193150\20260124120000_phase_c_private_surfaces.sql:173:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124120000_phase_c_private_surfaces.sql:254:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124120000_phase_c_private_surfaces.sql:299:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124120000_phase_c_private_surfaces.sql:369:  search_vector,
supabase\migrations_legacy_sync_20260223193150\20260124161357_phase_c_private_surfaces.sql:173:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124161357_phase_c_private_surfaces.sql:254:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124161357_phase_c_private_surfaces.sql:299:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124161357_phase_c_private_surfaces.sql:369:  search_vector,
supabase\migrations_legacy_sync_20260223193150\20260124175059_phase_c_followups.sql:63:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124200000_phase_c_followups.sql:63:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124210112_20260124214000_category_stats_public_view.sql:27:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260124211353_20260124215000_category_stats_security_invoker_view.sql:25:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260124211929_20260124213000_anon_privileges_hardening.sql:21:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124211929_20260124213000_anon_privileges_hardening.sql:34:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124213000_anon_privileges_hardening.sql:21:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124213000_anon_privileges_hardening.sql:34:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260124214000_category_stats_public_view.sql:27:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260124215000_category_stats_security_invoker_view.sql:25:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260124221818_20260124220000_products_category_must_be_leaf.sql:13:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260124220000_products_category_must_be_leaf.sql:13:SET search_path = public
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:1:-- Fix Security Advisor: function_search_path_mutable
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:2:-- Ensure functions run with a fixed, non-mutable search_path.
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:5:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:8:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:11:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:14:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129120000_fix_missing_function_search_path.sql:17:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:1:-- Fix Security Advisor: function_search_path_mutable
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:2:-- Ensure functions run with a fixed, non-mutable search_path.
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:5:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:8:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:11:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:14:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260129044947_fix_missing_function_search_path.sql:17:  SET search_path = public;
supabase\migrations_legacy_sync_20260223193150\20260127020753_create_get_badge_specs_rpc.sql:22:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:50:$$ language plpgsql security definer set search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:74:$$ language plpgsql security definer set search_path = public, pg_temp;
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:108:  product_images text[],
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:117:set search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:147:    p.images as product_images,
supabase\migrations_legacy_sync_20260223193150\20260130021328_secure_security_definer_rpcs.sql:173:set search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260130090000_mark_messages_read_participant_check.sql:9:SET search_path TO 'public'
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:1:-- SECURITY: harden SECURITY DEFINER functions (fixed search_path + auth guard)
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:7:set search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:17:create or replace function public.cleanup_old_search_history()
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:21:set search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:24:  delete from public.search_history
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:27:    select id from public.search_history
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:36:create or replace function public.add_search_history(
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:45:set search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:55:      raise exception 'Cannot write search history for another user';
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:63:  delete from public.search_history
supabase\migrations_legacy_sync_20260223193150\20260131124500_search_history_security_definer_hardening.sql:66:  insert into public.search_history (user_id, query, category, result_count)
supabase\migrations_legacy_sync_20260223193150\20260204074337_category_attributes_inherit_scope_and_sync.sql:36:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204074337_category_attributes_inherit_scope_and_sync.sql:55:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204074337_category_attributes_inherit_scope_and_sync.sql:120:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204074337_category_attributes_inherit_scope_and_sync.sql:246:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260223183000_fix_rpc_lint_errors.sql:11:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260223183000_fix_rpc_lint_errors.sql:67:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204090000_category_attributes_inherit_scope_and_sync.sql:36:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204090000_category_attributes_inherit_scope_and_sync.sql:55:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204090000_category_attributes_inherit_scope_and_sync.sql:120:SET search_path = public, pg_temp
supabase\migrations_legacy_sync_20260223193150\20260204090000_category_attributes_inherit_scope_and_sync.sql:246:SET search_path = public, pg_temp
